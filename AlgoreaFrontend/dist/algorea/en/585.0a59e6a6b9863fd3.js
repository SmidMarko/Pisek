"use strict";(self.webpackChunkalgorea=self.webpackChunkalgorea||[]).push([[585],{1585:(lc,Me,_)=>{_.r(Me),_.d(Me,{GroupModule:()=>cc});var g=_(4666),_o=_(6284),S=_(3792),j=_(8446),e=_(2560),Q=_(6101),K=_(5682),L=_(261),co=_(9520),y=_(253),J=_(6067),Pe=_(4874),q=_(8977),v=_(2673),f=_(8987);const lo=[];function po(n,r){return JSON.stringify(n)===JSON.stringify(r)}function uo(n){let r=new f.LE;if(0==n.length)return r;const o=n.map(t=>t.ascending?t.field:`-${t.field}`);return r=r.set("sort",o.join(",")),r}var R=_(661),C=_(7794),l=_(6507),ee=_(1280),ce=_(9617),w=_(2094),p=_(635);const fo=(0,ee.zG)(l.n_({action:l.i0("invitation_accepted","join_request_accepted","joined_by_code","joined_by_badge","added_directly"),group:l.n_({description:l.AG(l.Z_),id:l.Z_,name:l.Z_,type:l.i0("Class","Team","Club","Friends","Other","Base","Session")}),memberSince:l.AG(ce.QK),isMembershipLocked:l.O7}),l.wf(l.r$({canLeaveTeam:l.i0("free_to_leave","frozen_membership","would_break_entry_conditions")})));let mo=(()=>{class n{constructor(o){this.http=o}getJoinedGroups(o){return this.http.get(`${C.e.apiUrl}/current-user/group-memberships`,{params:uo(o)}).pipe((0,w.m)(l.IX(fo)),(0,p.U)(t=>t.filter(i=>"Base"!==i.group.type)))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=_(9941);let Te=(()=>{class n{constructor(o){this.http=o}leave(o){return this.http.delete(`${C.e.apiUrl}/current-user/group-memberships/${o}`).pipe((0,p.U)(A.Te),(0,p.U)(t=>t.changed))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=_(4356),G=_(5484),E=_(2578),I=_(4723),x=_(6328),ve=_(4538),oe=_(4329);function ho(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",3),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function Co(n,r){1&n&&(e.TgZ(0,"tr")(1,"th"),e.SDv(2,8),e.qZA(),e.TgZ(3,"th"),e.SDv(4,9),e.qZA(),e.TgZ(5,"th",10)(6,"span"),e.SDv(7,11),e.qZA(),e._UZ(8,"p-sortIcon",12),e.qZA(),e.TgZ(9,"th",13),e.SDv(10,14),e.qZA()())}function Oo(n,r){if(1&n&&e.YNc(0,Co,11,0,"tr",0),2&n){const o=e.oxw(2).ngIf;e.Q6J("ngIf",o.isReady&&o.data.length>0)}}function Eo(n,r){1&n&&e.GkF(0)}function So(n,r){1&n&&e._UZ(0,"div",25)}function Mo(n,r){1&n&&e._UZ(0,"div",26)}function Po(n,r){1&n&&e._UZ(0,"div",27)}function To(n,r){if(1&n&&(e.ynx(0,21),e.YNc(1,So,1,0,"div",22),e.YNc(2,Mo,1,0,"div",23),e.YNc(3,Po,1,0,"div",24),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.Q6J("ngSwitch",o.canLeaveTeam),e.xp6(1),e.Q6J("ngSwitchCase","frozen_membership"),e.xp6(1),e.Q6J("ngSwitchCase","would_break_entry_conditions")}}function vo(n,r){1&n&&(e.ynx(0),e._UZ(1,"div",28),e.BQk())}function No(n,r){if(1&n&&(e.YNc(0,To,4,3,"ng-container",20),e.YNc(1,vo,2,0,"ng-container",0)),2&n){const o=e.oxw().$implicit;e.Q6J("ngIf","Team"===o.group.type),e.xp6(1),e.Q6J("ngIf","Team"!==o.group.type)}}function Go(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(i){e.CHM(o);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.onGroupLeaveClick(i,a))}),e.qZA()}}function Ro(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"a",15),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td")(10,"div",16),e.YNc(11,Eo,1,0,"ng-container",17),e.YNc(12,No,2,2,"ng-template",null,18,e.W1O),e.YNc(14,Go,1,0,"ng-template",null,19,e.W1O),e.qZA()()()),2&n){const o=r.$implicit,t=e.MAs(13),i=e.MAs(15);e.xp6(2),e.MGl("routerLink","../by-id/",o.group.id,"/details"),e.xp6(1),e.Oqu(o.group.name),e.xp6(2),e.Oqu(o.group.type),e.xp6(2),e.Oqu(e.xi3(8,7,o.memberSince,"short")),e.xp6(4),e.Q6J("ngIf",o.isMembershipLocked||"Team"===o.group.type&&"free_to_leave"!==o.canLeaveTeam)("ngIfThen",t)("ngIfElse",i)}}function bo(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"p",30),e.SDv(3,31),e.qZA()()()),2&n){const o=r.$implicit;e.xp6(1),e.uIk("colspan",null==o?null:o.length)}}const Ao=function(){return[]};function Uo(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"p-table",4),e.NdJ("sortFunction",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.onCustomSort(i))}),e.YNc(1,Oo,1,1,"ng-template",5),e.YNc(2,Ro,16,10,"ng-template",6),e.YNc(3,bo,4,1,"ng-template",7),e.qZA()}if(2&n){const o=e.oxw().ngIf;e.Q6J("value",o.data||e.DdM(3,Ao))("customSort",!0)("loading",o.isFetching)}}function Io(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ho,1,1,"alg-error",1),e.YNc(2,Uo,4,4,"p-table",2),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",!o.isError)}}let yo=(()=>{class n{constructor(o,t,i,a){this.joinedGroupsService=o,this.groupLeaveService=t,this.confirmationService=i,this.actionFeedbackService=a,this.refresh$=new y.x,this.sort$=new J.t(1),this.state$=this.sort$.pipe((0,Pe.O)(lo),(0,q.x)(po),(0,v.w)(s=>this.joinedGroupsService.getJoinedGroups(s)),(0,R.iS)({resetter:this.refresh$.asObservable()}))}ngOnDestroy(){this.sort$.complete()}onCustomSort(o){const t=function go(n){return n.multiSortMeta?.map(r=>({field:r.field,ascending:r.order>=0}))}(o);t&&this.sort$.next(t)}onGroupLeaveClick(o,t){this.confirmationService.confirm({target:o.target||void 0,key:"commonPopup",message:"Are you sure you want to leave this group?",header:"Confirm Action",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes, leave group",accept:()=>{this.leaveGroup(t)},rejectLabel:"No"})}leaveGroup(o){const i=o.group.name;this.groupLeaveService.leave(o.group.id).subscribe({next:()=>{this.refresh(),this.actionFeedbackService.success("You have left \"" + i + "\"")},error:a=>{this.actionFeedbackService.error("Failed to leave \"" + i + "\"")}})}refresh(){this.refresh$.next()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(mo),e.Y36(Te),e.Y36(U.YP),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-joined-group-list"]],decls:2,vars:3,consts:function(){let r,o,t,i,a,s,c,u,h;return r="Error while loading the group you joined",o="Name",t="Type",i="Joined On",a=" Action ",s="This team membership is now frozen and cannot be modified.",c="You cannot leave this team as it would break entry condition to some content your team participating to.",u="You cannot leave the group for the moment. Contact the group manager for more information.",h="This list is empty.",[[4,"ngIf"],["class","dark","icon","fa fa-exclamation-triangle","message",r,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["class","alg-table --joined-group-list","sortMode","multiple",3,"value","customSort","loading","sortFunction",4,"ngIf"],["icon","fa fa-exclamation-triangle","message",r,"refreshButtonType","refresh",1,"dark",3,"showRefreshButton","refresh"],["sortMode","multiple",1,"alg-table","--joined-group-list",3,"value","customSort","loading","sortFunction"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],o,t,["pSortableColumn","member_since"],i,["field","member_since"],[1,"th-action"],a,[1,"alg-link",3,"routerLink"],[1,"actions"],[4,"ngIf","ngIfThen","ngIfElse"],["cannotLeaveActions",""],["canLeaveActions",""],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["pTooltip",s,"tooltipPosition","left","tooltipEvent","hover","class","fa fa-lock",4,"ngSwitchCase"],["pTooltip",c,"tooltipPosition","left","tooltipEvent","hover","class","fa fa-lock",4,"ngSwitchCase"],["class","fa fa-lock",4,"ngSwitchDefault"],["pTooltip",s,"tooltipPosition","left","tooltipEvent","hover",1,"fa","fa-lock"],["pTooltip",c,"tooltipPosition","left","tooltipEvent","hover",1,"fa","fa-lock"],[1,"fa","fa-lock"],["pTooltip",u,"tooltipPosition","left","tooltipEvent","hover",1,"fa","fa-lock"],["pButton","","pRipple","","type","button","icon","fa fa-sign-out-alt",1,"p-button-rounded","p-button-outlined",3,"click"],[1,"empty-message"],h]},template:function(o,t){1&o&&(e.YNc(0,Io,3,2,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,g.RF,g.n9,g.ED,S.yS,U.jx,E.iA,E.lQ,E.fz,I.q,x.Hq,ve.H,oe.u,g.Ov,g.uU],styles:["[_nghost-%COMP%]{position:relative;display:block}.th-action[_ngcontent-%COMP%]{width:8rem}.actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();var B=_(1640),k=(()=>{return(n=k||(k={}))[n.Accept=0]="Accept",n[n.Reject=1]="Reject",k;var n})();let Ne=(()=>{class n{constructor(o){this.http=o}processJoinRequests(o,t){const i=t===k.Accept?"accept":"reject";return(0,B.D)(Array.from(o.entries()).map(a=>this.http.post(`${C.e.apiUrl}/groups/${a[0]}/join-requests/${i}`,null,{params:{group_ids:a[1].join(",")}}).pipe((0,p.U)(A.Te),(0,p.U)(s=>new Map(Object.entries(s))))))}processLeaveRequests(o,t){const i=t===k.Accept?"accept":"reject";return(0,B.D)(Array.from(o.entries()).map(a=>this.http.post(`${C.e.apiUrl}/groups/${a[0]}/leave-requests/${i}`,null,{params:{group_ids:a[1].join(",")}}).pipe((0,p.U)(A.Te),(0,p.U)(s=>new Map(Object.entries(s))))))}processGroupInvitations(o,t){const i=t===k.Accept?"accept":"reject";return(0,B.D)(o.map(a=>this.http.post(`${C.e.apiUrl}/current-user/group-invitations/${a}/${i}`,null).pipe((0,p.U)(A.Te))))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ne=_(6646),P=_(745),te=_(7739);function Ge(n,r,o){const t=o===k.Accept?"accepted":"declined";if(r.countSuccess===r.countRequests)n.success("" + r.countSuccess + " request(s) have been " + t + "");else if(0===r.countSuccess){const i=o===k.Accept?"Unable to accept the selected request(s).":"Unable to reject the selected request(s).";n.error(i)}else n.partial("" + r.countSuccess + " request(s) have been " + t + ", " + (r.countRequests - r.countSuccess) + " could not be executed")}var re=_(974);const $o=(0,ee.zG)(l.n_({groupId:l.Z_,login:l.Z_}),l.wf(l.r$({firstName:l.AG(l.Z_),lastName:l.AG(l.Z_),grade:l.AG(l.Rx)}))),Do=l.n_({at:l.AG(ce.QK),group:l.n_({id:l.Z_,name:l.Z_}),type:l.i0("join_request","leave_request"),user:$o}),wo=l.n_({action:l.i0("invitation_created","join_request_created","join_request_refused"),at:ce.QK,group:l.n_({id:l.Z_,name:l.Z_,description:l.AG(l.Z_),type:l.i0("Class","Team","Club","Friends","Other","Session","Base")}),groupId:l.Z_,invitingUser:l.AG(l.n_({id:l.Z_,firstName:l.AG(l.Z_),lastName:l.AG(l.Z_),login:l.Z_}))});let Re=(()=>{class n{constructor(o){this.http=o}getGroupPendingRequests(o,t=!1,i=[]){let a=new f.LE;return o&&(a=a.set("group_id",o),t&&(a=a.set("include_descendant_groups","1"))),i.length>0&&(a=a.set("sort",i.join(","))),this.http.get(`${C.e.apiUrl}/groups/user-requests`,{params:a}).pipe((0,w.m)(l.IX(Do)),(0,p.U)(s=>s.map(c=>({at:c.at,group:c.group,user:{id:c.user.groupId,login:c.user.login,firstName:c.user.firstName||null,lastName:c.user.lastName||null,grade:c.user.grade||null}}))))}getGroupInvitations(o=[]){let t=new f.LE;return o.length>0&&(t=t.set("sort",o.join(","))),this.http.get(`${C.e.apiUrl}/current-user/group-invitations`,{params:t}).pipe((0,w.m)(l.IX(wo)),(0,p.U)(i=>i.filter(a=>"invitation_created"===a.action).map(a=>({at:a.at,group:{id:a.group.id,name:a.group.name,description:a.group.description,type:a.group.type},user:a.invitingUser}))))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var le=_(2187),ko=_(1420),Fo=_(1865);const Zo=["headerTemplate"],Jo=["bodyTemplate"],Bo=["footerTemplate"],Yo=["summaryTemplate"],Qo=["rowExpansionTemplate"],qo=["frozenHeaderTemplate"],zo=["frozenBodyTemplate"],Xo=["emptymessageTemplate"],Vo=["table"];function Wo(n,r){if(1&n&&e.GkF(0,7),2&n){const o=e.oxw(2);e.Q6J("ngTemplateOutlet",o.frozenHeaderTemplate)}}function Ho(n,r){1&n&&e.YNc(0,Wo,1,1,"ng-template",6)}const ge=function(n){return{$implicit:n}};function jo(n,r){if(1&n&&e.GkF(0,9),2&n){const o=r.rowIndex,t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.frozenBodyTemplate)("ngTemplateOutletContext",e.VKq(2,ge,o))}}function Ko(n,r){1&n&&e.YNc(0,jo,1,4,"ng-template",8)}function en(n,r){if(1&n&&e.GkF(0,9),2&n){const o=r.$implicit,t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.VKq(2,ge,o))}}function on(n,r){1&n&&e.YNc(0,en,1,4,"ng-template",10)}const nn=function(n,r,o,t){return{$implicit:n,columns:r,rowIndex:o,expanded:t}};function tn(n,r){if(1&n&&e.GkF(0,9),2&n){const o=r.$implicit,t=r.expanded,i=r.columns,a=r.rowIndex,s=e.oxw(2);e.Q6J("ngTemplateOutlet",s.bodyTemplate)("ngTemplateOutletContext",e.l5B(2,nn,o,i,a,t))}}function rn(n,r){1&n&&e.YNc(0,tn,1,7,"ng-template",11)}function an(n,r){if(1&n&&e.GkF(0,7),2&n){const o=e.oxw(2);e.Q6J("ngTemplateOutlet",o.footerTemplate)}}function sn(n,r){1&n&&e.YNc(0,an,1,1,"ng-template",12)}const _n=function(n,r){return{$implicit:n,columns:r}};function cn(n,r){if(1&n&&e.GkF(0,9),2&n){const o=r.$implicit,t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.rowExpansionTemplate)("ngTemplateOutletContext",e.WLB(2,_n,o,t.columns))}}function ln(n,r){1&n&&e.YNc(0,cn,1,5,"ng-template",13)}function gn(n,r){if(1&n&&e.GkF(0,9),2&n){const o=e.oxw(2),t=e.MAs(1);e.Q6J("ngTemplateOutlet",o.summaryTemplate)("ngTemplateOutletContext",e.VKq(2,ge,t))}}function pn(n,r){1&n&&e.YNc(0,gn,1,4,"ng-template",14)}function dn(n,r){if(1&n&&e.GkF(0,7),2&n){const o=e.oxw(2);e.Q6J("ngTemplateOutlet",o.emptymessageTemplate)}}function un(n,r){1&n&&e.YNc(0,dn,1,1,"ng-template",15)}function fn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"span",16),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.showColumns())}),e._UZ(1,"i",17),e.qZA()}}const mn=function(n){return{checked:n}};function hn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"li")(1,"span",26),e.NdJ("click",function(){const a=e.CHM(o).$implicit,s=e.oxw(3);return e.KtG(s.handleColumnChanges(a))}),e._uU(2),e.qZA(),e.TgZ(3,"alg-switch",27),e.NdJ("change",function(){const a=e.CHM(o).$implicit,s=e.oxw(3);return e.KtG(s.handleColumnChanges(a))}),e.qZA()()}if(2&n){const o=r.$implicit,t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,mn,t.selected[o.field])),e.xp6(1),e.hij(" ",o.header," "),e.xp6(1),e.Q6J("checked",!!t.selected[o.field])}}function Cn(n,r){if(1&n&&(e.TgZ(0,"div",24)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,hn,4,5,"li",25),e.qZA()()),2&n){const o=r.$implicit;e.xp6(2),e.Oqu(o.name),e.xp6(2),e.Q6J("ngForOf",o.columns)}}function On(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.showColumns())}),e.TgZ(2,"span",20),e._UZ(3,"i",21),e.qZA(),e.TgZ(4,"span"),e.SDv(5,22),e.qZA()(),e.YNc(6,Cn,5,2,"div",23),e.qZA()}if(2&n){const o=e.oxw();e.xp6(6),e.Q6J("ngForOf",o.groupInfo)}}function En(n,r){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.Oqu(o.toShow)}}function Sn(n,r){1&n&&e._UZ(0,"i",34)}function Mn(n,r){1&n&&e._UZ(0,"i",35)}function Pn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.showAll())}),e.YNc(1,En,2,1,"span",29),e.TgZ(2,"span",30),e.YNc(3,Sn,1,0,"i",31),e.YNc(4,Mn,1,0,"i",32),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.toShow>0),e.xp6(2),e.Q6J("ngIf",!o.expand),e.xp6(1),e.Q6J("ngIf",o.expand)}}function Tn(n){return n.table}let be=(()=>{class n{constructor(){this.columns=[],this.groupInfo=[],this.sortMode="multiple",this.multiSortMeta=[],this.customSort=!0,this.scrollWhenExpanded=!1,this.scrollable=!1,this.showGear=!0,this.loading=!1,this.tableStyle="",this.expandWholeWidth=new e.vpe,this.sort=new e.vpe,this.selectionChange=new e.vpe,this.showColumnSelection=!1,this.selected={},this.toShow=0,this.expand=!1}onSelectionChange(o){this.selection=o,this.selectionChange.emit(this.selection??[])}onRowSelect(){this.selectionChange.emit(this.selection??[])}onRowUnselect(){this.selectionChange.emit(this.selection??[])}detectSelected(){const o=this.selectedColumns??[];for(const t of this.columns)this.selected[t.field]=!1;for(const t of o)this.selected[t.field]=!0;this.toShow=this.columns.length-o.length}ngOnChanges(o){this.showGear&&this.detectSelected()}showColumns(){this.showColumnSelection=!this.showColumnSelection}showAll(){if(this.selectedColumns=this.columns,this.toShow=0,this.expand=!this.expand,!this.expand){const o=[];for(const t of this.columns)this.selected[t.field]&&o.push(t),this.selected[t.field]=!0;this.selectedColumns=o,this.toShow=this.columns.length-this.selectedColumns.length}for(const o of this.columns)this.selected[o.field]=!0;this.expandWholeWidth.emit(this.expand)}handleColumnChanges(o){this.selected[o.field]=!this.selected[o.field];const t=[];for(const i of this.columns)!0===this.selected[i.field]&&t.push(i);this.selectedColumns=t,this.toShow=this.columns.length-this.selectedColumns.length}sortFunction(o){this.sort.emit(o)}onHeaderCheckbox(){this.selectionChange.emit(this.selection)}reset(){this.table?.clear()}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-grid"]],contentQueries:function(o,t,i){if(1&o&&(e.Suo(i,Zo,5),e.Suo(i,Jo,5),e.Suo(i,Bo,5),e.Suo(i,Yo,5),e.Suo(i,Qo,5),e.Suo(i,qo,5),e.Suo(i,zo,5),e.Suo(i,Xo,5)),2&o){let a;e.iGM(a=e.CRH())&&(t.headerTemplate=a.first),e.iGM(a=e.CRH())&&(t.bodyTemplate=a.first),e.iGM(a=e.CRH())&&(t.footerTemplate=a.first),e.iGM(a=e.CRH())&&(t.summaryTemplate=a.first),e.iGM(a=e.CRH())&&(t.rowExpansionTemplate=a.first),e.iGM(a=e.CRH())&&(t.frozenHeaderTemplate=a.first),e.iGM(a=e.CRH())&&(t.frozenBodyTemplate=a.first),e.iGM(a=e.CRH())&&(t.emptymessageTemplate=a.first)}},viewQuery:function(o,t){if(1&o&&e.Gf(Vo,7),2&o){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},inputs:{selection:"selection",data:"data",selectedColumns:"selectedColumns",columns:"columns",groupInfo:"groupInfo",sortMode:"sortMode",multiSortMeta:"multiSortMeta",customSort:"customSort",scrollWhenExpanded:"scrollWhenExpanded",scrollable:"scrollable",selectionMode:"selectionMode",dataKey:"dataKey",frozenWidth:"frozenWidth",showGear:"showGear",loading:"loading",tableStyle:"tableStyle"},outputs:{expandWholeWidth:"expandWholeWidth",sort:"sort",selectionChange:"selectionChange"},features:[e._Bn([ko.p,E.wm,{provide:E.iA,useFactory:Tn,deps:[n]}]),e.TTD],decls:13,vars:23,consts:function(){let r;return r="Customize",[[1,"alg-table","--grid",3,"ngClass","columns","value","scrollable","selectionMode","selection","dataKey","frozenWidth","sortMode","multiSortMeta","customSort","loading","selectionChange","sortFunction","onRowSelect","onRowUnselect","onHeaderCheckboxToggle"],["table",""],[4,"ngIf"],["class","toggle-gear",3,"click",4,"ngIf"],["class","select-column",4,"ngIf"],["class","show-all",3,"click",4,"ngIf"],["pTemplate","frozenheader"],[3,"ngTemplateOutlet"],["pTemplate","frozenbody"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","rowexpansion"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"toggle-gear",3,"click"],[1,"fa","fa-cog"],[1,"select-column"],[1,"header",3,"click"],[1,"fold-icon"],[1,"fa","fa-caret-up"],r,["class","column-group",4,"ngFor","ngForOf"],[1,"column-group"],[4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"checked","change"],[1,"show-all",3,"click"],["class","missing-title",4,"ngIf"],[1,"show-icon"],["class","fa fa-caret-right",4,"ngIf"],["class","fa fa-caret-left",4,"ngIf"],[1,"missing-title"],[1,"fa","fa-caret-right"],[1,"fa","fa-caret-left"]]},template:function(o,t){1&o&&(e.TgZ(0,"p-table",0,1),e.NdJ("selectionChange",function(a){return t.onSelectionChange(a)})("sortFunction",function(a){return t.sortFunction(a)})("onRowSelect",function(){return t.onRowSelect()})("onRowUnselect",function(){return t.onRowUnselect()})("onHeaderCheckboxToggle",function(){return t.onHeaderCheckbox()}),e.YNc(2,Ho,1,0,null,2),e.YNc(3,Ko,1,0,null,2),e.YNc(4,on,1,0,null,2),e.YNc(5,rn,1,0,null,2),e.YNc(6,sn,1,0,null,2),e.YNc(7,ln,1,0,null,2),e.YNc(8,pn,1,0,null,2),e.YNc(9,un,1,0,null,2),e.qZA(),e.YNc(10,fn,2,0,"span",3),e.YNc(11,On,7,1,"div",4),e.YNc(12,Pn,5,3,"div",5)),2&o&&(e.Q6J("ngClass",t.tableStyle)("columns",t.selectedColumns)("value",t.data)("scrollable",t.scrollWhenExpanded||t.scrollable)("selectionMode",t.selectionMode)("selection",t.selection)("dataKey",t.dataKey)("frozenWidth",t.frozenWidth)("sortMode",t.sortMode)("multiSortMeta",t.multiSortMeta)("customSort",!0)("loading",t.loading),e.xp6(2),e.Q6J("ngIf",t.frozenHeaderTemplate&&t.frozenWidth&&t.frozenWidth.length>0),e.xp6(1),e.Q6J("ngIf",t.frozenBodyTemplate&&t.frozenWidth&&t.frozenWidth.length>0),e.xp6(1),e.Q6J("ngIf",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",t.bodyTemplate),e.xp6(1),e.Q6J("ngIf",t.footerTemplate),e.xp6(1),e.Q6J("ngIf",t.rowExpansionTemplate),e.xp6(1),e.Q6J("ngIf",t.summaryTemplate),e.xp6(1),e.Q6J("ngIf",t.emptymessageTemplate),e.xp6(1),e.Q6J("ngIf",!t.showColumnSelection&&t.showGear),e.xp6(1),e.Q6J("ngIf",t.showColumnSelection&&t.showGear),e.xp6(1),e.Q6J("ngIf",t.showGear&&(t.toShow>0||t.expand)))},dependencies:[g.mk,g.sg,g.O5,g.tP,E.iA,U.jx,Fo.q],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}[_nghost-%COMP%]{position:relative;display:block}.toggle-gear[_ngcontent-%COMP%]{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;width:3rem;height:3rem;color:#fff;background-color:#464646;background-color:var(--dark-black-color);border-radius:.5rem 1.5rem 1.5rem .5rem}.select-column[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:18.3333rem;background-color:#4a4a4a;color:#fff;border-radius:.5rem}.select-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:2.5rem;display:flex;align-items:center;border-bottom:.1rem solid #424242;cursor:pointer}.select-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}.select-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{padding-left:1rem;font-weight:700}.select-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span.fold-icon[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:2rem}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]{border-bottom:.1rem solid #EBEBEB;border-bottom:.1rem solid var(--light-border-color)}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:uppercase;padding:0 2rem;color:#9b9b9b;font-weight:700}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:column;padding:0 2rem}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;margin-bottom:.4167rem;cursor:pointer}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;color:#9b9b9b}.select-column[_ngcontent-%COMP%]   .column-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span.checked[_ngcontent-%COMP%]{color:#fff}.show-all[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:4.5833rem;height:3rem;color:#fff;background-color:#464646;background-color:var(--dark-black-color);display:flex;align-items:center;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;cursor:pointer}.show-all[_ngcontent-%COMP%]   .missing-title[_ngcontent-%COMP%]{margin-left:.4167rem;font-size:1.2rem;margin-right:.4167rem}.show-all[_ngcontent-%COMP%]   .show-icon[_ngcontent-%COMP%]{display:flex;font-size:1.6667rem;margin-left:.4167rem;align-items:center}"]}),n})();var ie=_(5498),$=_(7551),z=_(5659);const vn=["sectionHeaderTemplate"],Nn=function(n){return{$implicit:n}};function Gn(n,r){if(1&n&&e.GkF(0,6),2&n){const o=e.oxw(2);e.Q6J("ngTemplateOutlet",o.sectionHeaderTemplate)("ngTemplateOutletContext",e.VKq(2,Nn,o.state))}}function Rn(n,r){1&n&&e.YNc(0,Gn,1,4,"ng-template",null,5,e.W1O)}function bn(n,r){1&n&&e._UZ(0,"alg-error",7)}const An=function(){return["at","group.name"]},Un=function(n){return{"small-column":n}};function In(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"th",16)(2,"div",17),e._uU(3),e._UZ(4,"p-sortIcon",18),e.qZA()(),e.BQk()),2&n){const o=r.$implicit;e.xp6(1),e.Q6J("pSortableColumn",o.field)("ngClass",e.VKq(5,Un,e.DdM(4,An).includes(o.field))),e.xp6(2),e.hij(" ",o.header," "),e.xp6(1),e.Q6J("field",o.field)}}function yn(n,r){if(1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.YNc(2,In,5,7,"ng-container",15),e.qZA()),2&n){const o=r.$implicit;e.xp6(2),e.Q6J("ngForOf",o)}}function xn(n,r){if(1&n&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",o.group.name," ")}}function Ln(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.at,"d/MM/y")," ")}}function $n(n,r){if(1&n&&(e.TgZ(0,"span",31)(1,"em")(2,"span"),e.SDv(3,32),e.qZA(),e._uU(4),e.qZA()()),2&n){const o=e.oxw(3).$implicit;e.xp6(4),e.Oqu(o.user.grade)}}function Dn(n,r){if(1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"span",29),e._uU(3),e.ALo(4,"userCaption"),e.qZA(),e.YNc(5,$n,5,1,"span",30),e.qZA()()),2&n){const o=e.oxw(2).$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,2,o.user)," "),e.xp6(2),e.Q6J("ngIf",o.user.grade)}}function wn(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",o.group.type," ")}}function kn(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[o.field]," ")}}function Fn(n,r){if(1&n&&(e.TgZ(0,"td"),e.ynx(1,21),e.YNc(2,xn,2,1,"span",22),e.YNc(3,Ln,3,4,"ng-container",23),e.YNc(4,Dn,6,4,"div",24),e.YNc(5,wn,2,1,"ng-container",23),e.YNc(6,kn,2,1,"ng-container",25),e.BQk(),e.qZA()),2&n){const o=r.$implicit;e.xp6(1),e.Q6J("ngSwitch",o.field),e.xp6(1),e.Q6J("ngSwitchCase","group.name"),e.xp6(1),e.Q6J("ngSwitchCase","at"),e.xp6(1),e.Q6J("ngSwitchCase","user.login"),e.xp6(1),e.Q6J("ngSwitchCase","group.type")}}function Zn(n,r){if(1&n&&(e.TgZ(0,"tr",19)(1,"td"),e._UZ(2,"p-tableCheckbox",20),e.qZA(),e.YNc(3,Fn,7,5,"td",15),e.qZA()),2&n){const o=r.$implicit,t=r.columns,i=r.rowIndex;e.Q6J("pSelectableRow",o)("pSelectableRowIndex",i),e.xp6(2),e.Q6J("value",o),e.xp6(1),e.Q6J("ngForOf",t)}}const Ae=function(n){return{disabled:n}};function Jn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",33),e._UZ(1,"p-tableHeaderCheckbox"),e.TgZ(2,"span",34),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onSelectAll())}),e.SDv(3,35),e.qZA(),e._UZ(4,"span",36),e.TgZ(5,"div",37)(6,"span",38),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onAccept())}),e.TgZ(7,"span"),e.SDv(8,39),e.qZA()(),e.TgZ(9,"span",38),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onReject())}),e.TgZ(10,"span"),e.SDv(11,40),e.qZA()()()()}if(2&n){const o=e.oxw(3);e.xp6(6),e.Q6J("ngClass",e.VKq(2,Ae,0===o.selection.length||"ready"!==o.state)),e.xp6(3),e.Q6J("ngClass",e.VKq(4,Ae,0===o.selection.length||"ready"!==o.state))}}function Bn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-grid",12),e.NdJ("selectionChange",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.selection=i)})("sort",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.onCustomSort(i))}),e.YNc(1,yn,3,1,"ng-template",null,5,e.W1O),e.YNc(3,Zn,4,4,"ng-template",null,13,e.W1O),e.YNc(5,Jn,12,6,"ng-template",null,14,e.W1O),e.qZA()}if(2&n){const o=e.oxw(2);e.Q6J("selectedColumns",o.columns)("columns",o.columns)("data",o.requests)("groupInfo",o.panel)("selection",o.selection)("loading","ready"!==o.state)}}function Yn(n,r){1&n&&(e.TgZ(0,"p",41),e.SDv(1,42),e.qZA())}function Qn(n,r){if(1&n&&(e.TgZ(0,"div",8,9),e.YNc(2,Bn,7,6,"alg-grid",10),e.YNc(3,Yn,2,0,"p",11),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.requests.length>0),e.xp6(1),e.Q6J("ngIf",0===o.requests.length)}}function qn(n,r){1&n&&e._UZ(0,"alg-loading")}let Ue=(()=>{class n{constructor(){this.columns=[],this.requests=[],this.state="fetching",this.label="",this.sort=new e.vpe,this.processRequests=new e.vpe,this.selection=[],this.panel=[],this.collapsed=!0}ngOnInit(){this.panel.push({columns:this.columns})}ngOnChanges(o){this.collapsed=0===this.requests.length}onAccept(){this.onAcceptOrReject(k.Accept)}onReject(){this.onAcceptOrReject(k.Reject)}onAcceptOrReject(o){0===this.selection.length||"ready"!==this.state||(this.processRequests.emit({data:this.selection,type:o}),this.selection=[])}onSelectAll(){this.selection=this.selection.length===this.requests.length?[]:this.requests}onCustomSort(o){const t=o.multiSortMeta?.map(i=>-1===i.order?`-${i.field}`:i.field);t&&this.sort.emit(t)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-pending-request"]],contentQueries:function(o,t,i){if(1&o&&e.Suo(i,vn,5),2&o){let a;e.iGM(a=e.CRH())&&(t.sectionHeaderTemplate=a.first)}},inputs:{columns:"columns",requests:"requests",state:"state",label:"label"},outputs:{sort:"sort",processRequests:"processRequests"},features:[e.TTD],decls:7,vars:6,consts:function(){let r,o,t,i,a,s;return r="Error while loading the pending requests.",o="Grade: ",t=" Select all ",i="Accept",a="Reject",s=" No pending requests ",[["icon","fa fa-check",3,"label","collapsible","collapsed"],[4,"ngIf"],["class","dark","icon","fa fa-exclamation-triangle","message",r,4,"ngIf","ngIfElse"],["noFetchingError",""],["loading",""],["headerTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["icon","fa fa-exclamation-triangle","message",r,1,"dark"],[1,"pending-request-container"],["noError",""],["tableStyle","--pending-request",3,"selectedColumns","columns","data","groupInfo","selection","loading","selectionChange","sort",4,"ngIf"],["class","no-pending-requests",4,"ngIf"],["tableStyle","--pending-request",3,"selectedColumns","columns","data","groupInfo","selection","loading","selectionChange","sort"],["bodyTemplate",""],["summaryTemplate",""],[4,"ngFor","ngForOf"],[3,"pSortableColumn","ngClass"],[1,"header-container"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"value"],[3,"ngSwitch"],["class","group-name",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","grid-user-info-field",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"group-name"],[1,"grid-user-info-field"],[1,"user-info"],[1,"user-info-name"],["class","user-info-activity",4,"ngIf"],[1,"user-info-activity"],o,[1,"summary"],[1,"select-all",3,"click"],t,[1,"filler"],[1,"summary-actions"],[3,"ngClass","click"],i,a,[1,"no-pending-requests"],s]},template:function(o,t){if(1&o&&(e.TgZ(0,"alg-section-paragraph",0),e.YNc(1,Rn,2,0,null,1),e.YNc(2,bn,1,0,"alg-error",2),e.YNc(3,Qn,4,2,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(5,qn,1,0,"ng-template",null,4,e.W1O)),2&o){const i=e.MAs(4);e.Q6J("label",t.label)("collapsible",!0)("collapsed",t.collapsed),e.xp6(1),e.Q6J("ngIf",t.sectionHeaderTemplate),e.xp6(1),e.Q6J("ngIf","fetchingError"===t.state)("ngIfElse",i)}},dependencies:[g.mk,g.sg,g.O5,g.tP,g.RF,g.n9,g.ED,be,ie.s,E.lQ,E.Ei,E.fz,E.UA,E.Mo,I.q,$.N,g.uU,z.u],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.group-switch[_ngcontent-%COMP%]{flex:1;flex-direction:row-reverse;display:flex}.group-switch[_ngcontent-%COMP%]   alg-selection[_ngcontent-%COMP%]{width:25rem}.pending-request-container[_ngcontent-%COMP%]{margin-left:-4rem;margin-right:-1.6667rem}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:.2rem}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:7rem;height:auto;margin-right:2rem}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.2rem;color:inherit}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]   .user-info-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]   .user-info-activity[_ngcontent-%COMP%]{font-style:italic}.pending-request-container[_ngcontent-%COMP%]   .grid-user-info-field[_ngcontent-%COMP%]   .user-info-content[_ngcontent-%COMP%]{white-space:normal;margin-top:1.2rem;line-height:1.5rem}.pending-request-container[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{color:#bbb;cursor:not-allowed!important}.all-disabled[_ngcontent-%COMP%]{opacity:70%;pointer-events:none}.all-disabled[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:70%;pointer-events:none}.grid-user-info-field[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:#fff}.small-column[_ngcontent-%COMP%]{width:13.3333rem}.group-name[_ngcontent-%COMP%]{white-space:initial}.no-pending-requests[_ngcontent-%COMP%]{text-align:center;font-size:medium;font-style:italic}"]}),n})();function zn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",3)(1,"alg-selection",4),e.NdJ("change",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.onSubgroupSwitch(i))}),e.qZA()()}if(2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("items",o.subgroupSwitchItems)}}function Xn(n,r){if(1&n&&e.YNc(0,zn,2,1,"div",2),2&n){const o=e.oxw();e.Q6J("ngIf",o.showSwitch)}}const pe={field:"group.name",header:"GROUP"};let Ie=(()=>{class n{constructor(o,t,i){this.getRequestsService=o,this.requestActionService=t,this.actionFeedbackService=i,this.showSwitch=!0,this.requests=[],this.columns=[{field:"user.login",header:"USER"},{field:"at",header:"REQUESTED ON"}],this.subgroupSwitchItems=[{label:"This group only",value:!1},{label:"All subgroups",value:!0}],this.includeSubgroup=!1,this.state="fetching",this.currentSort=[],this.dataFetching=new y.x,this.dataFetching.pipe((0,v.w)(a=>(0,ne.T)((0,P.of)((0,te.ui)()),this.getRequestsService.getGroupPendingRequests(a.groupId,a.includeSubgroup,a.sort).pipe((0,p.U)(te.z8))))).subscribe({next:a=>{this.state=a.tag,a.isReady&&(this.requests=a.data)},error:a=>{this.state="fetchingError"}})}ngOnChanges(o){this.showSwitch||(this.columns=[pe].concat(this.columns)),this.dataFetching.next({groupId:this.groupId,includeSubgroup:this.includeSubgroup,sort:this.currentSort})}ngOnDestroy(){this.dataFetching.complete()}onProcessRequests(o){this.state="processing";const t=new Map;o.data.forEach(i=>{const a=i.group.id;if(!i.user)throw new Error("Unexpected: Missed user ID");const s=i.user.id,c=t.get(a);t.set(a,c?c.concat([s]):[s])}),this.requestActionService.processJoinRequests(t,o.type).subscribe({next:i=>{this.state="ready",Ge(this.actionFeedbackService,function xo(n){const r={countRequests:0,countSuccess:0};return n.forEach(o=>{r.countRequests+=o.size,r.countSuccess+=Array.from(o.values()).map(t=>["success","unchanged"].includes(t)?1:0).reduce((t,i)=>t+i,0)}),r}(i),o.type),this.dataFetching.next({groupId:this.groupId,includeSubgroup:this.includeSubgroup,sort:this.currentSort})},error:i=>{if(this.state="ready",this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}})}onSubgroupSwitch(o){this.includeSubgroup=(0,re.I)(this.subgroupSwitchItems[o]).value,this.columns=this.columns.filter(t=>t!==pe),this.includeSubgroup&&(this.columns=[pe].concat(this.columns)),this.dataFetching.next({groupId:this.groupId,includeSubgroup:this.includeSubgroup,sort:this.currentSort})}onFetch(o){JSON.stringify(o)!==JSON.stringify(this.currentSort)&&(this.currentSort=o,this.dataFetching.next({groupId:this.groupId,includeSubgroup:this.includeSubgroup,sort:this.currentSort}))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Re),e.Y36(Ne),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-pending-join-requests"]],inputs:{groupId:"groupId",showSwitch:"showSwitch"},features:[e.TTD],decls:3,vars:3,consts:function(){let r;return r="Pending requests",[["label",r,3,"state","columns","requests","sort","processRequests"],["sectionHeaderTemplate",""],["class","group-switch",4,"ngIf"],[1,"group-switch"],[3,"items","change"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-pending-request",0),e.NdJ("sort",function(a){return t.onFetch(a)})("processRequests",function(a){return t.onProcessRequests(a)}),e.YNc(1,Xn,1,1,"ng-template",null,1,e.W1O),e.qZA()),2&o&&e.Q6J("state",t.state)("columns",t.columns)("requests",t.requests)},dependencies:[g.O5,le.p,Ue]}),n})(),Vn=(()=>{class n{constructor(o,t,i){this.getRequestsService=o,this.requestActionService=t,this.actionFeedbackService=i,this.requests=[],this.columns=[{field:"group.name",header:"TITLE"},{field:"group.type",header:"TYPE"},{field:"at",header:"REQUESTED ON"}],this.state="fetching",this.currentSort=[],this.dataFetching=new y.x,this.dataFetching.pipe((0,v.w)(a=>(0,ne.T)((0,P.of)((0,te.ui)()),this.getRequestsService.getGroupInvitations(a.sort).pipe((0,p.U)(te.z8))))).subscribe({next:a=>{this.state=a.tag,a.isReady&&(this.requests=a.data)},error:a=>{this.state="fetchingError"}})}ngOnInit(){this.dataFetching.next({sort:this.currentSort})}ngOnDestroy(){this.dataFetching.complete()}onProcessRequests(o){this.state="processing",this.requestActionService.processGroupInvitations(o.data.map(t=>t.group.id),o.type).subscribe({next:t=>{this.state="ready",Ge(this.actionFeedbackService,function Lo(n){return{countRequests:n.length,countSuccess:n.filter(r=>r.changed).length}}(t),o.type),this.dataFetching.next({sort:this.currentSort})},error:t=>{if(this.state="ready",this.actionFeedbackService.unexpectedError(),!(t instanceof f.UA))throw t}})}onFetch(o){JSON.stringify(o)!==JSON.stringify(this.currentSort)&&(this.currentSort=o,this.dataFetching.next({sort:this.currentSort}))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Re),e.Y36(Ne),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-user-group-invitations"]],decls:1,vars:3,consts:function(){let r;return r="Pending invitations",[["label",r,3,"state","columns","requests","sort","processRequests"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-pending-request",0),e.NdJ("sort",function(a){return t.onFetch(a)})("processRequests",function(a){return t.onProcessRequests(a)}),e.qZA()),2&o&&e.Q6J("state",t.state)("columns",t.columns)("requests",t.requests)},dependencies:[Ue]}),n})();var Wn=_(9829);function Hn(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",2),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.fetchData())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function jn(n,r){1&n&&(e.TgZ(0,"tr")(1,"th"),e.SDv(2,9),e.qZA(),e.TgZ(3,"th",10),e.SDv(4,11),e.qZA(),e.TgZ(5,"th"),e.SDv(6,12),e.qZA(),e.TgZ(7,"th",10),e.SDv(8,13),e.qZA(),e.TgZ(9,"th",10),e.SDv(10,14),e.qZA()())}function Kn(n,r){if(1&n&&e.YNc(0,jn,11,0,"tr",8),2&n){const o=e.oxw(2);e.Q6J("ngIf",o.data.length>0)}}function et(n,r){1&n&&e._UZ(0,"i",19)}function ot(n,r){1&n&&e._UZ(0,"i",20)}function nt(n,r){1&n&&e._UZ(0,"i",19)}function tt(n,r){1&n&&e._UZ(0,"i",20)}const ye=function(n,r){return{locked:n,unlocked:r}};function rt(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"a",15),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"span",16),e.YNc(10,et,1,0,"i",17),e.YNc(11,ot,1,0,"i",18),e.qZA()(),e.TgZ(12,"td")(13,"span",16),e.YNc(14,nt,1,0,"i",17),e.YNc(15,tt,1,0,"i",18),e.qZA()()()),2&n){const o=r.$implicit,t=e.oxw(2);e.xp6(2),e.MGl("routerLink","../by-id/",o.id,"/details"),e.xp6(1),e.Oqu(o.name),e.xp6(2),e.Oqu(t.getType(o.type)),e.xp6(2),e.Oqu(t.getCanManage(o.canManage)),e.xp6(2),e.Q6J("ngClass",e.WLB(10,ye,o.canWatchMembers,!o.canWatchMembers)),e.xp6(1),e.Q6J("ngIf",!o.canWatchMembers),e.xp6(1),e.Q6J("ngIf",o.canWatchMembers),e.xp6(2),e.Q6J("ngClass",e.WLB(13,ye,o.canGrantGroupAccess,!o.canGrantGroupAccess)),e.xp6(1),e.Q6J("ngIf",!o.canGrantGroupAccess),e.xp6(1),e.Q6J("ngIf",o.canGrantGroupAccess)}}function it(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"p",21),e.SDv(3,22),e.qZA()()()),2&n){const o=r.$implicit;e.xp6(1),e.uIk("colspan",null==o?null:o.length)}}function at(n,r){if(1&n&&(e.TgZ(0,"p-table",3,4),e.YNc(2,Kn,1,1,"ng-template",5),e.YNc(3,rt,16,16,"ng-template",6),e.YNc(4,it,4,1,"ng-template",7),e.qZA()),2&n){const o=e.oxw();e.Q6J("value",o.data)("customSort",!0)("loading","fetching"===o.state)}}let st=(()=>{class n{constructor(o){this.managedGroupService=o,this.state="fetching",this.currentSort=[],this.data=[]}ngOnInit(){this.fetchData()}fetchData(){this.state="fetching",this.managedGroupService.getManagedGroups().subscribe({next:o=>{this.state="ready",this.data=o},error:o=>this.state="error"})}getType(o){switch(o){case"Class":return "Class";case"Base":return "Base";case"Club":return "Club";case"Friends":return "Friends";case"Session":return "Session";case"Team":return "Team";default:return "Other"}}getCanManage(o){switch(o){case"memberships":return "Memberships";case"memberships_and_group":return "Memberships & Group";default:return "None"}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Wn.t))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-managed-group-list"]],decls:3,vars:2,consts:function(){let r,o,t,i,a,s,c;return r="Error while loading the group you manage",o="Name",t="Type",i="Can Manage",a="Can Watch Members",s="Can Grant Group Access",c="You do not manage any group",[["class","dark","icon","fa fa-exclamation-triangle","message",r,3,"showRefreshButton","refresh",4,"ngIf","ngIfElse"],["noError",""],["icon","fa fa-exclamation-triangle","message",r,1,"dark",3,"showRefreshButton","refresh"],["sortMode","multiple",1,"alg-table","--managed-group-list",3,"value","customSort","loading"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],o,[1,"small"],t,i,a,s,[1,"alg-link",3,"routerLink"],[1,"table-icon",3,"ngClass"],["class","fa fa-times",4,"ngIf"],["class","fa fa-check",4,"ngIf"],[1,"fa","fa-times"],[1,"fa","fa-check"],[1,"empty-message"],c]},template:function(o,t){if(1&o&&(e.YNc(0,Hn,1,1,"alg-error",0),e.YNc(1,at,5,3,"ng-template",null,1,e.W1O)),2&o){const i=e.MAs(2);e.Q6J("ngIf","error"===t.state)("ngIfElse",i)}},dependencies:[g.mk,g.O5,S.yS,U.jx,E.iA,I.q],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}[_nghost-%COMP%]{position:relative;display:block}.small[_ngcontent-%COMP%]{width:10rem}.table-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.table-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.table-icon.edit[_ngcontent-%COMP%]{color:#4a90e2;color:var(--base-color)}.table-icon.locked[_ngcontent-%COMP%]{color:#9acc68}.table-icon.unlocked[_ngcontent-%COMP%]{color:#ff001f;color:var(--notify-error-color)}"]}),n})();var N=_(7942);let xe=(()=>{class n{constructor(o){this.http=o}create(o,t){return this.http.post(`${C.e.apiUrl}/groups`,{name:o,type:t},{}).pipe((0,p.U)(A.Te),(0,p.U)(a=>a.id))}addSubgroup(o,t){return this.http.post(`${C.e.apiUrl}/groups/${o}/relations/${t}`,null,{}).pipe((0,p.U)(A.IZ))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ae=_(1408),de=_(3691);let _t=(()=>{class n{constructor(o,t,i){this.groupCreationService=o,this.actionFeedbackService=t,this.groupRouter=i,this.allowedNewGroupTypes=[{type:"Class",icon:"fa fa-book",title:"Class",description:""},{type:"Club",icon:"fa fa-book",title:"Club",description:""},{type:"Friends",icon:"fa fa-users",title:"Friends",description:""},{type:"Other",icon:"fa fa-book",title:"Other",description:""}],this.state="ready"}addChild(o){this.state="addingGroup",this.groupCreationService.create(o.title,o.type).subscribe({next:t=>{this.state="ready",this.actionFeedbackService.success("Group successfully created"),this.groupRouter.navigateTo((0,N.cw)({...o,id:t}))},error:t=>{if(this.state="ready",this.actionFeedbackService.unexpectedError(),!(t instanceof f.UA))throw t}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(xe),e.Y36(G.C),e.Y36(ae.u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-add-group"]],decls:2,vars:3,consts:function(){let r,o;return r="Create a new group",o="Enter a title to create a new group",[["icon","fa fa-sign-in-alt","label",r],["inputCreatePlaceholder",o,3,"allowedTypesForNewContent","loading","showSearchUI","contentAdded"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-section",0)(1,"alg-add-content",1),e.NdJ("contentAdded",function(a){return t.addChild(a)}),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowedTypesForNewContent",t.allowedNewGroupTypes)("loading","addingGroup"===t.state)("showSearchUI",!1))},dependencies:[L.e,de.R]}),n})();const ct=["joinedGroupList"];function lt(n,r){1&n&&(e.TgZ(0,"div",8)(1,"span",9),e.SDv(2,10),e.qZA(),e.TgZ(3,"span",11),e.SDv(4,12),e.qZA()())}let gt=(()=>{class n{constructor(o,t){this.currentContent=o,this.layoutService=t,this.fullFrame$=this.layoutService.fullFrame$,this.layoutService.configure({fullFrameActive:!1}),this.currentContent.replace((0,j.EB)({title:"My groups",breadcrumbs:{category:"My groups",path:[],currentPageIdx:-1}}))}ngOnDestroy(){this.currentContent.clear()}onGroupJoined(){this.joinedGroupList?.refresh(),this.currentContent.forceNavMenuReload()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Q.u),e.Y36(K.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-my-groups"]],viewQuery:function(o,t){if(1&o&&e.Gf(ct,5),2&o){let i;e.iGM(i=e.CRH())&&(t.joinedGroupList=i.first)}},decls:13,vars:4,consts:function(){let r,o,t,i,a;return r="The groups you joined",o="Join a group by code",t="Join",i="My groups",a="All the groups you have joined and you manage",[["class","alg-page-header my-groups",4,"ngIf"],[3,"showSwitch"],[1,"bg-white"],["label",r,"icon","fa fa-users"],["joinedGroupList",""],["sectionStyleClass","no-rounded-borders","sectionLabel",o,"buttonLabel",t,3,"groupJoined"],["label","The groups you manage","icon","fa fa-users"],[1,"bg-section"],[1,"alg-page-header","my-groups"],[1,"alg-page-header-title"],i,[1,"alg-page-header-subtitle"],a]},template:function(o,t){if(1&o&&(e.YNc(0,lt,5,0,"div",0),e.ALo(1,"async"),e._UZ(2,"alg-user-group-invitations")(3,"alg-pending-join-requests",1),e.TgZ(4,"div",2)(5,"alg-section",3),e._UZ(6,"alg-joined-group-list",null,4),e.qZA(),e.TgZ(8,"alg-access-code-view",5),e.NdJ("groupJoined",function(){return t.onGroupJoined()}),e.qZA(),e.TgZ(9,"alg-section",6),e._UZ(10,"alg-managed-group-list"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"alg-add-group"),e.qZA()),2&o){let i;e.Q6J("ngIf",!(null!=(i=e.lcZ(1,2,t.fullFrame$))&&i.active)),e.xp6(3),e.Q6J("showSwitch",!1)}},dependencies:[g.O5,L.e,co.P,yo,Ie,Vn,st,_t,g.Ov]}),n})();var se=_(4925),Le=_(9196),pt=_(3347);const dt=l.n_({id:l.Z_,name:l.Z_,type:l.i0("Class","Team","Club","Friends","Other","User","Session","Base")});let $e=(()=>{class n{constructor(o){this.http=o}getBreadcrumbs(o){const t=[...o.path,o.id];return this.http.get(`${C.e.apiUrl}/groups/${t.join("/")}/breadcrumbs`).pipe((0,w.m)(l.IX(dt)),(0,p.U)(i=>i.map((a,s)=>({...a,route:(0,N.p6)(a,i.slice(0,s).map(({id:c})=>c))}))))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X=(()=>{class n{constructor(o,t){this.getGroupByIdService=o,this.getGroupBreadcrumbsService=t,this.fetchOperation=new J.t(1),this.refresh$=new y.x,this.state$=this.fetchOperation.pipe((0,v.w)(i=>(0,B.D)({group:this.getGroupByIdService.get(i.id),breadcrumbs:this.getGroupBreadcrumbsService.getBreadcrumbs(i)}).pipe((0,p.U)(({group:a,breadcrumbs:s})=>({route:i,group:a,breadcrumbs:s})),(0,R.iS)({resetter:this.refresh$}))),(0,Le.d)(1))}fetchGroup(o){this.fetchOperation.next(o)}refetchGroup(){this.refresh$.next()}ngOnDestroy(){this.refresh$.complete(),this.fetchOperation.complete()}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(pt.U),e.LFG($e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Z=_(9464),De=_(6562),ue=_(5003),ut=_(2852),we=_(2703),fe=_(6664),V=_(116),ft=_(2395),mt=_(7),ke=_(966);function ht(n,r){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"alg-loading",5),e.qZA())}function Ct(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",6),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function Ot(n,r){1&n&&(e.TgZ(0,"div"),e.SDv(1,7),e.qZA())}function Et(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"span",10),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"a",11),e.ALo(6,"rawItemLink"),e._uU(7),e.qZA()()()),2&n){const o=r.$implicit;e.xp6(3),e.Oqu(o.activity.type),e.xp6(2),e.Q6J("routerLink",e.lcZ(6,4,o.activity)),e.xp6(2),e.AsE(" ",o.activity.string.title," (",o.name,") ")}}function St(n,r){if(1&n&&(e.TgZ(0,"p-table",8),e.YNc(1,Et,8,6,"ng-template",9),e.qZA()),2&n){const o=e.oxw().ngIf;e.Q6J("value",o.data)}}function Mt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ht,2,0,"div",1),e.YNc(2,Ct,1,1,"alg-error",2),e.YNc(3,Ot,2,0,"div",0),e.YNc(4,St,2,1,"p-table",3),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady&&0===o.data.length),e.xp6(1),e.Q6J("ngIf",o.isReady&&o.data.length>0)}}let Pt=(()=>{class n{constructor(o,t){this.groupWatchingService=o,this.itemNavigationService=t,this.refresh$=new y.x,this.state$=this.groupWatchingService.watchedGroup$.pipe((0,V.h)(ft.K0),(0,v.w)(i=>this.itemNavigationService.getRootActivities(i.route.id).pipe((0,p.U)(a=>[...a.filter(s=>s.groupId===i.route.id),...a.filter(s=>s.groupId!==i.route.id)].slice(0,4)))),(0,R.iS)({resetter:this.refresh$}))}ngOnDestroy(){this.refresh$.complete()}refresh(){this.refresh$.next()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(ue.y),e.Y36(mt.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-suggestion-of-activities"]],decls:2,vars:3,consts:function(){let r,o;return r="Error while loading the activities",o=" There are no activities ",[[4,"ngIf"],["class","spinner-container",4,"ngIf"],["message",r,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["class","alg-table --overlay-panel",3,"value",4,"ngIf"],[1,"spinner-container"],["size","small"],["message",r,"refreshButtonType","refresh",3,"showRefreshButton","refresh"],o,[1,"alg-table","--overlay-panel",3,"value"],["pTemplate","body"],[1,"type"],[1,"alg-link","dots",3,"routerLink"]]},template:function(o,t){1&o&&(e.YNc(0,Mt,5,4,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,S.yS,U.jx,E.iA,I.q,$.N,g.Ov,ke.M],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.type[_ngcontent-%COMP%]{color:#4a90e2;color:var(--base-color)}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();const Tt=["op"],vt=function(n,r,o){return{parent:n,left:r,right:o}};function Nt(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-page-navigator",8),e.NdJ("parent",function(){e.CHM(o);const i=e.oxw().ngIf;return e.KtG(null==i||null==i.data||null==i.data.parent?null:i.data.parent.navigateTo())})("left",function(){e.CHM(o);const i=e.oxw().ngIf;return e.KtG(null==i||null==i.data||null==i.data.previous?null:i.data.previous.navigateTo())})("right",function(){e.CHM(o);const i=e.oxw().ngIf;return e.KtG(null==i||null==i.data||null==i.data.next?null:i.data.next.navigateTo())})("edit",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onEditButtonClicked())})("watch",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.onStartWatchButtonClicked(i))})("stopWatch",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onStopWatchButtonClicked())}),e.ALo(1,"async"),e.qZA()}if(2&n){const o=e.oxw().ngIf,t=e.oxw();e.Q6J("allowWatching",!!t.groupWithManagement.currentUserCanWatchMembers)("isWatched",!!e.lcZ(1,4,t.isCurrentGroupWatched$))("allowFullScreen",!1)("navigationMode",e.kEZ(6,vt,!(null==o||!o.isReady||null==o||null==o.data||!o.data.parent),!(null==o||!o.isReady||null==o||null==o.data||!o.data.previous),!(null==o||!o.isReady||null==o||null==o.data||!o.data.next)))}}function Gt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Nt,2,10,"alg-page-navigator",7),e.BQk()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",!!o.groupWithManagement)}}function Rt(n,r){1&n&&e._UZ(0,"alg-suggestion-of-activities")}const bt=function(){return{width:"450px"}};let At=(()=>{class n{constructor(o,t,i){this.modeService=o,this.groupWatchingService=t,this.groupNavTreeService=i,this.group$=new J.t(1),this.isCurrentGroupWatched$=(0,De.a)([this.groupWatchingService.watchedGroup$,this.group$]).pipe((0,p.U)(([a,s])=>!(!a||a.route.id!==s.id))),this.navigationNeighbors$=this.groupNavTreeService.navigationNeighbors$}ngOnChanges(){this.groupWithManagement=this.groupData?.group?(0,se.pL)(this.groupData.group):void 0,this.groupData&&this.group$.next(this.groupData.group)}ngOnDestroy(){this.group$.complete()}onEditButtonClicked(){this.modeService.modeActions$.next(Z.mw.StartEditing)}onStartWatchButtonClicked(o){if(!this.groupData?.group)throw new Error("unexpected group not set in 'onWatchButtonClicked'");this.groupWatchingService.startGroupWatching(this.groupData.route,this.groupData.group),this.openSuggestionOfActivitiesOverlayPanel(o)}onStopWatchButtonClicked(){this.op?.hide(),this.groupWatchingService.stopWatching()}openSuggestionOfActivitiesOverlayPanel(o){this.op?.show(o),setTimeout(()=>{this.op?.align()})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Z.dT),e.Y36(ue.y),e.Y36(ut.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-header"]],viewQuery:function(o,t){if(1&o&&e.Gf(Tt,5),2&o){let i;e.iGM(i=e.CRH())&&(t.op=i.first)}},inputs:{groupData:"groupData"},features:[e.TTD],decls:11,vars:8,consts:[[1,"group-header-container"],[1,"group-header","unfolded"],[1,"user-info"],[1,"user-name"],[4,"ngIf"],["appendTo","body"],["op",""],[3,"allowWatching","isWatched","allowFullScreen","navigationMode","parent","left","right","edit","watch","stopWatch",4,"ngIf"],[3,"allowWatching","isWatched","allowFullScreen","navigationMode","parent","left","right","edit","watch","stopWatch"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),e._uU(5),e.qZA()()(),e.YNc(6,Gt,2,1,"ng-container",4),e.ALo(7,"async"),e.qZA()(),e.TgZ(8,"p-overlayPanel",5,6),e.YNc(10,Rt,1,0,"alg-suggestion-of-activities",4),e.qZA()),2&o){const i=e.MAs(9);e.xp6(5),e.Oqu(null==t.groupData||null==t.groupData.group?null:t.groupData.group.name),e.xp6(1),e.Q6J("ngIf",e.lcZ(7,5,t.navigationNeighbors$)),e.xp6(2),e.Akn(e.DdM(7,bt)),e.xp6(2),e.Q6J("ngIf",i.overlayVisible)}},dependencies:[g.O5,we._,fe.T,Pt,g.Ov],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.group-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:1.6667rem;margin-bottom:2.5rem;background-color:#f1f2f7;background-color:var(--base-bk-color)}.group-header-container[_ngcontent-%COMP%]   .group-header.small[_ngcontent-%COMP%]{height:3.5833rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%], .group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:9rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-left:1.6667rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4a4a4a;font-size:2rem;line-height:2rem;margin-top:0;margin-right:2rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .two-columns[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .two-columns[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex-basis:50%;min-width:0}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .two-columns[_ngcontent-%COMP%] > span.assoc-skill[_ngcontent-%COMP%]   alg-score-ring[_ngcontent-%COMP%]{margin-left:1.6667rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;color:#787878;color:var(--base-text-color);font-size:1.2rem;line-height:2rem;height:2rem;padding-right:1rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:1rem;width:1rem}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:0;display:inline-block;min-width:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span.no-wrap[_ngcontent-%COMP%], .group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a.no-wrap[_ngcontent-%COMP%]{overflow:initial}.group-header-container[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .certificates[_ngcontent-%COMP%]{margin-right:2.0833rem}"]}),n})();var Ut=_(6317),It=_(1989),yt=_(8523),xt=_(6241),Lt=_(7233),_e=_(6257),$t=_(7579);const Dt=["op"],wt=["contentRef"];function kt(n,r){1&n&&e._UZ(0,"alg-loading",5)}function Ft(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,9),e.qZA())}function Zt(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,10),e.qZA())}function Jt(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",6),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.YNc(1,Ft,2,0,"span",7),e.YNc(2,Zt,2,0,"ng-template",null,8,e.W1O),e.qZA()}if(2&n){const o=e.MAs(3),t=e.oxw().ngIf;e.ekj("dark",403!==t.error.status),e.Q6J("icon",403!==t.error.status?"fa fa-exclamation-triangle":void 0)("showRefreshButton",403!==t.error.status),e.xp6(1),e.Q6J("ngIf",403===t.error.status)("ngIfElse",o)}}function Bt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"th")(2,"div",19),e._uU(3),e.qZA()(),e.BQk()),2&n){const o=r.$implicit;e.xp6(3),e.hij(" ",o.header," ")}}function Yt(n,r){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,Bt,4,1,"ng-container",18),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",o)}}function Qt(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr")(1,"th",15)(2,"div",16)(3,"p-button",17),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refresh())}),e.qZA()()()(),e.YNc(4,Yt,2,1,"tr",0)}if(2&n){const o=r.$implicit,t=r.$implicit;e.xp6(1),e.Q6J("colSpan",t.length),e.xp6(3),e.Q6J("ngIf",o.length>0)}}function qt(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"logActionDisplay"),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.activityType,o.score)," ")}}const zt=function(n){return{disabled:n}};function Xt(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"a",25,26),e.NdJ("mouseenter",function(i){e.CHM(o);const a=e.oxw(2),s=a.$implicit,c=a.rowIndex,u=e.oxw(3);return e.KtG(u.onMouseEnter(i,s.item.id,c))}),e.ALo(3,"rawItemLink"),e._uU(4),e.qZA(),e.BQk()}if(2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(5,zt,!o.item))("routerLink",e.lcZ(3,3,o.item)),e.xp6(3),e.hij(" ",o.item.string.title," ")}}function Vt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"a",27),e.ALo(2,"groupLink"),e._uU(3),e.ALo(4,"userCaption"),e.qZA(),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("routerLink",e.lcZ(2,2,o.user)),e.xp6(2),e.Oqu(e.lcZ(4,4,o.user))}}function Wt(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.at,"short")," ")}}function Ht(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[o.field]," ")}}function jt(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"td",21),e.NdJ("mouseleave",function(i){const s=e.CHM(o).$implicit,c=e.oxw(4);return e.KtG(c.onMouseLeave(i,s.field))}),e.ynx(1,22),e.YNc(2,qt,3,4,"ng-container",23),e.YNc(3,Xt,5,7,"ng-container",23),e.YNc(4,Vt,5,6,"ng-container",23),e.YNc(5,Wt,3,4,"ng-container",23),e.YNc(6,Ht,2,1,"ng-container",24),e.BQk(),e.qZA()}if(2&n){const o=r.$implicit;e.xp6(1),e.Q6J("ngSwitch",o.field),e.xp6(1),e.Q6J("ngSwitchCase","activityType"),e.xp6(1),e.Q6J("ngSwitchCase","item.string.title"),e.xp6(1),e.Q6J("ngSwitchCase","item.user"),e.xp6(1),e.Q6J("ngSwitchCase","at")}}function Kt(n,r){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,jt,7,5,"td",20),e.qZA()),2&n){const o=r.columns;e.xp6(1),e.Q6J("ngForOf",o)}}function er(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e.SDv(3,28),e.qZA()()()),2&n){const o=r.$implicit;e.xp6(1),e.uIk("colspan",o.length)}}function or(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"p-table",11),e.YNc(2,Qt,5,2,"ng-template",12),e.YNc(3,Kt,2,1,"ng-template",13),e.YNc(4,er,4,1,"ng-template",14),e.qZA(),e.BQk()),2&n){const o=e.oxw().ngIf;e.xp6(1),e.Q6J("columns",o.data.columns)("value",o.data.rowData)("loading",o.isFetching)}}function nr(n,r){if(1&n&&(e.ynx(0),e.YNc(1,kt,1,0,"alg-loading",3),e.YNc(2,Jt,4,6,"alg-error",4),e.YNc(3,or,5,3,"ng-container",0),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching&&!o.data),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.data)}}function tr(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"alg-path-suggestion",29),e.NdJ("mouseleave",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.closeOverlay())}),e.ALo(2,"async"),e.qZA(),e.BQk()}if(2&n){const o=e.oxw();let t;e.xp6(1),e.Q6J("itemId",null==(t=e.lcZ(2,1,o.showOverlay$))?null:t.itemId)}}let Fe=(()=>{class n{constructor(o){this.activityLogService=o,this.showUserColumn=!0,this.groupId$=new J.t(1),this.refresh$=new y.x,this.state$=this.groupId$.pipe((0,v.w)(t=>this.getData$(t)),(0,R.iS)({resetter:this.refresh$})),this.showOverlaySubject$=new Ut.X(void 0),this.showOverlay$=(0,ne.T)(this.showOverlaySubject$.pipe((0,It.b)(750)),this.showOverlaySubject$.pipe((0,V.h)(t=>!t))).pipe((0,q.x)(),(0,Le.d)(1)),this.showOverlaySubscription=this.showOverlay$.subscribe(t=>{t?this.op?.toggle(t.event,t.target):this.op?.hide()})}ngOnChanges(){this.groupId$.next(this.groupId)}ngOnDestroy(){this.groupId$.complete(),this.refresh$.complete(),this.showOverlaySubject$.complete(),this.showOverlaySubscription.unsubscribe()}refresh(){this.refresh$.next()}getData$(o){return this.activityLogService.getAllActivityLog(o).pipe((0,p.U)(t=>({columns:this.getLogColumns(),rowData:t})))}getLogColumns(){return[{field:"activityType",header:"Action"},{field:"item.string.title",header:"Content"},{field:"item.user",header:"User",disabled:!this.showUserColumn},{field:"at",header:"Time"}].filter(t=>!t.disabled).map(t=>({field:t.field,header:t.header}))}onMouseEnter(o,t,i){const a=this.contentRef?.get(i);if(!a)throw new Error("Unexpected: Target is not found");this.showOverlaySubject$.next({event:o,itemId:t,target:a.nativeElement})}onMouseLeave(o,t){"item.string.title"===t&&(0,yt.j)(o)&&this.closeOverlay()}closeOverlay(){this.showOverlaySubject$.next(void 0)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(xt.t))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-log-view"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Dt,5),e.Gf(wt,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.op=i.first),e.iGM(i=e.CRH())&&(t.contentRef=i)}},inputs:{groupId:"groupId",showUserColumn:"showUserColumn"},features:[e.TTD],decls:5,vars:4,consts:function(){let r,o,t;return r=" You are not allowed to see activities of this user. ",o="Unable to load the recent activity",t="There is no progress to report for this group/user.",[[4,"ngIf"],["styleClass","alg-path-suggestion-overlay"],["op",""],["size","medium",4,"ngIf"],[3,"dark","icon","showRefreshButton","refresh",4,"ngIf"],["size","medium"],[3,"icon","showRefreshButton","refresh"],[4,"ngIf","ngIfElse"],["unknownError",""],r,o,[1,"alg-table",3,"columns","value","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"colSpan"],[1,"header-container","header-refresh"],["icon","pi pi-refresh",3,"click"],[4,"ngFor","ngForOf"],[1,"header-container"],[3,"mouseleave",4,"ngFor","ngForOf"],[3,"mouseleave"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"alg-link",3,"ngClass","routerLink","mouseenter"],["contentRef",""],[1,"alg-link",3,"routerLink"],t,[3,"itemId","mouseleave"]]},template:function(o,t){if(1&o&&(e.YNc(0,nr,4,3,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"p-overlayPanel",1,2),e.YNc(4,tr,3,3,"ng-container",0),e.qZA()),2&o){const i=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,t.state$)),e.xp6(4),e.Q6J("ngIf",i.overlayVisible)}},dependencies:[g.mk,g.sg,g.O5,g.RF,g.n9,g.ED,S.yS,U.jx,E.iA,I.q,$.N,Lt.a,x.zx,fe.T,g.Ov,g.uU,ke.M,_e.s,z.u,$t.m],styles:["[_nghost-%COMP%]   .header-refresh[_ngcontent-%COMP%]{justify-content:flex-end}"]}),n})();function rr(n,r){1&n&&(e.ynx(0),e.SDv(1,5),e.BQk())}function ir(n,r){1&n&&(e.ynx(0),e.SDv(1,6),e.BQk())}function ar(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e.YNc(2,rr,2,0,"ng-container",1),e.YNc(3,ir,2,0,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(5,"div",3)(6,"p-button",4),e.NdJ("onClick",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.leaveGroup())}),e.qZA()(),e.BQk()}if(2&n){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.group.isMembershipLocked)("ngIfElse",o),e.xp6(4),e.Q6J("disabled",t.group.isMembershipLocked)}}let sr=(()=>{class n{constructor(o,t){this.groupLeaveService=o,this.actionFeedbackService=t,this.leave=new e.vpe}leaveGroup(){if(!this.group)throw new Error("Unexpected: missed group");this.groupLeaveService.leave(this.group.id).subscribe({next:()=>{this.actionFeedbackService.success("You've left group"),this.leave.emit()},error:o=>{if(this.actionFeedbackService.unexpectedError(),!(o instanceof f.UA))throw o}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Te),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-leave"]],inputs:{group:"group"},outputs:{leave:"leave"},decls:1,vars:1,consts:function(){let r,o,t;return r="Leave this group",o=" You are currently not allowed to leave this group. ",t=" You can freely leave this group. Note that you may lose access to content if this group was granting some permissions to its members. ",[[4,"ngIf"],[4,"ngIf","ngIfElse"],["allow",""],[1,"button"],["styleClass","alg-button p-button-rounded-full","icon","fa fa-times","label",r,3,"disabled","onClick"],o,t]},template:function(o,t){1&o&&e.YNc(0,ar,7,3,"ng-container",0),2&o&&e.Q6J("ngIf",t.group)},dependencies:[g.O5,x.zx],styles:[".button[_ngcontent-%COMP%]{margin-top:2.5rem;display:flex;justify-content:center;align-items:center}"]}),n})();function _r(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.Oqu(o.group.description)}}function cr(n,r){1&n&&e.SDv(0,6)}function lr(n,r){if(1&n&&(e.TgZ(0,"alg-section",7),e._UZ(1,"alg-group-log-view",8),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("groupId",o.group.id)}}function gr(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-section",9)(1,"alg-group-leave",10),e.NdJ("leave",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onLeave())}),e.qZA()()}if(2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("group",o.group)}}function pr(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"alg-section",1),e.YNc(2,_r,2,1,"p",2),e.YNc(3,cr,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.YNc(5,lr,2,1,"alg-section",4),e.YNc(6,gr,2,1,"alg-section",5),e.BQk()),2&n){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.group.description)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",t.group.currentUserCanWatchMembers),e.xp6(1),e.Q6J("ngIf","none"!==t.group.currentUserMembership)}}let dr=(()=>{class n{constructor(o){this.router=o,this.groupRefreshRequired=new e.vpe,this.leftGroup=new e.vpe}onLeave(){this.group?.isPublic?this.groupRefreshRequired.emit():(this.leftGroup.emit(),this.router.navigate(["/groups/mine"]))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(S.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-overview"]],inputs:{group:"group"},outputs:{groupRefreshRequired:"groupRefreshRequired",leftGroup:"leftGroup"},decls:1,vars:1,consts:function(){let r,o,t,i;return r="Presentation",o="Progress",t="Leave the group?",i="This group has no description",[[4,"ngIf"],["icon","fa fa-users","label",r],[4,"ngIf","ngIfElse"],["noDesc",""],["icon","fa fa-chart-line","label",o,4,"ngIf"],["icon","fa fa-sign-out-alt","label",t,4,"ngIf"],i,["icon","fa fa-chart-line","label",o],[3,"groupId"],["icon","fa fa-sign-out-alt","label",t],[3,"group","leave"]]},template:function(o,t){1&o&&e.YNc(0,pr,7,4,"ng-container",0),2&o&&e.Q6J("ngIf",t.group)},dependencies:[g.O5,L.e,Fe,sr],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}alg-grid[_ngcontent-%COMP%]{margin-right:-1.6667rem;margin-left:-3.3333rem}"]}),n})();var M=(()=>{return(n=M||(M={})).Groups="groups",n.Sessions="sessions",n.Teams="teams",n.Users="users",M;var n})();let ur=(()=>{class n{constructor(){this.change=new e.vpe,this.value={type:M.Users,directChildren:!0},this.selectedChildrenFilter=0,this.selectedTypeFilter=0,this.childrenFilters=[{label:"Direct Children Only",value:!0},{label:"All Descendants",value:!1}],this.allDescendantsTypeFilters=[{icon:"fa fa-users",label:"teams",value:M.Teams},{icon:"fa fa-user",label:"users",value:M.Users}],this.directChildrenTypeFilters=[{icon:"fa fa-users",label:"sub-groups",value:M.Groups},{icon:"fa fa-calendar",label:"sessions",value:M.Sessions},{icon:"fa fa-users",label:"teams",value:M.Teams},{icon:"fa fa-user",label:"users",value:M.Users}]}ngOnInit(){this.defaultValue&&this.setFilter(this.defaultValue)}setFilter(o){this.value=o,this.selectedChildrenFilter=this.childrenFilters.findIndex(i=>i.value===this.value.directChildren),this.selectedTypeFilter=Math.max(0,(this.value.directChildren?this.directChildrenTypeFilters:this.allDescendantsTypeFilters).findIndex(i=>i.value===this.value.type))}onTypeFilterChanged(o){const t=this.value.directChildren?this.directChildrenTypeFilters:this.allDescendantsTypeFilters;this.selectedTypeFilter=o,this.value.type=(0,re.I)(t[o]).value,this.change.emit(this.value)}onChildrenFilterChanged(o){this.value.directChildren=(0,re.I)(this.childrenFilters[o]).value,this.selectedChildrenFilter=o;const t=this.value.directChildren?this.directChildrenTypeFilters:this.allDescendantsTypeFilters;this.selectedTypeFilter=t.findIndex(i=>i.value===("teams"===this.value.type?"teams":"users")),this.value.type=(0,re.I)(t[this.selectedTypeFilter]).value,this.change.emit(this.value)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-composition-filter"]],inputs:{defaultValue:"defaultValue"},outputs:{change:"change"},decls:3,vars:4,consts:[[1,"selection-tool"],[2,"margin","10px",3,"items","selected","change"],["type","square",3,"items","selected","change"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"alg-selection",1),e.NdJ("change",function(a){return t.onChildrenFilterChanged(a)}),e.qZA(),e.TgZ(2,"alg-selection",2),e.NdJ("change",function(a){return t.onTypeFilterChanged(a)}),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("items",t.childrenFilters)("selected",t.selectedChildrenFilter),e.xp6(1),e.Q6J("items",t.value.directChildren?t.directChildrenTypeFilters:t.allDescendantsTypeFilters)("selected",t.selectedTypeFilter))},dependencies:[le.p],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.selection-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:.5rem;background-color:#f1f2f7;background-color:var(--base-bk-color);max-width:56rem;margin-left:auto;margin-right:auto;margin-bottom:2rem}.selection-tool[_ngcontent-%COMP%]   app-selection[_ngcontent-%COMP%]:first-child{margin:1rem}"]}),n})(),fr=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-no-permission"]],decls:2,vars:0,consts:function(){let r;return r="You are not allowed to see this page.",[[1,"error","alg-error-text"],r]},template:function(o,t){1&o&&(e.TgZ(0,"p",0),e.SDv(1,1),e.qZA())},styles:[".error[_ngcontent-%COMP%]{margin:0;padding:1rem}"]}),n})();var mr=_(2076),me=_(7164);let hr=(()=>{class n{constructor(o){this.http=o}updateGroup(o,t){return this.http.put(`${C.e.apiUrl}/groups/${o}`,t).pipe((0,p.U)(A.IZ))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cr=(()=>{class n{constructor(o){this.http=o}createNewCode(o){return this.http.post(`${C.e.apiUrl}/groups/${o}/code`,null,{}).pipe((0,p.U)(t=>{const i=t.code;if(!i)throw new Error("The backend has returned an error (no code)");return i}))}removeCode(o){return this.http.delete(`${C.e.apiUrl}/groups/${o}/code`).pipe((0,p.U)(A.IZ))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Or=function(n){return{"no-remove":n}};function Er(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"span",4),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.refreshCode())}),e._UZ(1,"i",5),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("ngClass",e.VKq(1,Or,!o.showRemove))}}function Sr(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"span",6),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.removeCode())}),e._UZ(1,"i",7),e.qZA()}}const Mr=function(n){return{"no-button":n}};let Pr=(()=>{class n{constructor(){this.showRefresh=!0,this.showRemove=!1,this.code="...",this.refresh=new e.vpe,this.remove=new e.vpe}refreshCode(){this.refresh.emit()}removeCode(){this.remove.emit()}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-code-token"]],inputs:{showRefresh:"showRefresh",showRemove:"showRemove",code:"code"},outputs:{refresh:"refresh",remove:"remove"},decls:5,vars:6,consts:function(){let r,o;return r="Generate a new code and reset expiration",o="Disable code access",[[1,"code-generator"],[1,"code",3,"ngClass"],["class","refresh","pTooltip",r,"tooltipPosition","top","tooltipEvent","hover",3,"ngClass","click",4,"ngIf"],["class","remove","pTooltip",o,"tooltipPosition","top","tooltipEvent","hover",3,"click",4,"ngIf"],["pTooltip",r,"tooltipPosition","top","tooltipEvent","hover",1,"refresh",3,"ngClass","click"],[1,"fa","fa-redo"],["pTooltip",o,"tooltipPosition","top","tooltipEvent","hover",1,"remove",3,"click"],[1,"fa","fa-times"]]},template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.qZA(),e.YNc(3,Er,2,3,"span",2),e.YNc(4,Sr,2,0,"span",3),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,Mr,!t.showRefresh&&!t.showRemove)),e.xp6(1),e.Oqu(t.code),e.xp6(1),e.Q6J("ngIf",t.showRefresh),e.xp6(1),e.Q6J("ngIf",t.showRemove))},dependencies:[g.mk,g.O5,oe.u],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.code-generator[_ngcontent-%COMP%]{display:flex;align-items:center;width:17rem;height:3rem;border-radius:.5rem}.code-generator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.code-generator[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{background-color:#0000000d;background-color:var(--input-transparency-color);color:#4a4a4a;color:var(--dark-text-color);box-shadow:0 .1rem #c9cfd7 inset;border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;flex:1;font-size:1.2rem}.code-generator[_ngcontent-%COMP%]   .code.no-button[_ngcontent-%COMP%]{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.code-generator[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{width:3rem;background-color:#4a90e2;background-color:var(--base-color);color:#fff;cursor:pointer}.code-generator[_ngcontent-%COMP%]   .refresh.no-remove[_ngcontent-%COMP%]{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.code-generator[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{width:3rem;background-color:#ff001f;background-color:var(--section-danger-handle-color);color:#fff;border-top-right-radius:.5rem;border-bottom-right-radius:.5rem;cursor:pointer}"]}),n})();var Tr=_(5999),O=_(2508),vr=_(3687);function Nr(n,r){1&n&&e._UZ(0,"div",7)}function Gr(n,r){1&n&&(e.TgZ(0,"span",13),e.SDv(1,14),e.qZA())}function Rr(n,r){1&n&&(e.TgZ(0,"span",13),e.SDv(1,15),e.qZA())}function br(n,r){1&n&&(e.TgZ(0,"span",13),e.SDv(1,16),e.qZA())}function Ar(n,r){if(1&n&&(e.TgZ(0,"span",19),e.SDv(1,20),e.ALo(2,"number"),e.ALo(3,"toMin"),e.ALo(4,"number"),e.ALo(5,"toMin"),e.qZA()),2&n){const o=e.oxw(3);e.xp6(5),e.pQV(e.xi3(2,2,e.lcZ(3,5,o.codeInfo.durationSinceFirstCodeUse),"1.0-0"))(e.xi3(4,7,e.lcZ(5,10,o.codeInfo.durationBeforeCodeExpiration),"1.0-0")),e.QtT(1)}}function Ur(n,r){if(1&n&&(e.TgZ(0,"span",19),e.SDv(1,21),e.ALo(2,"number"),e.ALo(3,"toMin"),e.qZA()),2&n){const o=e.oxw(3);e.xp6(3),e.pQV(e.xi3(2,1,e.lcZ(3,4,o.codeInfo.durationBeforeCodeExpiration),"1.0-0")),e.QtT(1)}}function Ir(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ar,6,12,"span",17),e.YNc(2,Ur,4,6,"ng-template",null,18,e.W1O),e.BQk()),2&n){const o=e.MAs(3),t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.codeInfo.durationSinceFirstCodeUse.ms>0)("ngIfElse",o)}}function yr(n,r){if(1&n&&(e.TgZ(0,"span",22),e.SDv(1,23),e.ALo(2,"date"),e.qZA()),2&n){const o=e.oxw(2);e.xp6(2),e.pQV(e.xi3(2,1,o.codeInfo.codeExpiration,"medium")),e.QtT(1)}}function xr(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"p-button",24),e.NdJ("onClick",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.generateNewCode())}),e.qZA()}if(2&n){const o=e.oxw(2);e.Q6J("disabled",o.processing)}}function Lr(n,r){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,Gr,2,0,"span",9),e.YNc(2,Rr,2,0,"span",9),e.YNc(3,br,2,0,"span",9),e.YNc(4,Ir,4,2,"ng-container",10),e.YNc(5,yr,3,4,"span",11),e.YNc(6,xr,1,1,"p-button",12),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.codeInfo.hasCodeNotSet),e.xp6(1),e.Q6J("ngIf",o.codeInfo.hasCodeUnused),e.xp6(1),e.Q6J("ngIf",o.codeInfo.hasUnexpiringCode),e.xp6(1),e.Q6J("ngIf",o.codeInfo.hasCodeInUse&&o.codeInfo.durationSinceFirstCodeUse&&o.codeInfo.durationBeforeCodeExpiration),e.xp6(1),e.Q6J("ngIf",!o.codeInfo.hasCodeNotSet&&o.codeInfo.hasCodeExpired),e.xp6(1),e.Q6J("ngIf",o.codeInfo.hasCodeNotSet)}}function $r(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",33)(1,"alg-duration",34,35),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.codeLifetimeControlValue=i)}),e.qZA(),e.TgZ(3,"p-button",36),e.NdJ("onClick",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.codeLifetimeControlValue&&i.submitCodeLifetime(i.codeLifetimeControlValue.ms))}),e.qZA()()}if(2&n){const o=e.MAs(2),t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.codeLifetimeControlValue),e.xp6(2),e.Q6J("disabled",t.processing||!t.codeLifetimeControlValue||!o.dirty||t.codeLifetimeControlValue.ms===(null==t.group.codeLifetime?null:t.group.codeLifetime.ms))("pTooltip",t.durationTooltip)}}function Dr(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",25)(1,"div",26)(2,"span",13),e.SDv(3,27),e.qZA(),e.TgZ(4,"alg-code-token",28),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.generateNewCode())})("remove",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.removeCode())}),e.qZA()(),e.TgZ(5,"div",29)(6,"span",13),e.SDv(7,30),e.qZA(),e.TgZ(8,"alg-selection",31),e.NdJ("change",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.changeCodeLifetime(i))}),e.qZA(),e.YNc(9,$r,4,3,"div",32),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(4),e.Q6J("code",o.group.code)("showRefresh",!0)("showRemove",!0),e.xp6(4),e.Q6J("items",o.codeLifetimeOptions)("selected",o.selectedCodeLifetimeOption),e.xp6(1),e.Q6J("ngIf",o.selectedCodeLifetimeOption===o.customCodeLifetimeOption)}}let wr=(()=>{class n{constructor(o,t,i){this.groupActionsService=o,this.codeActionsService=t,this.actionFeedbackService=i,this.refreshRequired=new e.vpe,this.processing=!1,this.codeLifetimeOptions=[{label:"Infinite",value:"infinite",tooltip:"This code will never expire "+"(reset current expiration)"},{label:"Usable once",value:"usable_once",tooltip:"This code will be usable only once "+"(reset current expiration)"},{label:"Custom",value:"custom",tooltip:"This code will expire after the given duration "+"(reset current expiration)"}],this.customCodeLifetimeOption=this.codeLifetimeOptions.findIndex(({value:a})=>"custom"===a),this.selectedCodeLifetimeOption=0,this.durationTooltip="This code will expire after the given duration "+"(reset current expiration)"}ngOnChanges(o){o.group&&!this.group&&(this.codeInfo=void 0),o.group&&this.group&&(this.codeInfo=(0,mr.jB)(this.group),o.group.previousValue?.codeLifetime?.valueInSeconds!==o.group.currentValue?.codeLifetime?.valueInSeconds&&(this.codeLifetimeControlValue=this.group.codeLifetime?.asDuration,this.selectedCodeLifetimeOption=this.getSelectedCodeLifetimeOption(this.group.codeLifetime)))}generateNewCode(){if(!this.group)return;this.processing=!0;const o=this.group.id,t=this.group.codeExpiresAt;this.codeActionsService.createNewCode(o).pipe((0,v.w)(()=>null===t?(0,P.of)(void 0):this.groupActionsService.updateGroup(o,{code_expires_at:null}))).subscribe({next:()=>{this.actionFeedbackService.success("A new code has been generated"),this.processing=!1,this.refreshRequired.emit()},error:i=>{if(this.processing=!1,this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}})}submitCodeLifetime(o){if(!this.group||!this.codeInfo)throw new Error("cannot submit new code lifetime when group is undefined");if(this.codeInfo.hasCodeNotSet)throw new Error("cannot submit code lifetime when no code is set");const t=new me.g(o);this.group.codeLifetime?.valueInSeconds!==t.valueInSeconds&&(this.processing=!0,this.groupActionsService.updateGroup(this.group.id,{code_lifetime:t.valueInSeconds,code_expires_at:null}).subscribe({next:()=>{this.actionFeedbackService.success("The validity has been changed"),this.processing=!1,this.refreshRequired.emit()},error:i=>{if(this.processing=!1,this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}}))}removeCode(){if(!this.group)throw new Error("cannot remove code when group is undefined");this.processing=!0;const o=this.group.id,t=this.group.codeExpiresAt;this.codeActionsService.removeCode(o).pipe((0,v.w)(()=>null===t?(0,P.of)(void 0):this.groupActionsService.updateGroup(o,{code_expires_at:null}))).subscribe({next:()=>{this.actionFeedbackService.success("Users will not be able to join with the former code."),this.processing=!1,this.refreshRequired.emit()},error:i=>{if(this.processing=!1,this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}})}changeCodeLifetime(o){const t=this.codeLifetimeOptions[o]?.value;"infinite"===t&&this.submitCodeLifetime(me.g.infiniteValue),"usable_once"===t&&this.submitCodeLifetime(me.g.usableOnceValue),this.selectedCodeLifetimeOption=o}getSelectedCodeLifetimeOption(o){return this.codeLifetimeOptions.findIndex(o?.isUsableOnce?({value:t})=>"usable_once"===t:o?.isInfinite?({value:t})=>"infinite"===t:({value:t})=>"custom"===t)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(hr),e.Y36(Cr),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-join-by-code"]],inputs:{group:"group"},outputs:{refreshRequired:"refreshRequired"},features:[e.TTD],decls:7,vars:4,consts:function(){let r,o,t,i,a,s,c,u,h,d,m;return r="Let user join using a code",o="Let users access this group using a password you send them.",t="Generate a code",i="There is currently no code set.",a="This code has not been used yet (or usage resetted).",s="This code can be used multiple times without expiring.",c=" This code has been activated " + "\ufffd0\ufffd" + " minutes ago, it will be disabled in " + "\ufffd1\ufffd" + " minutes. ",u="This code will be disabled in " + "\ufffd0\ufffd" + " minutes.",h=" This code has expired on " + "\ufffd0\ufffd" + " ",d="Code",m="Validity",[["class","block-ui",4,"ngIf"],["icon","fa fa-user-plus","label",r,3,"collapsible"],[1,"invitation-code"],[1,"content-title"],o,["class","code-state",4,"ngIf"],["class","code-info",4,"ngIf"],[1,"block-ui"],[1,"code-state"],["class","label",4,"ngIf"],[4,"ngIf"],["class","label red",4,"ngIf"],["label",t,"icon","fa fa-plus","styleClass","alg-button p-button-rounded",3,"disabled","onClick",4,"ngIf"],[1,"label"],i,a,s,["class","label green",4,"ngIf","ngIfElse"],["disabledUntil",""],[1,"label","green"],c,u,[1,"label","red"],h,["label",t,"icon","fa fa-plus","styleClass","alg-button p-button-rounded",3,"disabled","onClick"],[1,"code-info"],[1,"code-show"],d,[3,"code","showRefresh","showRemove","refresh","remove"],[1,"validity-selector"],m,[3,"items","selected","change"],["class","duration-form-group",4,"ngIf"],[1,"duration-form-group"],["ngDefaultControl","","layout","DHM","required","",1,"alg-duration",3,"ngModel","ngModelChange"],["control","ngModel"],["icon","fa fa-check","styleClass","alg-button submit-duration-button","tooltipPosition","right","tooltipEvent","hover",3,"disabled","pTooltip","onClick"]]},template:function(o,t){1&o&&(e.YNc(0,Nr,1,0,"div",0),e.TgZ(1,"alg-section-paragraph",1)(2,"div",2)(3,"span",3),e.SDv(4,4),e.qZA(),e.YNc(5,Lr,7,6,"div",5),e.YNc(6,Dr,10,6,"div",6),e.qZA()()),2&o&&(e.Q6J("ngIf",t.processing),e.xp6(1),e.Q6J("collapsible",!0),e.xp6(4),e.Q6J("ngIf",t.codeInfo),e.xp6(1),e.Q6J("ngIf",t.group&&t.group.code))},dependencies:[g.O5,le.p,Pr,ie.s,Tr._,O.Fj,O.JJ,O.Q7,O.On,x.zx,oe.u,g.JJ,g.uU,vr.t],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}[_nghost-%COMP%]{position:relative;display:block}.invitation-code[_ngcontent-%COMP%]{display:flex;flex-direction:column}.invitation-code[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#7c7c7c;margin-right:2rem}.invitation-code[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{font-size:1.2rem;color:#787878;color:var(--base-text-color);margin-bottom:.5rem}.invitation-code[_ngcontent-%COMP%]   .code-state[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem}.invitation-code[_ngcontent-%COMP%]   .code-state[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{flex:1}.invitation-code[_ngcontent-%COMP%]   .code-state[_ngcontent-%COMP%]   span.label.green[_ngcontent-%COMP%]{color:#4a9400}.invitation-code[_ngcontent-%COMP%]   .code-state[_ngcontent-%COMP%]   span.label.red[_ngcontent-%COMP%]{color:#910112}.invitation-code[_ngcontent-%COMP%]   .code-info[_ngcontent-%COMP%]{display:flex;align-items:center}.invitation-code[_ngcontent-%COMP%]   .code-info[_ngcontent-%COMP%]   .code-show[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:3rem}.invitation-code[_ngcontent-%COMP%]   .code-info[_ngcontent-%COMP%]   .validity-selector[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:2rem}.validity-selector[_ngcontent-%COMP%]{display:flex;align-items:center}.validity-selector[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-right:2rem}.duration-form-group[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),n})();var D=(()=>{return(n=D||(D={}))[n.Success=0]="Success",n[n.Error=1]="Error",n[n.AlreadyInvited=2]="AlreadyInvited",n[n.NotFound=3]="NotFound",D;var n})();let kr=(()=>{class n{constructor(o){this.http=o}createInvitations(o,t){return this.http.post(`${C.e.apiUrl}/groups/${o}/invitations`,{logins:t},{}).pipe((0,p.U)(A.Te),(0,p.U)(function(i){return new Map(Object.entries(i).map(([a,s])=>{switch(s){case"success":return[a,D.Success];case"unchanged":return[a,D.AlreadyInvited];case"not_found":return[a,D.NotFound];case"cycle":case"invalid":return[a,D.Error];default:throw new Error(`Invitation of user ${a} returned an unexpected result (${JSON.stringify(s)})`)}}))}))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ze=_(6499),Fr=_(8547);let Zr=(()=>{class n{constructor(){this.type="info",this.detail="",this.closable=!0,this.msgs=[]}ngOnChanges(o){this.msgs=[{severity:this.type,summary:this.summary,detail:this.detail}]}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-message"]],inputs:{type:"type",summary:"summary",detail:"detail",closable:"closable"},features:[e.TTD],decls:1,vars:2,consts:[["styleClass","alg-messages",3,"value","closable"]],template:function(o,t){1&o&&e._UZ(0,"p-messages",0),2&o&&e.Q6J("value",t.msgs)("closable",t.closable)},dependencies:[Fr.V]}),n})();function Jr(n,r){1&n&&e._UZ(0,"alg-message",7),2&n&&e.Q6J("closable",!1)}function Br(n,r){if(1&n&&e._UZ(0,"alg-message",8),2&n){const o=r.$implicit;e.s9C("summary",o.summary),e.Q6J("type",o.type)("detail",o.detail)}}let Yr=(()=>{class n{constructor(o,t,i){this.createGroupInvitationsService=o,this.actionFeedbackService=t,this.formBuilder=i,this.refreshRequired=new e.vpe,this.inviteForm=this.formBuilder.group({logins:""}),this.state="empty",this.messages=[]}ngOnInit(){this.subscription=this.inviteForm.get("logins")?.valueChanges.subscribe(o=>this.loginListChanged(o))}ngOnDestroy(){this.subscription?.unsubscribe()}setState(o){this.state!==o&&("loading"===this.state&&this.inviteForm.enable(),"loading"===o&&this.inviteForm.disable(),this.state=o)}loginListChanged(o){if("loading"===this.state)return;this.setState("ready");const t=o.split(",").filter(i=>i.length>0);0===t.length?this.setState("empty"):t.length>=100&&this.setState("too_many")}displayResponse(o){const t=Array.from(o.entries()).filter(c=>c[1]===D.Success).map(c=>c[0]),i=Array.from(o.entries()).filter(c=>c[1]===D.AlreadyInvited).map(c=>c[0]),a=Array.from(o.entries()).filter(c=>c[1]===D.NotFound).map(c=>c[0]),s=Array.from(o.entries()).filter(c=>c[1]===D.Error).map(c=>c[0]);t.length>0&&this.messages.push({type:"success",summary:"" + t.length + " user(s) invited successfully: ",detail:`${t.join(", ")}`}),i.length>0&&this.messages.push({type:"info",summary:"" + i.length + " user(s) have already been invited: ",detail:`${i.join(", ")}`}),a.length>0&&this.messages.push({type:"error",summary:"" + a.length + " user login(s) not found: ",detail:`${a.join(", ")}`}),s.length>0&&this.messages.push({type:"error",summary:"" + s.length + " user login(s) could not be invited: ",detail:`${s.join(", ")}`})}onInviteClicked(){if(!this.group||"ready"!==this.state)return;this.messages=[];const o=this.inviteForm.get("logins");if(!o)return;const t=o.value.split(",").map(i=>i.trim()).filter(function(i,a,s){return s.indexOf(i)===a&&""!==i});this.setState("loading"),this.createGroupInvitationsService.createInvitations(this.group.id,t).subscribe({next:i=>{this.displayResponse(i),o.setValue(""),this.setState("empty")},error:i=>{if(this.setState("ready"),this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(kr),e.Y36(G.C),e.Y36(O.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-invite-users"]],inputs:{group:"group"},outputs:{refreshRequired:"refreshRequired"},decls:8,vars:5,consts:function(){let r,o,t,i,a;return r="Invite users",o="Add users name list, separated by commas.",t="login_1, login_2...",i="You cannot invite more than 100 users at once",a="Invite",[["icon","fa fa-user-plus","label",r,3,"collapsible"],o,[1,"invite-users"],["inputName","logins","icon","show","placeholder",t,3,"parentForm"],["type","error","detail",i,3,"closable",4,"ngIf"],["label",a,"styleClass","p-button-rounded",3,"disabled","onClick"],[3,"type","detail","summary",4,"ngFor","ngForOf"],["type","error","detail",i,3,"closable"],[3,"type","detail","summary"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-section-paragraph",0)(1,"span"),e.SDv(2,1),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"alg-textarea",3),e.YNc(5,Jr,1,1,"alg-message",4),e.TgZ(6,"p-button",5),e.NdJ("onClick",function(){return t.onInviteClicked()}),e.qZA(),e.YNc(7,Br,1,3,"alg-message",6),e.qZA()()),2&o&&(e.Q6J("collapsible",!0),e.xp6(4),e.Q6J("parentForm",t.inviteForm),e.xp6(1),e.Q6J("ngIf","too_many"===t.state),e.xp6(1),e.Q6J("disabled","ready"!==t.state),e.xp6(1),e.Q6J("ngForOf",t.messages))},dependencies:[g.sg,g.O5,Ze.R,ie.s,Zr,x.zx],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.invite-users[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:1rem}"]}),n})(),Qr=(()=>{class n{constructor(o){this.http=o}removeUsers(o,t){const i=(new f.LE).set("user_ids",t.join(","));return this.http.delete(`${C.e.apiUrl}/groups/${o}/members`,{params:i}).pipe((0,p.U)(A.Te),(0,p.U)(a=>new Map(Object.entries(a))))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Je=_(5278),Vr=_(6457),Be=_(5790),Wr=_(4865),Y=_(3158);function Ye(n){return{countRequests:n.length,countSuccess:n.filter(r=>r.success).length,errorText:n.some(r=>!!r.error_text)?"The group(s) must be empty":void 0}}let Hr=(()=>{class n{constructor(o){this.http=o}remove(o){return this.http.delete(`${C.e.apiUrl}/groups/${o}`)}removeBatch(o){return(0,B.D)(o.map(t=>this.remove(t).pipe((0,Y.K)(({error:i})=>(0,P.of)(i))))).pipe((0,p.U)(Ye))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jr=(()=>{class n{constructor(o){this.http=o}remove(o,t){return this.http.delete(`${C.e.apiUrl}/groups/${o}/relations/${t}`)}removeBatch(o,t){return(0,B.D)(t.map(i=>this.remove(o,i).pipe((0,Y.K)(({error:a})=>(0,P.of)(a))))).pipe((0,p.U)(Ye))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kr=["table"],ei=["compositionFilter"];function oi(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",5),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.fetchRows())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function ni(n,r){1&n&&e._UZ(0,"th",14)}function ti(n,r){if(1&n&&(e.TgZ(0,"th",16)(1,"div",17),e._uU(2),e._UZ(3,"p-sortIcon",18),e.qZA()()),2&n){const o=e.oxw().$implicit;e.Q6J("pSortableColumn",o.field),e.xp6(2),e.hij(" ",o.header," "),e.xp6(1),e.Q6J("field",o.field)}}function ri(n,r){if(1&n&&(e.TgZ(0,"th")(1,"div",17),e._uU(2),e.qZA()()),2&n){const o=e.oxw().$implicit;e.xp6(2),e.hij(" ",o.header," ")}}function ii(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ti,4,3,"th",15),e.YNc(2,ri,3,1,"th",2),e.BQk()),2&n){const o=r.$implicit;e.xp6(1),e.Q6J("ngIf",o.sortable),e.xp6(1),e.Q6J("ngIf",!o.sortable)}}function ai(n,r){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,ni,1,0,"th",12),e.YNc(2,ii,3,2,"ng-container",13),e.qZA()),2&n){const o=e.oxw().$implicit,t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","none"!==(null==t.groupData||null==t.groupData.group?null:t.groupData.group.currentUserCanManage)),e.xp6(1),e.Q6J("ngForOf",o)}}function si(n,r){if(1&n&&e.YNc(0,ai,3,2,"tr",2),2&n){const o=e.oxw(2).ngIf;e.Q6J("ngIf",o.data&&o.data.length>0)}}function _i(n,r){if(1&n&&(e.TgZ(0,"td",14),e._UZ(1,"p-tableCheckbox",19),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("value",o)}}function ci(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"a",23),e.ALo(2,"groupLink"),e._uU(3),e.ALo(4,"userCaption"),e.qZA(),e.BQk()),2&n){const o=e.oxw(3).$implicit;e.xp6(1),e.Q6J("routerLink",e.lcZ(2,2,o.route)),e.xp6(2),e.hij(" ",e.lcZ(4,4,o.user)," ")}}function li(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ci,5,6,"ng-container",2),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",o.user)}}function gi(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"a",23),e.ALo(2,"groupLink"),e._uU(3),e.qZA(),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("routerLink",e.lcZ(2,2,o.route)),e.xp6(2),e.hij(" ",o.name," ")}}function pi(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&n){const o=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.memberSince,"short")," ")}}function di(n,r){if(1&n&&(e.ynx(0),e.YNc(1,pi,3,4,"ng-container",2),e.BQk()),2&n){const o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",o.memberSince)}}function ui(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t[o.field]," ")}}function fi(n,r){if(1&n&&(e.TgZ(0,"td"),e.ynx(1,20),e.YNc(2,li,2,1,"ng-container",21),e.YNc(3,gi,4,4,"ng-container",21),e.YNc(4,di,2,1,"ng-container",21),e.YNc(5,ui,2,1,"ng-container",22),e.BQk(),e.qZA()),2&n){const o=r.$implicit;e.xp6(1),e.Q6J("ngSwitch",o.field),e.xp6(1),e.Q6J("ngSwitchCase","user.login"),e.xp6(1),e.Q6J("ngSwitchCase","name"),e.xp6(1),e.Q6J("ngSwitchCase","member_since")}}function mi(n,r){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,_i,2,1,"td",12),e.YNc(2,fi,6,4,"td",13),e.qZA()),2&n){const o=r.columns,t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","none"!==(null==t.groupData||null==t.groupData.group?null:t.groupData.group.currentUserCanManage)),e.xp6(1),e.Q6J("ngForOf",o)}}function hi(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr")(1,"td",24)(2,"div",25)(3,"button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(4);return e.KtG(i.fetchMoreRows())}),e.qZA()()()()}if(2&n){const o=e.oxw(3).ngIf;e.xp6(3),e.Q6J("disabled",o.isFetching)}}function Ci(n,r){if(1&n&&(e.YNc(0,hi,4,1,"tr",2),e.ALo(1,"async")),2&n){const o=e.oxw(3);e.Q6J("ngIf",e.lcZ(1,1,o.datapager.canLoadMore$))}}function Oi(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"p",27),e.SDv(3,28),e.qZA()()()),2&n){const o=r.$implicit;e.xp6(1),e.uIk("colspan",o.length)}}function Ei(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",30),e._UZ(1,"p-tableHeaderCheckbox"),e.TgZ(2,"span",31),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3).ngIf,a=e.oxw();let s;return e.KtG(a.onSelectAll(null!==(s=i.data)&&void 0!==s?s:[]))}),e.SDv(3,32),e.qZA(),e._UZ(4,"span",33),e.TgZ(5,"div",34)(6,"span",35),e.NdJ("click",function(i){e.CHM(o);const a=e.oxw(4);return e.KtG(a.onRemove(i))}),e.ALo(7,"async"),e.TgZ(8,"span"),e.SDv(9,36),e.qZA(),e._UZ(10,"i",37),e.qZA()()()}if(2&n){const o=e.oxw(3).ngIf,t=e.oxw();e.xp6(6),e.ekj("disabled",e.lcZ(7,3,t.removalInProgress$)||!o.isReady||0===t.selection.length),e.xp6(3),e.pQV("users"===t.currentFilter.type?"Remove":"Remove from group"),e.QtT(9)}}function Si(n,r){1&n&&e.YNc(0,Ei,11,5,"ng-template",29)}const Mi=function(){return[]};function Pi(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"p-table",6,7),e.NdJ("sortFunction",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.onCustomSort(i))})("selectionChange",function(i){e.CHM(o);const a=e.oxw(2);return e.KtG(a.selection=i)}),e.ALo(2,"async"),e.YNc(3,si,1,1,"ng-template",8),e.YNc(4,mi,3,2,"ng-template",9),e.YNc(5,Ci,2,3,"ng-template",10),e.YNc(6,Oi,4,1,"ng-template",11),e.YNc(7,Si,1,0,null,2),e.qZA()}if(2&n){const o=e.oxw().ngIf,t=e.oxw();let i;e.Q6J("columns",t.columns)("value",null!==(i=null==o?null:o.data)&&void 0!==i?i:e.DdM(8,Mi))("customSort",!0)("loading",e.lcZ(2,6,t.removalInProgress$)||o.isFetching)("selection",t.selection),e.xp6(7),e.Q6J("ngIf","none"!==(null==t.groupData||null==t.groupData.group?null:t.groupData.group.currentUserCanManage))}}function Ti(n,r){if(1&n&&(e.ynx(0),e.YNc(1,oi,1,1,"alg-error",3),e.YNc(2,Pi,8,9,"ng-template",null,4,e.W1O),e.BQk()),2&n){const o=r.ngIf,t=e.MAs(3);e.xp6(1),e.Q6J("ngIf",o.isError)("ngIfElse",t)}}function Qe(n){return n.map(r=>r.name).join(", ")}const vi=[{field:"user.login",header:"Name",sortable:!0},{field:"member_since",header:"Member Since",sortable:!0}],Ni=[{field:"name",header:"Name",sortable:!0},{field:"type",header:"Type"},{field:"userCount",header:"User Count"}],qe=[{field:"name",header:"Name",sortable:!0},{field:"userCount",header:"User Count"}],Gi=[{field:"user.login",header:"Name"},{field:"parentGroups",header:"Parent group(s)"}],Ri=[{field:"name",header:"Name",sortable:!0},{field:"parentGroups",header:"Parent group(s)"},{field:"members",header:"Member(s)"}];let bi=(()=>{class n{constructor(o,t,i,a,s,c,u,h){this.getGroupMembersService=o,this.getGroupChildrenService=t,this.getGroupDescendantsService=i,this.groupUsersService=a,this.actionFeedbackService=s,this.removeSubgroupService=c,this.confirmationService=u,this.removeGroupService=h,this.removedGroup=new e.vpe,this.defaultFilter={type:M.Users,directChildren:!0},this.currentSort=[],this.currentFilter=this.defaultFilter,this.selection=[],this.columns=[],this.datapager=new Je.g({fetch:(d,m)=>this.getRows(d,m),pageSize:25,onLoadMoreError:()=>{this.actionFeedbackService.error("Could not load more members, are you connected to the internet?")}}),this.rows$=this.datapager.list$,this.removalInProgress$=new J.t}ngOnDestroy(){this.removalInProgress$.complete()}ngOnChanges(o){!this.groupData||(this.currentFilter={...this.defaultFilter},this.columns=this.getColumns(this.currentFilter),this.currentSort=[],this.table?.clear(),this.fetchRows())}fetchRows(){this.datapager.reset(),this.datapager.load()}fetchMoreRows(){this.datapager.load()}getRows(o,t){if(!this.groupData)throw new Error("group data must be defined to fetch data");const i=this.groupData.route;switch(this.currentFilter.type){case M.Groups:return this.getGroupChildrenService.getGroupChildrenWithSubgroupCount(i.id,this.currentSort,[],["Team","Session","User"]).pipe((0,p.U)(a=>a.map(s=>({...s,route:(0,N.p6)(s,[...i.path,i.id])}))));case M.Sessions:return this.getGroupChildrenService.getGroupChildrenWithSubgroupCount(i.id,this.currentSort,["Session"]).pipe((0,p.U)(a=>a.map(s=>({...s,route:(0,N.p6)(s,[...i.path,i.id])}))));case M.Teams:return this.currentFilter.directChildren?this.getGroupChildrenService.getGroupChildrenWithSubgroupCount(i.id,this.currentSort,["Team"]).pipe((0,p.U)(a=>a.map(s=>({...s,route:(0,N.p6)(s,[...i.path,i.id])})))):this.getGroupDescendantsService.getTeamDescendants(i.id,this.currentSort).pipe((0,p.U)(a=>a.map(s=>({id:s.id,name:s.name,parentGroups:s.parents.map(c=>c.name).join(", "),members:s.members.map(c=>c.login).join(", "),route:(0,N.cw)({id:s.id,isUser:!1})}))));case M.Users:return this.currentFilter.directChildren?this.getGroupMembersService.getGroupMembers(i.id,this.currentSort,25,t?.id).pipe((0,p.U)(a=>a.map(s=>({...s,route:(0,N.p6)({id:s.id,isUser:!0},[...i.path,i.id])})))):this.getGroupDescendantsService.getUserDescendants(i.id,{sort:this.currentSort,limit:o,fromId:t?.id}).pipe((0,p.U)(a=>a.map(s=>({id:s.id,login:s.user.login,user:s.user,parentGroups:s.parents.map(c=>c.name).join(", "),route:(0,N.cw)({id:s.id,isUser:!0})}))))}}onCustomSort(o){if(!this.groupData)return;const t=o.multiSortMeta?.map(i=>-1===i.order?`-${i.field}`:i.field);t&&JSON.stringify(t)!==JSON.stringify(this.currentSort)&&(this.currentSort=t,this.fetchRows())}onFilterChange(o){!this.groupData||o!==this.currentFilter&&(this.currentFilter={...o},this.columns=this.getColumns(o),this.table?.clear(),this.currentSort=[],this.fetchRows())}setFilter(o){this.compositionFilter?.setFilter(o),this.onFilterChange(o)}onSelectAll(o){this.selection=this.selection.length===o.length?[]:o}unselectAll(){this.selection=[]}removeUsers(o){if(0===this.selection.length)throw new Error("Unexpected: Missed selected members");const t=this.selection.map(i=>i.id);this.removalInProgress$.next(!0),this.groupUsersService.removeUsers(o,t).subscribe({next:i=>{(function zr(n,r){r.countSuccess===r.countRequests?n.success("" + r.countSuccess + " user(s) have been removed"):0===r.countSuccess?n.error("Unable to remove the selected user(s)"):n.partial("" + r.countSuccess + " user(s) have been removed, " + (r.countRequests - r.countSuccess) + " could not be removed")})(this.actionFeedbackService,function qr(n){return{countRequests:n.size,countSuccess:Array.from(n.values()).map(o=>["success","unchanged"].includes(o)?1:0).reduce((o,t)=>o+t,0)}}(i)),this.table?.clear(),this.unselectAll(),this.fetchRows(),this.removalInProgress$.next(!1)},error:i=>{if(this.removalInProgress$.next(!1),this.actionFeedbackService.unexpectedError(),!(i instanceof f.UA))throw i}})}onRemoveGroup(o){this.confirmationService.confirm({target:o.target||void 0,key:"commonPopup",icon:"pi pi-exclamation-triangle",message:"Are you sure you want to permanently delete " + Qe(this.selection) + "?\n       This operation cannot be undone.",acceptLabel:"Yes",acceptIcon:"fa fa-check",rejectLabel:"No",accept:()=>this.removeGroupsOrSubgroups()})}onRemoveSubgroups(o,t){this.confirmationService.confirm({target:o.target||void 0,key:"commonPopup",icon:"pi pi-exclamation-triangle",message:"By removing " + Qe(this.selection) + " from the group, you may loose\n       manager access to them (if no explicit permission or through other parent group). Are you sure you want to proceed?",acceptLabel:"Yes",acceptIcon:"fa fa-check",rejectLabel:"No",accept:()=>this.removeGroupsOrSubgroups(t)})}removeGroupsOrSubgroups(o){if(0===this.selection.length)throw new Error("Unexpected: Missed selected groups");const t=this.selection.map(a=>a.id);this.removalInProgress$.next(!0),(o?this.removeSubgroupService.removeBatch(o,t):this.removeGroupService.removeBatch(t)).subscribe({next:a=>{(function Xr(n,r){r.countSuccess===r.countRequests?n.success("" + r.countSuccess + " group(s) have been removed"):0===r.countSuccess?n.error("Unable to remove the selected group(s). "+`${r.errorText||""}`):n.partial("" + r.countSuccess + " group(s) have been removed, " + (r.countRequests - r.countSuccess) + " could\n       not be removed. "+`${r.errorText||""}`)})(this.actionFeedbackService,a),this.table?.clear(),this.unselectAll(),this.fetchRows(),this.removalInProgress$.next(!1),this.removedGroup.emit()},error:a=>{if(this.removalInProgress$.next(!1),this.actionFeedbackService.unexpectedError(),!(a instanceof f.UA))throw a}})}onRemove(o){if(0===this.selection.length||!this.groupData)throw new Error("Unexpected: Missed group data or selected models");const t=this.groupData.group.id;"users"!==this.currentFilter.type?this.selection.some(a=>!a.isEmpty)?this.onRemoveSubgroups(o,t):this.confirmationService.confirm({target:o.target||void 0,key:"commonPopup",icon:"pi pi-question-circle",message:1===this.selection.length?"Do you also want to delete the group?":"These groups are all empty. Do you also want to delete them?",acceptLabel:"Yes",acceptIcon:"fa fa-check",rejectLabel:"No",accept:()=>{setTimeout(()=>{this.onRemoveGroup(o)},250)},reject:()=>{setTimeout(()=>{this.onRemoveSubgroups(o,t)},250)}}):this.removeUsers(t)}getColumns(o){switch(o.type){case M.Groups:return Ni;case M.Sessions:return qe;case M.Teams:return this.currentFilter.directChildren?qe:Ri;case M.Users:return this.currentFilter.directChildren?vi:Gi}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Vr.F),e.Y36(Be.C),e.Y36(Wr.h),e.Y36(Qr),e.Y36(G.C),e.Y36(jr),e.Y36(U.YP),e.Y36(Hr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-member-list"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Kr,5),e.Gf(ei,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.table=i.first),e.iGM(i=e.CRH())&&(t.compositionFilter=i.first)}},inputs:{groupData:"groupData"},outputs:{removedGroup:"removedGroup"},features:[e.TTD],decls:4,vars:4,consts:function(){let r,o,t,i,a;return r="Error while loading the group members",o="Load more",t="This list is empty. Check below the different ways to add members or sub-groups.",i=" Select all ",a="" + "\ufffd0\ufffd" + "",[[3,"defaultValue","change"],["compositionFilter",""],[4,"ngIf"],["class","error dark","message",r,"icon","fa fa-exclamation-triangle",3,"showRefreshButton","refresh",4,"ngIf","ngIfElse"],["noError",""],["message",r,"icon","fa fa-exclamation-triangle",1,"error","dark",3,"showRefreshButton","refresh"],["sortMode","multiple","selectionMode","multiple","dataKey","id",1,"alg-table","--member-list",3,"columns","value","customSort","loading","selection","sortFunction","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["class","thin",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"thin"],[3,"pSortableColumn",4,"ngIf"],[3,"pSortableColumn"],[1,"header-container"],[3,"field"],[1,"p-chkbox",3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"alg-link",3,"routerLink"],["colspan","3"],[1,"text-center"],["pButton","","label",o,1,"p-button-rounded",3,"disabled","click"],[1,"empty-message"],t,["pTemplate","summary"],[1,"summary"],[1,"select-all",3,"click"],i,[1,"filler"],[1,"summary-actions"],[3,"click"],a,[1,"fa","fa-trash-alt"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-group-composition-filter",0,1),e.NdJ("change",function(a){return t.onFilterChange(a)}),e.qZA(),e.YNc(2,Ti,4,2,"ng-container",2),e.ALo(3,"async")),2&o&&(e.Q6J("defaultValue",t.defaultFilter),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,t.rows$)))},dependencies:[g.sg,g.O5,g.RF,g.n9,g.ED,S.yS,U.jx,E.iA,E.lQ,E.fz,E.UA,E.Mo,I.q,x.Hq,ur,g.Ov,g.uU,_e.s,z.u],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}[_nghost-%COMP%]{position:relative;display:block}.error[_ngcontent-%COMP%]{display:block;margin-bottom:2rem}"]}),n})();const Xe=l.n_({id:l.Z_,name:l.Z_,description:l.AG(l.Z_),type:l.i0("Class","Team","Club","Friends","Other","User","Base","Session")});function Ve(n){return"Base"!==n.type}let Ai=(()=>{class n{constructor(o){this.http=o}search(o,t=5){const i=new f.LE({fromObject:{search:o,limit:t.toString()}});return this.http.get(`${C.e.apiUrl}/current-user/available-groups`,{params:i}).pipe((0,w.m)(l.IX(Xe)),(0,p.U)(a=>a.filter(Ve)))}searchPossibleSubgroups(o,t=5){const i=new f.LE({fromObject:{search:o,limit:t.toString()}});return this.http.get(`${C.e.apiUrl}/groups/possible-subgroups`,{params:i}).pipe((0,w.m)(l.IX(Xe)),(0,p.U)(a=>a.filter(Ve)))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ui=_(8526);let Ii=(()=>{class n{constructor(o){this.searchGroupService=o,this.loading=!1,this.addGroup=new e.vpe,this.groupsFound=[],this.allowedNewGroupTypes=[{type:"Class",icon:"fa fa-book",title:"Class",description:""},{type:"Club",icon:"fa fa-book",title:"Club",description:""},{type:"Friends",icon:"fa fa-users",title:"Friends",description:""},{type:"Other",icon:"fa fa-book",title:"Other",description:""}],this.searchFunction=t=>this.searchGroupService.searchPossibleSubgroups(t).pipe((0,p.U)(i=>i.map(a=>({id:a.id,type:a.type,title:a.name,description:a.description}))))}addChild(o){this.addGroup.emit(o)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Ai))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-add-sub-group"]],inputs:{group:"group",loading:"loading"},outputs:{addGroup:"addGroup"},decls:2,vars:3,consts:function(){let r;return r="Add subgroups",[["icon","sign-in-alt","label",r],[3,"allowedTypesForNewContent","searchFunction","loading","contentAdded"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-sub-section",0)(1,"alg-add-content",1),e.NdJ("contentAdded",function(a){return t.addChild(a)}),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("allowedTypesForNewContent",t.allowedNewGroupTypes)("searchFunction",t.searchFunction)("loading",t.loading))},dependencies:[Ui.d,de.R]}),n})();const yi=["memberList"];function xi(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-add-sub-group",8),e.NdJ("addGroup",function(i){e.CHM(o);const a=e.oxw(3);return e.KtG(a.addGroup(i))}),e.qZA()}if(2&n){const o=e.oxw(3);e.Q6J("loading","addingGroup"===o.state)}}function Li(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-group-join-by-code",9),e.NdJ("refreshRequired",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshGroupInfo())}),e.qZA()}if(2&n){const o=e.oxw(3);e.Q6J("group",null==o.groupData?null:o.groupData.group)}}function $i(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-group-invite-users",9),e.NdJ("refreshRequired",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshGroupInfo())}),e.qZA()}if(2&n){const o=e.oxw(3);e.Q6J("group",null==o.groupData?null:o.groupData.group)}}function Di(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"alg-section",3)(2,"alg-member-list",4,5),e.NdJ("removedGroup",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.removedGroup.emit())}),e.qZA(),e.YNc(4,xi,1,1,"alg-add-sub-group",6),e.qZA(),e.YNc(5,Li,1,1,"alg-group-join-by-code",7),e.YNc(6,$i,1,1,"alg-group-invite-users",7),e.BQk()}if(2&n){const o=e.oxw(2);e.xp6(2),e.Q6J("groupData",o.groupData),e.xp6(2),e.Q6J("ngIf","none"!==(null==o.groupData||null==o.groupData.group?null:o.groupData.group.currentUserCanManage)),e.xp6(1),e.Q6J("ngIf",o.groupWithPermissions.canCurrentUserManageMembers),e.xp6(1),e.Q6J("ngIf",o.groupWithPermissions.canCurrentUserManageMembers)}}function wi(n,r){1&n&&e._UZ(0,"alg-group-no-permission")}function ki(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Di,7,4,"ng-container",1),e.YNc(2,wi,1,0,"ng-template",null,2,e.W1O),e.BQk()),2&n){const o=e.MAs(3),t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.groupWithPermissions.isCurrentUserManager)("ngIfElse",o)}}let Fi=(()=>{class n{constructor(o,t){this.groupCreationService=o,this.actionFeedbackService=t,this.groupRefreshRequired=new e.vpe,this.addedGroup=new e.vpe,this.removedGroup=new e.vpe,this.state="ready"}ngOnChanges(){this.groupWithPermissions=this.groupData?(0,se.pL)(this.groupData.group):void 0}refreshGroupInfo(){this.groupRefreshRequired.emit()}addGroup(o){if(!this.groupData)throw Error("Tried to add a subgroup to an undefined group");this.state="addingGroup",(0,B.D)({parentGroupId:(0,P.of)(this.groupData.group.id),childGroupId:o.id?(0,P.of)(o.id):this.groupCreationService.create(o.title,o.type)}).pipe((0,v.w)(t=>this.groupCreationService.addSubgroup(t.parentGroupId,t.childGroupId))).subscribe({next:t=>{this.actionFeedbackService.success("Group successfully added as child group"),this.memberList?.setFilter({directChildren:!0,type:M.Groups}),this.state="ready",this.addedGroup.emit()},error:t=>{if(this.state="ready",this.actionFeedbackService.unexpectedError(),!(t instanceof f.UA))throw t}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(xe),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-composition"]],viewQuery:function(o,t){if(1&o&&e.Gf(yi,5),2&o){let i;e.iGM(i=e.CRH())&&(t.memberList=i.first)}},inputs:{groupData:"groupData"},outputs:{groupRefreshRequired:"groupRefreshRequired",addedGroup:"addedGroup",removedGroup:"removedGroup"},features:[e.TTD],decls:1,vars:1,consts:function(){let r;return r="Current Composition",[[4,"ngIf"],[4,"ngIf","ngIfElse"],["noPermission",""],["icon","fa fa-users","label",r],[3,"groupData","removedGroup"],["memberList",""],[3,"loading","addGroup",4,"ngIf"],[3,"group","refreshRequired",4,"ngIf"],[3,"loading","addGroup"],[3,"group","refreshRequired"]]},template:function(o,t){1&o&&e.YNc(0,ki,4,2,"ng-container",0),2&o&&e.Q6J("ngIf",t.groupWithPermissions)},dependencies:[g.O5,L.e,fr,wr,Yr,bi,Ii],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}alg-grid[_ngcontent-%COMP%]{margin-right:-1.6667rem;margin-left:-3.3333rem}"]}),n})();var Zi=_(3853);function We(n){return"existing-activity"===n.tag}function He(n){return"new-activity"===n.tag}function Ji(n){return"Skill"!==n.type}let Bi=(()=>{class n{constructor(o){this.http=o}updateGroup(o,t){return this.http.put(`${C.e.apiUrl}/groups/${o}`,t).pipe((0,p.U)(A.IZ))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Yi=_(4610),Qi=_(3392),qi=_(3148),zi=_(4619),je=_(1920),Xi=_(1432),he=_(3027),Ke=_(6249),Vi=_(473);function Wi(n,r){1&n&&e._UZ(0,"alg-loading",4)}function Hi(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",5),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function ji(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"There are currently no activities associated with this group."),e.qZA(),e.TgZ(3,"alg-add-content",9),e.NdJ("contentAdded",function(i){e.CHM(o);const a=e.oxw(3);return e.KtG(a.setRootActivity(i))}),e.qZA(),e.BQk()}if(2&n){const o=e.oxw(3);e.xp6(3),e.Q6J("allowedTypesForNewContent",o.allowedNewItemTypes)("searchFunction",o.searchFunction)}}function Ki(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",10)(1,"span",11),e._uU(2),e.qZA(),e.TgZ(3,"span",12),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onRemove())}),e.TgZ(4,"span"),e.SDv(5,13),e.qZA(),e._UZ(6,"i",14),e.qZA()()}if(2&n){const o=e.oxw(2).ngIf;e.xp6(2),e.hij(" ",o.data.name," ")}}function ea(n,r){1&n&&e._UZ(0,"i",18)}const oa=function(n){return{clickable:n}};function na(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",10),e.YNc(1,ea,1,0,"i",15),e.TgZ(2,"span",16),e._uU(3),e.qZA(),e.TgZ(4,"span",12),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onRemove())}),e.TgZ(5,"span"),e.SDv(6,17),e.qZA(),e._UZ(7,"i",14),e.qZA()()}if(2&n){const o=e.oxw(2).ngIf;e.xp6(1),e.Q6J("ngIf",!o.data.path),e.xp6(1),e.Q6J("routerLink",o.data.path)("ngClass",e.VKq(4,oa,!!o.data.path)),e.xp6(1),e.Oqu(o.data.name)}}function ta(n,r){if(1&n&&(e.ynx(0)(1,6),e.YNc(2,ji,4,2,"ng-container",7),e.YNc(3,Ki,7,1,"div",8),e.YNc(4,na,8,6,"div",8),e.BQk()()),2&n){const o=e.oxw().ngIf;e.xp6(1),e.Q6J("ngSwitch",o.data.tag),e.xp6(1),e.Q6J("ngSwitchCase","no-activity"),e.xp6(1),e.Q6J("ngSwitchCase","new-activity"),e.xp6(1),e.Q6J("ngSwitchCase","existing-activity")}}function ra(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"alg-section",1),e.YNc(2,Wi,1,0,"alg-loading",2),e.YNc(3,Hi,1,1,"alg-error",3),e.YNc(4,ta,5,4,"ng-container",0),e.qZA(),e.BQk()),2&n){const o=r.ngIf;e.xp6(2),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady)}}let ia=(()=>{class n{constructor(o,t){this.getItemByIdService=o,this.searchItemService=t,this.allowedNewItemTypes=Xi.B,this.activityChanges$=new J.t,this.refresh$=new y.x,this.state$=this.activityChanges$.pipe((0,q.x)(),(0,v.w)(i=>{if(i.triggerChange&&this.onChange(i.activity),!We(i.activity))return(0,P.of)({tag:i.activity.tag,id:void 0,path:null,name:He(i.activity)?i.activity.name:void 0});const a=i.activity.id;return(void 0!==i.activity.name?(0,P.of)(i.activity.name):this.getItemByIdService.get(a).pipe((0,p.U)(c=>c.string.title))).pipe((0,p.U)(c=>({tag:"existing-activity",id:a,name:c,path:(0,je.PI)((0,je.H1)("activity",a))})),(0,Y.K)(c=>{if((0,he.Lg)(c))return(0,P.of)({tag:"existing-activity",name:"You don't have access to this activity.",path:null});throw c}))}),(0,R.iS)({resetter:this.refresh$})),this.onChange=()=>{},this.searchFunction=i=>this.searchItemService.search(i,["Chapter","Course","Task"]).pipe((0,p.U)(a=>a.filter(Ji)))}ngOnDestroy(){this.refresh$.complete()}writeValue(o){this.activityChanges$.next({activity:o,triggerChange:!1})}registerOnChange(o){this.onChange=o}registerOnTouched(o){}onRemove(){this.activityChanges$.next({activity:{tag:"no-activity"},triggerChange:!0})}setRootActivity(o){this.activityChanges$.next({activity:void 0!==o.id?{tag:"existing-activity",id:o.id,name:o.title}:{tag:"new-activity",name:o.title,activityType:o.type},triggerChange:!0})}refresh(){this.refresh$.next()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Ke.G),e.Y36(Vi.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-associated-activity"]],features:[e._Bn([{provide:O.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:2,vars:3,consts:function(){let r,o,t,i,a;return r="Associated Activity",o="Error while loading the root activity",t="Select",i="Remove",a="Remove",[[4,"ngIf"],["label",r,"icon","fa fa-book","styleClass","associated-activity"],["size","medium",4,"ngIf"],["class","dark","icon","fa fa-exclamation-triangle","message",o,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["size","medium"],["icon","fa fa-exclamation-triangle","message",o,"refreshButtonType","refresh",1,"dark",3,"showRefreshButton","refresh"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","activity",4,"ngSwitchCase"],["selectExistingText",t,3,"allowedTypesForNewContent","searchFunction","contentAdded"],[1,"activity"],[1,"activity-name"],[1,"remove",3,"click"],i,[1,"fa","fa-trash-alt"],["class","fa fa-lock",4,"ngIf"],[1,"activity-name",3,"routerLink","ngClass"],a,[1,"fa","fa-lock"]]},template:function(o,t){1&o&&(e.YNc(0,ra,5,3,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.mk,g.O5,g.RF,g.n9,S.rH,L.e,de.R,I.q,$.N,g.Ov],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.activity[_ngcontent-%COMP%]{width:100%;display:flex}.activity[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{white-space:nowrap;display:flex;justify-content:center;align-items:center;width:8rem;color:#4a90e2;color:var(--base-color);cursor:pointer}.activity[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.activity[_ngcontent-%COMP%]   .activity-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:var(--font-family);font-weight:100}.activity[_ngcontent-%COMP%]   .activity-name.clickable[_ngcontent-%COMP%]{cursor:pointer}.activity[_ngcontent-%COMP%]   .activity-name.clickable[_ngcontent-%COMP%]:hover{color:#4a90e2;color:var(--base-color)}"]}),n})(),eo=(()=>{class n{constructor(o){this.http=o}delete(o){return this.http.delete(`${C.e.apiUrl}/groups/${o}`).pipe((0,p.U)(A.IZ))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function aa(n,r){1&n&&e._UZ(0,"alg-loading",6)}function sa(n,r){1&n&&(e.TgZ(0,"span",7),e.SDv(1,8),e.qZA())}function _a(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",9),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function ca(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",1),e.YNc(1,aa,1,0,"alg-loading",2),e.ALo(2,"async"),e.TgZ(3,"button",3),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onDeleteGroup())}),e.ALo(4,"async"),e.qZA(),e.YNc(5,sa,2,0,"span",4),e.YNc(6,_a,1,1,"alg-error",5),e.qZA()}if(2&n){const o=r.ngIf,t=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isFetching||e.lcZ(2,4,t.deletionInProgress$)),e.xp6(2),e.Q6J("disabled",o.isReady&&o.data||o.isFetching||o.isError||e.lcZ(4,6,t.deletionInProgress$)),e.xp6(2),e.Q6J("ngIf",o.isReady&&o.data),e.xp6(1),e.Q6J("ngIf",o.isError)}}let la=(()=>{class n{constructor(o,t,i,a,s){this.actionFeedbackService=o,this.confirmationService=t,this.getGroupChildrenService=i,this.groupDeleteService=a,this.router=s,this.groupDeleted=new e.vpe,this.deletionInProgress$=new y.x,this.id$=new J.t(1),this.refresh$=new y.x,this.state$=this.id$.pipe((0,q.x)(),(0,v.w)(c=>this.hasGroupChildren$(c)),(0,R.iS)({resetter:this.refresh$}))}ngOnChanges(){this.group&&this.id$.next(this.group.id)}ngOnDestroy(){this.id$.complete(),this.refresh$.complete()}hasGroupChildren$(o){return this.getGroupChildrenService.getGroupChildren(o).pipe((0,p.U)(t=>t.length>0))}onDeleteGroup(){!this.group||this.confirmationService.confirm({message:"Are you sure you want to delete the group \"" + this.group.name + "\"",header:"Confirm Action",icon:"pi pi-exclamation-triangle",acceptLabel:"Delete it",accept:()=>{this.deleteGroup()},rejectLabel:"No"})}deleteGroup(){if(!this.group)return;const o=this.group.id,t=this.group.name;this.deletionInProgress$.next(!0),this.groupDeleteService.delete(o).subscribe({next:()=>{this.deletionInProgress$.next(!1),this.actionFeedbackService.success("You have deleted \"" + t + "\""),this.groupDeleted.emit(),this.navigateToMyGroups()},error:i=>{this.deletionInProgress$.next(!1),this.actionFeedbackService.error("Failed to delete \"" + t + "\"")}})}navigateToMyGroups(){this.router.navigate(["/groups/mine"])}refresh(){this.refresh$.next()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(G.C),e.Y36(U.YP),e.Y36(Be.C),e.Y36(eo),e.Y36(S.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-remove-button"]],inputs:{group:"group"},outputs:{groupDeleted:"groupDeleted"},features:[e.TTD],decls:2,vars:3,consts:function(){let r,o,t;return r="Delete this group",o="Error while loading the group info",t=" Only an empty group can be deleted. ",[["class","container",4,"ngIf"],[1,"container"],["size","small",4,"ngIf"],["pButton","","type","button","label",r,1,"alg-button","p-button-rounded","p-button-danger",3,"disabled","click"],["class","has-children",4,"ngIf"],["class","warning small","message",o,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["size","small"],[1,"has-children"],t,["message",o,"refreshButtonType","refresh",1,"warning","small",3,"showRefreshButton","refresh"]]},template:function(o,t){1&o&&(e.YNc(0,ca,7,8,"div",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,I.q,$.N,x.Hq,g.Ov],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.has-children[_ngcontent-%COMP%]{margin-left:1rem;color:#ff001f;color:var(--notify-error-color)}"]}),n})();function ga(n,r){1&n&&e._UZ(0,"alg-loading")}function pa(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",2),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refreshGroup())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function da(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"form",6)(1,"alg-section",7)(2,"div",8)(3,"div",9)(4,"label"),e.SDv(5,10),e.qZA()(),e.TgZ(6,"div",11),e._UZ(7,"alg-input",12),e.qZA()(),e.TgZ(8,"div",8)(9,"div",9)(10,"label"),e.SDv(11,13),e.qZA()(),e.TgZ(12,"div",11),e._UZ(13,"alg-textarea",14),e.qZA()()(),e._UZ(14,"alg-associated-activity",15),e.TgZ(15,"div",16)(16,"alg-group-remove-button",17),e.NdJ("groupDeleted",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshNav())}),e.qZA()()()}if(2&n){const o=e.oxw(2).ngIf,t=e.oxw();e.Q6J("formGroup",t.groupForm),e.xp6(7),e.Q6J("parentForm",t.groupForm),e.xp6(6),e.Q6J("parentForm",t.groupForm),e.xp6(3),e.Q6J("group",o.data)}}function ua(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-floating-save",18),e.NdJ("save",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.save())})("cancel",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.resetForm())}),e.qZA()}if(2&n){const o=e.oxw(3);e.Q6J("saving",o.groupForm.disabled)}}function fa(n,r){1&n&&e._UZ(0,"alg-error",19)}function ma(n,r){if(1&n&&(e.ynx(0),e.YNc(1,da,17,4,"form",3),e.YNc(2,ua,1,1,"alg-floating-save",4),e.YNc(3,fa,1,0,"ng-template",null,5,e.W1O),e.BQk()),2&n){const o=e.MAs(4),t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.data.isCurrentUserManager&&t.data.canCurrentUserManageGroup)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",i.groupForm.dirty)}}function ha(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ga,1,0,"alg-loading",0),e.YNc(2,pa,1,1,"alg-error",1),e.YNc(3,ma,5,3,"ng-container",0),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady)}}let Ca=(()=>{class n{constructor(o,t,i,a,s,c,u,h){this.modeService=o,this.currentContentService=t,this.groupDataSource=i,this.actionFeedbackService=a,this.formBuilder=s,this.groupUpdateService=c,this.createItemService=u,this.pendingChangesService=h,this.groupForm=this.formBuilder.group({name:["",[O.kI.required,O.kI.minLength(3)]],description:["",[]],rootActivity:["",[]]}),this.state$=this.groupDataSource.state$.pipe((0,R.sf)(d=>(0,se.pL)(d.group))),this.subscription=this.state$.pipe((0,R.RI)()).subscribe(d=>{this.initialFormData=d,this.resetFormWith(d)})}ngOnInit(){this.pendingChangesService.set(this)}ngOnDestroy(){this.modeService.stopEditing(),this.subscription?.unsubscribe(),this.pendingChangesService.clear()}isDirty(){return this.groupForm.dirty}save(){if(!this.initialFormData)return;if(this.groupForm.invalid)return void this.actionFeedbackService.error("You need to solve all the errors displayed in the form to save changes.");this.groupForm.disable();const o=this.initialFormData.id,t=this.groupForm.get("name")?.value,i=this.groupForm.get("description")?.value,a=this.groupForm.get("rootActivity")?.value;(He(a)?this.createItemService.create({title:a.name,type:a.activityType,languageTag:"en",asRootOfGroupId:this.initialFormData.id}):(0,P.of)(We(a)?a.id:null)).pipe((0,Zi.b)(c=>this.groupUpdateService.updateGroup(o,{name:t,description:""===i?null:i,root_activity_id:c}))).subscribe({next:()=>{this.groupDataSource.refetchGroup(),this.refreshNav(),this.actionFeedbackService.success("Changes successfully saved.")},error:c=>{if(this.groupForm.enable(),this.actionFeedbackService.unexpectedError(),!(c instanceof f.UA))throw c}})}refreshNav(){this.currentContentService.forceNavMenuReload()}resetForm(){this.initialFormData&&this.resetFormWith(this.initialFormData)}resetFormWith(o){this.groupForm.reset({name:o.name,description:o.description,rootActivity:null===o.rootActivityId?{tag:"no-activity"}:{tag:"existing-activity",id:o.rootActivityId}}),this.groupForm.enable()}refreshGroup(){this.groupDataSource.refetchGroup()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Z.dT),e.Y36(Q.u),e.Y36(X),e.Y36(G.C),e.Y36(O.QS),e.Y36(Bi),e.Y36(Yi.O),e.Y36(Qi.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-edit"]],decls:2,vars:3,consts:function(){let r,o,t,i,a;return r="Error while loading the group",o="Group information",t="Name",i="Description",a="You do not have the permissions to edit this content.",[[4,"ngIf"],["class","dark","message",r,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["message",r,"refreshButtonType","refresh",1,"dark",3,"showRefreshButton","refresh"],["class","group-edition",3,"formGroup",4,"ngIf","ngIfElse"],[3,"saving","save","cancel",4,"ngIf"],["notAuthorized",""],[1,"group-edition",3,"formGroup"],["icon","fa fa-cog","label",o],[1,"field"],[1,"field-name"],t,[1,"field-value"],["name","name","size","large",3,"parentForm"],i,["inputName","description","size","large",3,"parentForm"],["formControlName","rootActivity"],[1,"remove-button-section"],[3,"group","groupDeleted"],[3,"saving","save","cancel"],["message",a]]},template:function(o,t){1&o&&(e.YNc(0,ha,4,3,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,L.e,Ze.R,qi.a,zi.b,I.q,$.N,O._Y,O.JJ,O.JL,O.sg,O.u,ia,la,g.Ov],styles:[".group-edition[_ngcontent-%COMP%]{background-color:#fff}.group-edition[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex}.group-edition[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .field-name[_ngcontent-%COMP%]{float:left;width:20%;margin-top:6px}.group-edition[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .field-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:12px 12px 12px 0;display:inline-block}.group-edition[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{float:left;width:80%;margin-top:6px}.remove-button-section[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:start;align-items:center}"]}),n})();function Oa(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Ea(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,5),e.qZA())}const F=function(){return[]};function Sa(n,r){if(1&n&&(e.TgZ(0,"span",6),e.SDv(1,7),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.pQV((o.items||e.DdM(1,F)).length-o.maxItemsDisplay+1),e.QtT(1)}}function Ma(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"a",1),e.NdJ("click",function(){const a=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.onButtonClick(a))}),e.TgZ(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"span",2),e.YNc(5,Oa,2,0,"span",3),e.YNc(6,Ea,2,0,"span",3),e.qZA(),e.YNc(7,Sa,2,2,"span",4),e.BQk()}if(2&n){const o=r.$implicit,t=r.index,i=r.last,a=e.oxw();e.xp6(3),e.Oqu(o.name),e.xp6(2),e.Q6J("ngIf",(a.items||e.DdM(4,F)).length>a.maxItemsDisplay&&!i||1===(a.items||e.DdM(5,F)).length||(a.items||e.DdM(6,F)).length<=a.maxItemsDisplay&&t<(a.items||e.DdM(7,F)).length-2),e.xp6(1),e.Q6J("ngIf",(a.items||e.DdM(8,F)).length<=a.maxItemsDisplay&&t>=(a.items||e.DdM(9,F)).length-2&&!i||(a.items||e.DdM(10,F)).length>a.maxItemsDisplay&&i),e.xp6(1),e.Q6J("ngIf",(a.items||e.DdM(11,F)).length>a.maxItemsDisplay&&i)}}let Ta=(()=>{class n{constructor(o){this.groupRouter=o,this.maxItemsDisplay=4}onButtonClick(o){this.groupRouter.navigateTo((0,N.cw)({id:o.id,isUser:!1}))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(ae.u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-links"]],inputs:{items:"items"},decls:2,vars:6,consts:function(){let r,o;return r=", and",o=" " + "\ufffd0\ufffd" + " more ",[[4,"ngFor","ngForOf"],[1,"alg-link","base-color",3,"click"],[1,"separator"],[4,"ngIf"],["class","more",4,"ngIf"],r,[1,"more"],o]},template:function(o,t){1&o&&(e.YNc(0,Ma,8,12,"ng-container",0),e.ALo(1,"slice")),2&o&&e.Q6J("ngForOf",e.Dn7(1,1,t.items,0,(t.items||e.DdM(5,F)).length>t.maxItemsDisplay?t.maxItemsDisplay-1:t.maxItemsDisplay))},dependencies:[g.sg,g.O5,g.OU],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.separator[_ngcontent-%COMP%]{margin-right:.4rem}.buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.more[_ngcontent-%COMP%]{margin-right:.4rem}"]}),n})();function va(n,r){1&n&&(e.TgZ(0,"div",3),e.SDv(1,4),e.qZA())}function Na(n,r){if(1&n&&(e.TgZ(0,"div",3),e.tHW(1,5),e._UZ(2,"alg-group-links",6),e.N_p(),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("items",null==o.group?null:o.group.descendantsCurrentUserIsMemberOf)}}function Ga(n,r){1&n&&(e.TgZ(0,"div",3),e.SDv(1,7),e.qZA())}function Ra(n,r){if(1&n&&(e.TgZ(0,"div",3),e.tHW(1,8),e._UZ(2,"alg-group-links",6),e.N_p(),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("items",null==o.group?null:o.group.ancestorsCurrentUserIsManagerOf)}}function ba(n,r){if(1&n&&(e.TgZ(0,"div",3),e.tHW(1,9),e._UZ(2,"alg-group-links",6),e.N_p(),e.qZA()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("items",null==o.group?null:o.group.descendantsCurrentUserIsManagerOf)}}let Aa=(()=>{class n{constructor(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-indicator"]],inputs:{group:"group"},decls:8,vars:7,consts:function(){let r,o,t,i,a;return r=" You are a member of this group. ",o=" As a member of " + "\ufffd#2\ufffd" + "" + "\ufffd/#2\ufffd" + " you are a member of this group. ",t=" You are a manager of this group. ",i=" As a manager of " + "\ufffd#2\ufffd" + "" + "\ufffd/#2\ufffd" + " you can manage this group. ",a=" As a manager of " + "\ufffd#2\ufffd" + "" + "\ufffd/#2\ufffd" + " you can view this group. ",[[1,"container"],[3,"ngSwitch"],["class","content",4,"ngSwitchCase"],[1,"content"],r,o,[1,"links",3,"items"],t,i,a]},template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.ynx(1,1),e.YNc(2,va,2,0,"div",2),e.YNc(3,Na,3,1,"div",2),e.BQk(),e.ynx(4,1),e.YNc(5,Ga,2,0,"div",2),e.YNc(6,Ra,3,1,"div",2),e.YNc(7,ba,3,1,"div",2),e.BQk(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngSwitch",null==t.group?null:t.group.currentUserMembership),e.xp6(1),e.Q6J("ngSwitchCase","direct"),e.xp6(1),e.Q6J("ngSwitchCase","descendant"),e.xp6(1),e.Q6J("ngSwitch",null==t.group?null:t.group.currentUserManagership),e.xp6(1),e.Q6J("ngSwitchCase","direct"),e.xp6(1),e.Q6J("ngSwitchCase","ancestor"),e.xp6(1),e.Q6J("ngSwitchCase","descendant"))},dependencies:[g.RF,g.n9,Ta],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:column;justify-content:center;color:#4a90e2;color:var(--base-color);background-color:#dfe7f4;background-color:var(--section-color);border-radius:.5rem}.content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem}.links[_ngcontent-%COMP%]{margin-left:.4rem}"]}),n})();const Ia=(0,ee.zG)(l.n_({id:l.Z_,name:l.Z_,canManage:l.i0("none","memberships","memberships_and_group"),canGrantGroupAccess:l.O7,canWatchMembers:l.O7}),l.wf(l.r$({login:l.Z_,firstName:l.AG(l.Z_),lastName:l.AG(l.Z_)})));let ya=(()=>{class n{constructor(o){this.http=o}getGroupManagers(o,t){let i=new f.LE;return t?.sort&&(i=i.set("sort",t.sort.join(","))),void 0!==t?.limit&&(i=i.set("limit",t.limit)),void 0!==t?.fromId&&(i=i.set("from.id",t.fromId)),this.http.get(`${C.e.apiUrl}/groups/${o}/managers`,{params:i}).pipe((0,w.m)(l.IX(Ia)))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var xa=_(4382),La=_(1944);function Da(n){return{countRequests:n.length,countSuccess:n.filter(r=>r).length}}let wa=(()=>{class n{constructor(o){this.http=o}remove(o,t){return this.http.delete(`${C.e.apiUrl}/groups/${o}/managers/${t}`).pipe((0,p.U)(A.IZ))}removeBatch(o,t,i){return(0,ne.T)(...t.map(a=>this.remove(o,a).pipe((0,p.U)(()=>!0),(0,Y.K)(()=>(0,P.of)(!1))))).pipe(function $a(n,r){return(0,La.e)((0,xa.U)(n,r,arguments.length>=2,!1,!0))}((a,s)=>[...a,s],[]),(0,v.w)(a=>i?a.some(s=>!s)?(0,P.of)([...a,!1]):this.remove(o,i).pipe((0,p.U)(()=>!0),(0,Y.K)(()=>(0,P.of)(!1)),(0,p.U)(s=>[...a,s])):(0,P.of)(a))).pipe((0,p.U)(Da))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var W=_(1050),Ce=_(6763);let ka=(()=>{class n{constructor(o){this.http=o}update(o,t,i){return this.http.put(`${C.e.apiUrl}/groups/${o}/managers/${t}`,{can_manage:i.canManage,can_grant_group_access:i.canGrantGroupAccess,can_watch_members:i.canWatchMembers})}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Fa=_(4813),Za=_(6750),Ja=_(4371),oo=_(9999);function Ba(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,22),e.qZA())}function Ya(n,r){if(1&n&&(e.TgZ(0,"alg-progress-select",20),e.YNc(1,Ba,2,0,"ng-template",null,21,e.W1O),e.qZA()),2&n){const o=r.$implicit,t=e.oxw(2);e.Q6J("values",t.managementLevelValues)("collapsed",o)}}function Qa(n,r){1&n&&(e.TgZ(0,"span",24),e.SDv(1,25),e.qZA())}function qa(n,r){1&n&&(e.TgZ(0,"alg-switch-field",23),e.YNc(1,Qa,2,0,"ng-template",null,24,e.W1O),e.qZA()),2&n&&e.Q6J("collapsed",r.$implicit)}function za(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,27),e.qZA())}function Xa(n,r){1&n&&(e.TgZ(0,"alg-switch-field",26),e.YNc(1,za,2,0,"ng-template",null,24,e.W1O),e.qZA()),2&n&&e.Q6J("collapsed",r.$implicit)}function Va(n,r){1&n&&(e.ynx(0),e._UZ(1,"alg-loading",28),e.BQk())}function Wa(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"p-button",29),e.NdJ("onClick",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onClose())}),e.qZA(),e.TgZ(1,"p-button",30),e.NdJ("onClick",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onAccept())}),e.qZA()}if(2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("disabled",!o.form.dirty)}}function Ha(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-dialog",1),e.NdJ("visibleChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.visible=i)}),e.TgZ(2,"p-header")(3,"div",2)(4,"span",3),e._UZ(5,"i",4),e.qZA(),e.TgZ(6,"span",5),e.SDv(7,6),e.qZA(),e.TgZ(8,"span",7),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.onClose())}),e._UZ(9,"img",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"p"),e.SDv(13,11),e.qZA(),e.TgZ(14,"form",12)(15,"alg-collapsible-section",13),e.YNc(16,Ya,3,2,"ng-template",null,14,e.W1O),e.qZA(),e.TgZ(18,"alg-collapsible-section",15),e.YNc(19,qa,3,1,"ng-template",null,14,e.W1O),e.qZA(),e.TgZ(21,"alg-collapsible-section",16),e.YNc(22,Xa,3,1,"ng-template",null,14,e.W1O),e.qZA()()()(),e.TgZ(24,"p-footer")(25,"div",17),e.YNc(26,Va,2,0,"ng-container",18),e.YNc(27,Wa,2,1,"ng-template",null,19,e.W1O),e.qZA()()(),e.BQk()}if(2&n){const o=e.MAs(28),t=e.oxw();e.xp6(1),e.Q6J("visible",t.visible)("modal",!0)("draggable",!1)("closable",!1),e.xp6(6),e.pQV(null==t.group?null:t.group.name)(t.userCaption),e.QtT(7),e.xp6(7),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("collapsible",!1),e.xp6(3),e.Q6J("collapsible",!1),e.xp6(3),e.Q6J("collapsible",!1),e.xp6(5),e.Q6J("ngIf",t.isUpdating)("ngIfElse",o)}}let ja=(()=>{class n{constructor(o,t,i,a,s){this.sessionService=o,this.updateGroupManagersService=t,this.actionFeedbackService=i,this.fb=a,this.confirmationService=s,this.close=new e.vpe,this.managementLevelValues=[{value:"none",label:"Read-only",comment:"Can list the members"},{value:"memberships",label:"Membership",comment:"Can manage (add, remove, invite, ...) members"},{value:"memberships_and_group",label:"Memberships and group",comment:"Can manage members, managers, and change group settings"}],this.isUpdating=!1,this.form=this.fb.group({canManage:["none"],canGrantGroupAccess:[!1],canWatchMembers:[!1]})}ngOnChanges(){this.manager&&(this.form.reset({canManage:this.manager.canManage,canGrantGroupAccess:this.manager.canGrantGroupAccess,canWatchMembers:this.manager.canWatchMembers},{emitEvent:!1}),this.userCaption=this.manager.login?(0,Ce.g)({login:this.manager.login,firstName:this.manager.firstName,lastName:this.manager.lastName}):this.manager.name)}onClose(){this.close.emit({updated:!1})}onAccept(){if(!this.manager)throw new Error("Unexpected: Missed manager data");const o=this.sessionService.session$.value?.groupId;if(!o)throw new Error("Unexpected: Missed current used ID");const t=this.form.get("canManage")?.value;this.manager.id!==o||this.manager.id===o&&"memberships_and_group"!==this.manager.canManage||"memberships_and_group"===t?this.update():this.confirmationService.confirm({message:"Are you sure to remove from yourself the permission to edit group settings and edit managers?\n        You may lose manager access and not be able to restore it.",header:"Confirm Action",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes, save these changes.",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.update()},rejectLabel:"No"})}update(){if(!this.manager||!this.group)throw new Error("Unexpected: Missed input component params");const o={canManage:this.form.get("canManage")?.value,canGrantGroupAccess:this.form.get("canGrantGroupAccess")?.value,canWatchMembers:this.form.get("canWatchMembers")?.value};this.isUpdating=!0,this.updateGroupManagersService.update(this.group.id,this.manager.id,o).subscribe({next:()=>{this.isUpdating=!1,this.actionFeedbackService.success("New permissions successfully saved."),this.close.emit({updated:!0})},error:()=>{this.isUpdating=!1,this.actionFeedbackService.error("Failed to save permissions.")}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(W.o),e.Y36(ka),e.Y36(G.C),e.Y36(O.QS),e.Y36(U.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-manager-permission-dialog"]],inputs:{visible:"visible",group:"group",manager:"manager"},outputs:{close:"close"},features:[e.TTD],decls:1,vars:1,consts:function(){let r,o,t,i,a,s,c,u,h,d;return r=" " + "\ufffd0\ufffd" + ": manager access given to " + "\ufffd1\ufffd" + " ",o=" This panel lets you select what you allow the selected user or group of users to do on the current group and its descendants. ",t="Management level",i="Can grant access",a="Can watch members",s="The permissions that the user(s) has on this group",c=" User(s) can give and revoke members access to some content ",u=" User(s) can watch the members' activity on some content ",h="Cancel",d="Save",[[4,"ngIf"],["styleClass","alg-permissions-edit-dialog",3,"visible","modal","draggable","closable","visibleChange"],[1,"dialog-header"],[1,"dialog-handler"],[1,"fa","fa-lock"],[1,"dialog-title"],r,[1,"dialog-close",3,"click"],["src","assets/images/close.svg","alt","close"],[1,"dialog-container"],[1,"dialog-content"],o,[3,"formGroup"],["header",t,"icon","fa fa-users-cog",3,"collapsible"],["content",""],["header",i,"icon","fa fa-key",3,"collapsible"],["header",a,"icon","fa fa-binoculars",3,"collapsible"],[1,"footer"],[4,"ngIf","ngIfElse"],["buttons",""],["formControlName","canManage",3,"values","collapsed"],["description",""],s,["formControlName","canGrantGroupAccess",3,"collapsed"],["label",""],c,["formControlName","canWatchMembers",3,"collapsed"],u,["size","medium"],["icon","fa fa-times","label",h,"styleClass","alg-button p-button-rounded p-button-danger",3,"onClick"],["icon","fa fa-check","label",d,"styleClass","alg-button p-button-rounded",3,"disabled","onClick"]]},template:function(o,t){1&o&&e.YNc(0,Ha,29,12,"ng-container",0),2&o&&e.Q6J("ngIf",t.userCaption)},dependencies:[g.O5,U.h4,U.$_,Fa.u,Za.z,$.N,Ja.E,O._Y,O.JJ,O.JL,O.sg,O.u,x.zx,oo.V],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-container[_ngcontent-%COMP%]{max-height:65vh;overflow:auto;display:flex;flex-direction:column;padding-left:3.3333rem;padding-right:1.6667rem}.dialog-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}.dialog-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.dialog-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#f1f1f1;border-radius:1rem}.dialog-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#d1d1d1}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.dialog-handler[_ngcontent-%COMP%]{display:flex;background-color:#4a90e2;background-color:var(--base-color);border-left:.3rem solid #33649D;border-left:.3rem solid var(--dark-color);width:5rem;height:3rem;border-top-right-radius:1.5rem;border-bottom-right-radius:1.5rem;position:relative;justify-content:flex-end;align-items:center;padding-right:1rem}.dialog-handler[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem}.dialog-title[_ngcontent-%COMP%]{font-size:2rem;margin-left:1.25rem;color:#4a4a4a;color:var(--dark-text-color);font-family:inherit;font-family:var(--font-family);flex:1}.dialog-close[_ngcontent-%COMP%]{width:4rem;height:4rem;color:#4a90e2;color:var(--base-color);cursor:pointer;position:absolute;right:2rem;top:-.4rem;display:flex;justify-content:center;align-items:center;position:relative;top:0;right:0}"]}),n})();var no=_(6953);let Ka=(()=>{class n{constructor(o){this.http=o}get(o){return this.http.get(`${C.e.apiUrl}/users/by-login/${o}`).pipe((0,w.m)(no.r))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const es={canGrantGroupAccess:!1,canManage:"none",canWatchMembers:!1};let os=(()=>{class n{constructor(o){this.http=o}create(o,t,i=es){return this.http.post(`${C.e.apiUrl}/groups/${o}/managers/${t}`,{can_manage:i.canManage,can_grant_group_access:i.canGrantGroupAccess,can_watch_members:i.canWatchMembers})}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ns=(()=>{class n{constructor(o,t,i){this.getUserByLoginService=o,this.groupCreateManagerService=t,this.actionFeedbackService=i,this.added=new e.vpe,this.state="ready",this.login=""}onClick(){if(!this.managers)throw new Error("Unexpected: Missed managers");if(this.managers.some(t=>t.login===this.login))return void this.actionFeedbackService.error("This user is already a manager of this group.");if(!this.groupData)throw new Error("Unexpected: missed group data");const o=this.groupData.group.id;this.state="loading",this.getUserByLoginService.get(this.login).pipe((0,v.w)(t=>this.groupCreateManagerService.create(o,t.groupId))).subscribe({next:()=>{this.state="ready",this.actionFeedbackService.success("Manager added!"),this.login="",this.added.emit()},error:t=>{if(this.state="error",(0,he.rV)(t))this.actionFeedbackService.error("The login you entered does not exist or is not visible to you.");else if((0,he.Lg)(t))this.actionFeedbackService.error("Unable to add this manager.");else if(this.actionFeedbackService.unexpectedError(),!(t instanceof f.UA))throw t}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Ka),e.Y36(os),e.Y36(G.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-manager-add"]],inputs:{groupData:"groupData",managers:"managers"},outputs:{added:"added"},decls:6,vars:3,consts:function(){let r,o,t;return r="Add a manager",o="Login of a user",t="Add",[["icon","fa fa-sign-in-alt","label",r],[1,"input-wrapper"],["type","text","placeholder",o,3,"ngModel","disabled","ngModelChange"],[1,"icon"],[1,"fa","fa-font"],["styleClass","alg-button p-button-rounded","label",t,"icon","fa fa-plus",3,"disabled","onClick"]]},template:function(o,t){1&o&&(e.TgZ(0,"alg-section-paragraph",0)(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(a){return t.login=a}),e.qZA(),e.TgZ(3,"span",3),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"p-button",5),e.NdJ("onClick",function(){return t.onClick()}),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("ngModel",t.login)("disabled","loading"===t.state),e.xp6(3),e.Q6J("disabled",""===t.login||"loading"===t.state))},dependencies:[ie.s,O.Fj,O.JJ,O.On,x.zx],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.input-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:.5rem;height:3rem;position:relative}.input-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;margin-top:-.5em;font-size:1.2rem;height:1rem;line-height:1rem;color:#787878;color:var(--base-text-color)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:var(--font-family);width:100%;display:flex;background-color:#d3dbe7;border:none;box-shadow:0 .1rem #00000019 inset;border-radius:.5rem;padding-left:2.5rem;margin-right:2rem;font-size:1.2rem;line-height:3rem;color:#787878;color:var(--base-text-color)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-style:italic;color:#767679;font-size:1.2rem}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-style:italic;color:#767679;font-size:1.2rem}"]}),n})();function ts(n,r){1&n&&e._UZ(0,"alg-loading",4)}function rs(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",5),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.fetchData())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function is(n,r){1&n&&e._UZ(0,"th",26)}function as(n,r){if(1&n&&(e.TgZ(0,"tr",14),e.YNc(1,is,1,0,"th",15),e.TgZ(2,"th",16)(3,"div",17)(4,"div",18),e.SDv(5,19),e.qZA()()(),e.TgZ(6,"th",20)(7,"div",17)(8,"div",18),e.SDv(9,21),e.qZA()()(),e.TgZ(10,"th",22)(11,"div",17)(12,"div",18),e.SDv(13,23),e.qZA()()(),e.TgZ(14,"th",22)(15,"div",17)(16,"div",18),e.SDv(17,24),e.qZA()()(),e._UZ(18,"th",25),e.qZA()),2&n){const o=e.oxw(4);e.xp6(1),e.Q6J("ngIf","memberships_and_group"===(null==o.groupData||null==o.groupData.group?null:o.groupData.group.currentUserCanManage))}}function ss(n,r){if(1&n&&(e.TgZ(0,"td",26),e._UZ(1,"p-tableCheckbox",34),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("value",o)}}function _s(n,r){1&n&&e._UZ(0,"i",35)}function cs(n,r){1&n&&e._UZ(0,"i",36)}function ls(n,r){1&n&&e._UZ(0,"i",35)}function gs(n,r){1&n&&e._UZ(0,"i",36)}function ps(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.openPermissionsEditDialog(i))}),e.qZA()}}const to=function(n,r){return{locked:n,unlocked:r}};function ds(n,r){if(1&n&&(e.TgZ(0,"tr",27),e.YNc(1,ss,2,1,"td",15),e.TgZ(2,"td",28)(3,"a",29),e.ALo(4,"groupLink"),e._uU(5),e.ALo(6,"userCaption"),e.qZA()(),e.TgZ(7,"td",20),e._uU(8),e.qZA(),e.TgZ(9,"td",22)(10,"span",30),e.YNc(11,_s,1,0,"i",31),e.YNc(12,cs,1,0,"i",32),e.qZA()(),e.TgZ(13,"td",22)(14,"span",30),e.YNc(15,ls,1,0,"i",31),e.YNc(16,gs,1,0,"i",32),e.qZA()(),e.TgZ(17,"td",25),e.YNc(18,ps,1,0,"button",33),e.qZA()()),2&n){const o=r.$implicit,t=r.rowIndex,i=e.oxw(4);e.Q6J("pSelectableRow",o)("pSelectableRowIndex",t),e.xp6(1),e.Q6J("ngIf","memberships_and_group"===(null==i.groupData||null==i.groupData.group?null:i.groupData.group.currentUserCanManage)),e.xp6(2),e.Q6J("routerLink",e.lcZ(4,13,o)),e.xp6(2),e.hij(" ",o.login?e.lcZ(6,15,o):o.name," "),e.xp6(3),e.hij(" ",o.canManageAsText," "),e.xp6(2),e.Q6J("ngClass",e.WLB(17,to,o.canGrantGroupAccess,!o.canGrantGroupAccess)),e.xp6(1),e.Q6J("ngIf",!o.canGrantGroupAccess),e.xp6(1),e.Q6J("ngIf",o.canGrantGroupAccess),e.xp6(2),e.Q6J("ngClass",e.WLB(20,to,o.canWatchMembers,!o.canWatchMembers)),e.xp6(1),e.Q6J("ngIf",!o.canWatchMembers),e.xp6(1),e.Q6J("ngIf",o.canWatchMembers),e.xp6(2),e.Q6J("ngIf","memberships_and_group"===(null==i.groupData||null==i.groupData.group?null:i.groupData.group.currentUserCanManage))}}function us(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr")(1,"td",38)(2,"div",39)(3,"button",40),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(5);return e.KtG(i.fetchMoreData())}),e.qZA()()()()}if(2&n){const o=e.oxw(4).ngIf;e.xp6(1),e.Q6J("colSpan",6),e.xp6(2),e.Q6J("disabled",o.isFetching)}}function fs(n,r){if(1&n&&(e.YNc(0,us,4,2,"tr",0),e.ALo(1,"async")),2&n){const o=e.oxw(4);e.Q6J("ngIf",e.lcZ(1,1,o.datapager.canLoadMore$))}}function ms(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",42),e._UZ(1,"p-tableHeaderCheckbox"),e.TgZ(2,"span",43),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(3).ngIf,a=e.oxw(2);return e.KtG(a.onSelectAll(i))}),e.SDv(3,44),e.qZA(),e._UZ(4,"span",45),e.TgZ(5,"div",46)(6,"span",47),e.NdJ("click",function(i){e.CHM(o);const a=e.oxw(5);return e.KtG(a.onRemove(i))}),e.TgZ(7,"span"),e.SDv(8,48),e.qZA(),e._UZ(9,"i",49),e.qZA()()()}if(2&n){const o=e.oxw(4).ngIf,t=e.oxw();e.xp6(6),e.ekj("disabled",t.removalInProgress||!o.isReady||0===t.selection.length)}}function hs(n,r){1&n&&e.YNc(0,ms,10,2,"ng-template",null,41,e.W1O)}function Cs(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-grid",10),e.NdJ("selectionChange",function(i){e.CHM(o);const a=e.oxw(3);return e.KtG(a.selection=i)}),e.YNc(1,as,19,1,"ng-template",null,11,e.W1O),e.YNc(3,ds,19,23,"ng-template",null,12,e.W1O),e.YNc(5,fs,2,3,"ng-template",null,13,e.W1O),e.YNc(7,hs,2,0,null,0),e.qZA()}if(2&n){const o=e.oxw().ngIf,t=e.oxw().ngIf,i=e.oxw();e.Q6J("loading",i.removalInProgress||t.isFetching)("data",o)("selection",i.selection)("showGear",!1)("scrollable",!1),e.xp6(7),e.Q6J("ngIf","memberships_and_group"===(null==i.groupData||null==i.groupData.group?null:i.groupData.group.currentUserCanManage))}}function Os(n,r){1&n&&(e.TgZ(0,"div",50),e.SDv(1,51),e.qZA())}function Es(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-group-manager-add",52),e.NdJ("added",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onAdded())}),e.qZA()}if(2&n){const o=e.oxw().ngIf,t=e.oxw(2);e.Q6J("groupData",t.groupData)("managers",o)}}function Ss(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"alg-section",6),e.YNc(2,Cs,8,6,"alg-grid",7),e.YNc(3,Os,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.YNc(5,Es,1,2,"alg-group-manager-add",9),e.BQk()),2&n){const o=r.ngIf,t=e.MAs(4),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",o.length>0)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf","memberships_and_group"===(null==i.groupData||null==i.groupData.group?null:i.groupData.group.currentUserCanManage))}}function Ms(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.YNc(1,ts,1,0,"alg-loading",1),e.YNc(2,rs,1,1,"alg-error",2),e.YNc(3,Ss,6,3,"ng-container",0),e.TgZ(4,"alg-manager-permission-dialog",3),e.NdJ("close",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.closePermissionsEditDialog(i))}),e.qZA(),e.BQk()}if(2&n){const o=r.ngIf,t=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isFetching&&!o.data),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.data),e.xp6(1),e.Q6J("visible",t.isPermissionsEditDialogOpened)("group",null==t.groupData?null:t.groupData.group)("manager",t.dialogManager)}}let Ts=(()=>{class n{constructor(o,t,i,a,s,c){this.getGroupManagersService=o,this.removeGroupManagerService=t,this.actionFeedbackService=i,this.groupDataSource=a,this.userService=s,this.confirmationService=c,this.selection=[],this.removalInProgress=!1,this.isPermissionsEditDialogOpened=!1,this.datapager=new Je.g({fetch:(u,h)=>{if(!this.groupData)throw new Error("unexpected");return this.getGroupManagersService.getGroupManagers(this.groupData.group.id,{limit:u,fromId:h?.id})},pageSize:25,onLoadMoreError:()=>{this.actionFeedbackService.error("Could not load more results, are you connected to the internet?")}}),this.state$=this.datapager.list$.pipe((0,R.sf)(u=>u.map(h=>({...h,canManageAsText:this.getManagerLevel(h)}))))}ngOnChanges(o){this.groupData&&(o.groupData?.previousValue?.group.id!==this.groupData?.group.id?this.fetchData():this.fetchMoreData())}getManagerLevel(o){switch(o.canManage){case"none":return "Read-only";case"memberships":return "Memberships";case"memberships_and_group":return "Memberships and group"}}fetchData(){this.datapager.reset(),this.fetchMoreData()}fetchMoreData(){if(!this.groupData)throw new Error("unexpected");this.datapager.load()}onSelectAll(o){this.selection=this.selection.length!==o.length?o:[]}onRemove(o){if(0===this.selection.length)return;const t=this.userService.session$.getValue()?.groupId;if(!t)throw new Error("Unexpected: Missed current user ID");this.selection.some(i=>i.id===t)?this.confirmationService.confirm({target:o.target||void 0,key:"commonPopup",icon:"pi pi-exclamation-triangle",message:"Are you sure to remove yourself from the managers of this group? You may lose manager access and\n          not be able to restore it.",acceptLabel:"Yes, remove me from the group managers",acceptButtonStyleClass:"p-button-danger",acceptIcon:"fa fa-check",rejectLabel:"No",accept:()=>this.remove()}):this.remove()}remove(){if(!this.groupData)throw new Error("Unexpected: Missed groupData");const o=this.userService.session$.getValue()?.groupId;if(!o)throw new Error("Unexpected: Missed current user ID");const t=this.groupData.group.id,i=this.selection.find(a=>a.id===o)?.id;this.removalInProgress=!0,this.removeGroupManagerService.removeBatch(t,this.selection.filter(a=>a.id!==i).map(a=>a.id),i).subscribe({next:a=>{(function Ua(n,r){r.countSuccess===r.countRequests?n.success("" + r.countSuccess + " manager(s) have been removed"):0===r.countSuccess?n.error("Unable to remove the selected manager(s). "+`${r.errorText||""}`):n.partial("" + r.countSuccess + " manager(s) have been removed, " + (r.countRequests - r.countSuccess) + " could\n       not be removed. "+`${r.errorText||""}`)})(this.actionFeedbackService,a),this.removalInProgress=!1,a.countSuccess>0&&(this.selection=[],this.fetchData())},error:a=>{if(this.removalInProgress=!1,this.actionFeedbackService.unexpectedError(),!(a instanceof f.UA))throw a}})}openPermissionsEditDialog(o){this.isPermissionsEditDialogOpened=!0,this.dialogManager=o}closePermissionsEditDialog(o){this.isPermissionsEditDialogOpened=!1,this.dialogManager=void 0,o.updated&&(this.fetchData(),this.groupDataSource.refetchGroup())}onAdded(){this.fetchData()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(ya),e.Y36(wa),e.Y36(G.C),e.Y36(X),e.Y36(W.o),e.Y36(U.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-manager-list"]],inputs:{groupData:"groupData"},features:[e.TTD],decls:2,vars:3,consts:function(){let r,o,t,i,a,s,c,u,h,d;return r="Error while loading the group managers",o="Managers of this group",t=" Name ",i=" Can Manage ",a=" Can grant group access ",s=" Can watch members ",c="Load more",u=" Select all ",h="Remove",d=" This group has no dedicated managers. ",[[4,"ngIf"],["size","medium",4,"ngIf"],["message",r,3,"showRefreshButton","refresh",4,"ngIf"],[3,"visible","group","manager","close"],["size","medium"],["message",r,3,"showRefreshButton","refresh"],["icon","fa fa-users","label",o],["tableStyle","--group-manager-list","class","slanted-grid","sortMode","single","dataKey","id",3,"loading","data","selection","showGear","scrollable","selectionChange",4,"ngIf","ngIfElse"],["noManagers",""],[3,"groupData","managers","added",4,"ngIf"],["tableStyle","--group-manager-list","sortMode","single","dataKey","id",1,"slanted-grid",3,"loading","data","selection","showGear","scrollable","selectionChange"],["headerTemplate",""],["bodyTemplate",""],["footerTemplate",""],[2,"border","none","height","100%"],["class","thin",4,"ngIf"],[2,"min-width","160px"],[1,"slanted-header"],[1,"slanted-header-content"],t,[2,"min-width","110px"],i,[2,"width","5rem","max-width","5rem"],a,s,[2,"width","11rem","max-width","11rem"],[1,"thin"],[3,"pSelectableRow","pSelectableRowIndex"],["tooltipPosition","top","tooltipStyleClass","tooltip-custom",2,"text-align","left","min-width","160px","padding-left","0.5rem","justify-content","left"],[1,"alg-link",3,"routerLink"],[1,"table-icon",3,"ngClass"],["class","fa fa-times",4,"ngIf"],["class","fa fa-check",4,"ngIf"],["pButton","","type","button","icon","pi pi-pencil","class","p-button-text",3,"click",4,"ngIf"],[1,"p-chkbox",3,"value"],[1,"fa","fa-times"],[1,"fa","fa-check"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-text",3,"click"],[3,"colSpan"],[1,"text-center"],["pButton","","label",c,1,"p-button-rounded",3,"disabled","click"],["summaryTemplate",""],[1,"summary"],[1,"select-all",3,"click"],u,[1,"filler"],[1,"summary-actions"],[3,"click"],h,[1,"fa","fa-trash-alt"],[1,"validation-text"],d,[3,"groupData","managers","added"]]},template:function(o,t){1&o&&(e.YNc(0,Ms,5,6,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.mk,g.O5,S.yS,L.e,be,E.Ei,E.UA,E.Mo,I.q,$.N,x.Hq,ja,ns,g.Ov,_e.s,z.u],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.add-manager-button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem 0;background-color:#dfe7f4;background-color:var(--light-color);margin:2rem -1.6667rem -3rem -5.8333rem;position:relative}.add-manager-button-wrapper[_ngcontent-%COMP%]   .tri-tag[_ngcontent-%COMP%]{left:2.5rem}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]{margin-left:-4.8rem}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   .p-datatable-wrapper[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-left:none;border-right:none;height:13rem;transform:skew(-45deg);transform-origin:0 100%;position:relative;background-color:#f8f8f8;min-width:3.3333rem;flex:auto}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]   .slanted-header[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;transform:translate(50%,50%) skew(45deg) rotate(-45deg);transform-origin:0 50%;text-align:left;padding-left:3rem;color:#8c8c8c;overflow:visible;font-size:1.2rem}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]   .slanted-header-content[_ngcontent-%COMP%]{width:15rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-transform:initial}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]:first-child{background-color:#fff}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#f8f8f8;padding:0;text-align:center;font-size:1.2rem;justify-content:center;height:auto;max-height:none}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff;text-align:center}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{background-color:#fff}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .table-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .table-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .table-icon.edit[_ngcontent-%COMP%]{color:#4a90e2;color:var(--base-color)}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .table-icon.locked[_ngcontent-%COMP%]{color:#9acc68}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .table-icon.unlocked[_ngcontent-%COMP%]{color:#ff001f;color:var(--notify-error-color)}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .can-manage[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .can-manage[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-bottom:.4167rem}[_nghost-%COMP%]   .slanted-grid[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:5rem}.error[_ngcontent-%COMP%]{padding:1rem}.validation-text[_ngcontent-%COMP%]{color:#4a90e2;color:var(--base-color);font-size:1.6rem;text-align:center}"]}),n})();function vs(n,r){if(1&n&&e._UZ(0,"alg-group-manager-list",2),2&n){const o=e.oxw();e.Q6J("groupData",o.groupData)}}function Ns(n,r){1&n&&(e.TgZ(0,"div",3),e.SDv(1,4),e.qZA())}let Gs=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-managers"]],inputs:{groupData:"groupData"},decls:3,vars:2,consts:function(){let r;return r="You are not allowed to see this page.",[[3,"groupData",4,"ngIf","ngIfElse"],["noPermission",""],[3,"groupData"],[1,"error","validation-text"],r]},template:function(o,t){if(1&o&&(e.YNc(0,vs,1,1,"alg-group-manager-list",0),e.YNc(1,Ns,2,0,"ng-template",null,1,e.W1O)),2&o){const i=e.MAs(2);e.Q6J("ngIf",(null==t.groupData||null==t.groupData.group?null:t.groupData.group.isCurrentUserManager)||"none"!==(null==t.groupData||null==t.groupData.group?null:t.groupData.group.currentUserMembership))("ngIfElse",i)}},dependencies:[g.O5,Ts],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.error[_ngcontent-%COMP%]{padding:1rem}.validation-text[_ngcontent-%COMP%]{color:#4a90e2;color:var(--base-color);font-size:1.6rem;text-align:center}"]}),n})();var Oe=_(1633);const Rs=(0,ee.zG)(Oe.Cc,l.wf(Oe.MY),l.wf(Oe.k4)),bs=l.n_({group:l.n_({id:l.Z_,name:l.Z_}),item:l.n_({id:l.Z_,languageTag:l.Z_,requiresExplicitEntry:l.O7,title:l.AG(l.Z_)}),permissions:Rs,sourceGroup:l.n_({id:l.Z_,name:l.Z_})});let As=(()=>{class n{constructor(o){this.http=o}get(o,t=0){const i=(new f.LE).set("descendants",t);return this.http.get(`${C.e.apiUrl}/groups/${o}/granted_permissions`,{params:i}).pipe((0,w.m)(l.IX(bs)))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Us={none:"None",children:"Children",all:"All",all_with_grant:"All with grant",enter:"Enter",content:"Content",content_with_descendants:"Content with descendants",solution:"Solution",solution_with_grant:"Solution with grant",info:"Info",result:"Result",answer:"Answer",answer_with_grant:"Answer with grant"};let Is=(()=>{class n{constructor(){}transform(o){return Us[o]??"No caption"}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=e.Yjl({name:"groupPermissionCaption",type:n,pure:!0}),n})();function ys(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"ul",1)(2,"li",2)(3,"div",3),e._uU(4),e.ALo(5,"groupPermissionCaption"),e.qZA()(),e.TgZ(6,"li",2)(7,"div",3),e._uU(8),e.ALo(9,"groupPermissionCaption"),e.qZA()(),e.TgZ(10,"li",2)(11,"div",3),e._uU(12),e.ALo(13,"date"),e.qZA()(),e.TgZ(14,"li",2)(15,"div",3),e._uU(16),e.ALo(17,"date"),e.qZA()()(),e.BQk()),2&n){const o=e.oxw();e.xp6(4),e.hij("Can View: ",e.lcZ(5,4,o.permissions.canView),""),e.xp6(4),e.hij("Can Grant View: ",e.lcZ(9,6,o.permissions.canGrantView),""),e.xp6(4),e.hij("Can Enter From: ",e.xi3(13,8,o.permissions.canEnterFrom,"d/MM/y"),""),e.xp6(4),e.hij("Until: ",e.xi3(17,11,o.permissions.canEnterUntil,"d/MM/y"),"")}}let xs=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-permissions"]],inputs:{permissions:"permissions"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"captions"],[1,"caption-item"],[1,"caption"]],template:function(o,t){1&o&&e.YNc(0,ys,18,14,"ng-container",0),2&o&&e.Q6J("ngIf",t.permissions)},dependencies:[g.O5,g.uU,Is],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-section[_ngcontent-%COMP%]{background-color:#dfe7f4;background-color:var(--section-color)}.line-clamp-2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@supports (display: -webkit-box){.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}}.captions[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.caption-item[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;color:#f5a623;color:var(--secondary-color);font-weight:700}.caption[_ngcontent-%COMP%]{flex:1;margin-right:2rem;text-align:right}"]}),n})();function Ls(n,r){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"alg-loading",9),e.qZA())}function $s(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",10),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function Ds(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",12)(2,"div"),e._UZ(3,"i",13),e.TgZ(4,"strong"),e.ynx(5),e.SDv(6,14),e.BQk(),e._uU(7),e.qZA()()(),e.BQk()),2&n){const o=e.oxw(2).ngIf;e.xp6(7),e.hij(" ",o.data.string.title,"")}}function ws(n,r){1&n&&(e.TgZ(0,"div"),e.SDv(1,15),e.qZA())}function ks(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ds,8,1,"ng-container",0),e.YNc(2,ws,2,0,"ng-template",null,11,e.W1O),e.BQk()),2&n){const o=e.MAs(3),t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.data)("ngIfElse",o)}}function Fs(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ls,2,0,"div",6),e.YNc(2,$s,1,1,"alg-error",7),e.YNc(3,ks,4,2,"ng-container",4),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady)}}function Zs(n,r){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"alg-loading",9),e.qZA())}function Js(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",17),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshPermissions())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}const Bs=function(n){return{id:n,isUser:!1}};function Ys(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,22),e.qZA(),e.TgZ(3,"a",23),e.ALo(4,"groupLink"),e._uU(5),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit;e.xp6(3),e.Q6J("routerLink",e.lcZ(4,2,e.VKq(4,Bs,o.sourceGroup.id))),e.xp6(2),e.hij(" ",o.sourceGroup.name," ")}}function Qs(n,r){1&n&&(e.TgZ(0,"span"),e.SDv(1,24),e.qZA())}function qs(n,r){if(1&n&&(e.TgZ(0,"div",12)(1,"div"),e._UZ(2,"i",13),e.TgZ(3,"strong"),e._uU(4),e.qZA(),e.YNc(5,Ys,6,6,"ng-container",0),e.YNc(6,Qs,2,0,"ng-template",null,20,e.W1O),e.qZA(),e._UZ(8,"alg-group-permissions",21),e.qZA()),2&n){const o=r.$implicit,t=e.MAs(7),i=e.oxw(5);e.xp6(4),e.hij(" ",o.item.title,". "),e.xp6(1),e.Q6J("ngIf",o.sourceGroup.id!==(null==i.group?null:i.group.id)&&o.group.id!==(null==i.group?null:i.group.id))("ngIfElse",t),e.xp6(3),e.Q6J("permissions",o.permissions)}}function zs(n,r){if(1&n&&(e.ynx(0),e.YNc(1,qs,9,4,"div",19),e.BQk()),2&n){const o=e.oxw(2).ngIf;e.xp6(1),e.Q6J("ngForOf",o.data)}}function Xs(n,r){1&n&&(e.TgZ(0,"div"),e.SDv(1,25),e.qZA())}function Vs(n,r){if(1&n&&(e.ynx(0),e.YNc(1,zs,2,1,"ng-container",0),e.YNc(2,Xs,2,0,"ng-template",null,18,e.W1O),e.BQk()),2&n){const o=e.MAs(3),t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.data.length>1)("ngIfElse",o)}}function Ws(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Zs,2,0,"div",6),e.YNc(2,Js,1,1,"alg-error",16),e.YNc(3,Vs,4,2,"ng-container",4),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady)}}function Hs(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"alg-section",2),e.DtL(2,3),e.YNc(3,Fs,4,3,"ng-container",4),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"alg-section",5),e.YNc(6,Ws,4,3,"ng-container",4),e.ALo(7,"async"),e.qZA(),e.BQk()),2&n){const o=e.oxw();e.xp6(1),e.pQV(null==o.group?null:o.group.name),e.QtT(2),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,3,o.rootActivityState$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,5,o.permissionState$))}}function js(n,r){1&n&&(e.TgZ(0,"p",26),e.SDv(1,27),e.qZA())}let Ks=(()=>{class n{constructor(o,t){this.getItemByIdService=o,this.grantedPermissionsService=t,this.group$=new J.t(1),this.refresh$=new y.x,this.rootActivityState$=this.group$.pipe((0,v.w)(({rootActivityId:i})=>i?this.getItemByIdService.get(i):(0,P.of)(null)),(0,R.iS)({resetter:this.refresh$})),this.permissionsRefresh$=new y.x,this.permissionState$=this.group$.pipe((0,v.w)(i=>this.grantedPermissionsService.get(i.id)),(0,R.iS)({resetter:this.permissionsRefresh$}))}ngOnChanges(){this.group&&this.group$.next(this.group)}ngOnDestroy(){this.group$.complete(),this.refresh$.complete()}refresh(){this.refresh$.next()}refreshPermissions(){this.permissionsRefresh$.next()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Ke.G),e.Y36(As))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-access"]],inputs:{group:"group"},features:[e.TTD],decls:3,vars:2,consts:function(){let r,o,t,i,a,s,c,u,h,d;return r="Activity associated to " + "\ufffd0\ufffd" + "",o="Specific permissions given to the group on content",t="Error while loading the root activity.",i="Root activity:",a="This group has no root activity.",s="Error while loading permissions.",c="Given by",u="Given by this group",h="This group has no specific permissions.",d="You are not allowed to manage permissions of this group.",[[4,"ngIf","ngIfElse"],["noAccess",""],["icon","fa fa-users",6,"label"],["label",r],[4,"ngIf"],["icon","fa fa-book","label",o],["class","spinner",4,"ngIf"],["message",t,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],[1,"spinner"],["size","medium"],["message",t,"refreshButtonType","refresh",3,"showRefreshButton","refresh"],["noActivity",""],[1,"item"],[1,"icon","fa","fa-folder"],i,a,["message",s,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["message",s,"refreshButtonType","refresh",3,"showRefreshButton","refresh"],["noPermissions",""],["class","item",4,"ngFor","ngForOf"],["currentGroup",""],[3,"permissions"],c,[1,"alg-link",3,"routerLink"],u,h,[1,"error","alg-error-text"],d]},template:function(o,t){if(1&o&&(e.YNc(0,Hs,8,7,"ng-container",0),e.YNc(1,js,2,0,"ng-template",null,1,e.W1O)),2&o){const i=e.MAs(2);e.Q6J("ngIf",null==t.group?null:t.group.currentUserCanGrantGroupAccess)("ngIfElse",i)}},dependencies:[g.sg,g.O5,S.yS,L.e,I.q,$.N,xs,g.Ov,_e.s],styles:["[_ngcontent-%COMP%]:root{--base-color: #4A90E2;--base-bk-color: #F1F2F7;--base-text-color: #787878;--secondary-color: #F5A623;--warning-color: #f5a623;--danger-color: #ff001f;--secondary-btn-color: #4a4a4a;--base-color-hover: #779CCA;--base-dark-color-hover: #3B73B4;--hover-mask: rgba(white, .1);--light-text-color: #dbdbdb;--light-color: #DFE7F4;--light-border-color: #EBEBEB;--dark-text-color: #4A4A4A;--dark-color: #33649D;--dark-base-color: #2E5E95;--dark-secondary-color: rgb(195,131,27);--dark-black-color: #464646;--dark-transparency-color: rgba(74,74,74,.1);--input-transparency-color: rgba(0,0,0,.05);--nav-bk-color: #4E4E4E;--nav-bg-color: #4A90E2;--nav-bg-secondary-color: #3B73B4;--nav-bg-child-color: #3c7ac1;--nav-child-border-color: #2f6fc1;--nav-bg-handle-color: #3B73B4;--nav-border-color: #2e5e95;--nav-border-secondary-color: #4587D4;--nav-branch-border-color: #2e5e95;--nav-handle-icon-color: rgb(99, 150, 209);--nav-bg-hover-color: #779CCA;--nav-bg-hover-secondary-color: #578CCA;--nav-text-color: #4A90E2;--nav-dark-bg-color: #373738;--nav-dark-bg-secondary-color: #474747;--nav-dark-bg-child-color: #2c2b2b;--nav-dark-child-border-color: #313132;--nav-dark-bg-handle-color: #2C2C2C;--nav-dark-border-color: #313132;--nav-dark-border-secondary-color: #313132;--nav-dark-branch-border-color: rgba(255, 255, 255, .6);--nav-dark-handle-icon-color: rgba(255, 255, 255, .6);--nav-dark-bg-hover-color: #373738;--nav-dark-bg-hover-secondary-color: #676767;--nav-dark-text-color: #464646;--section-color: #DFE7F4;--section-border-color: #D1D9E5;--section-danger-color: #F2D9E0;--section-danger-handle-color: #FF001F;--section-danger-handle-border-color: #B20015;--section-warning-color: #fde8c8;--section-warning-handle-color: #f9b42c;--section-warning-handle-border-color: #ba861c;--session-left-view-color: #F2F2F2;--session-right-view-color: #E5E5E5;--notify-error-color: #FF001F;--lock-border-color: #c1c2c6}.item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 0;border-bottom:.1rem solid rgba(74,74,74,.1)}.item[_ngcontent-%COMP%]:last-child{border-bottom:none}.icon[_ngcontent-%COMP%]{margin-right:1rem;color:#4a90e2;color:var(--base-color)}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.error[_ngcontent-%COMP%]{margin:0;padding:1rem}"]}),n})();const e_=["overviewTab"],o_=["compositionTab"],n_=["adminTab"],t_=["settingsTab"],r_=["accessTab"],i_=["groupEdit"];function a_(n,r){1&n&&e._UZ(0,"div",24)}function s_(n,r){if(1&n&&e._UZ(0,"alg-group-header",25),2&n){const o=e.oxw(2).ngIf;e.Q6J("groupData",o.data)}}function __(n,r){if(1&n&&e._UZ(0,"alg-pending-join-requests",26),2&n){const o=e.oxw().ngIf;e.Q6J("groupId",o.id)}}function c_(n,r){if(1&n&&e._UZ(0,"alg-group-indicator",27),2&n){const o=e.oxw().ngIf;e.Q6J("group",o)}}function l_(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-group-overview",28),e.NdJ("groupRefreshRequired",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onGroupRefreshRequired())})("leftGroup",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshNav())}),e.qZA()}if(2&n){const o=e.oxw().ngIf;e.Q6J("group",o)}}function g_(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-group-composition",29),e.NdJ("groupRefreshRequired",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.onGroupRefreshRequired())})("addedGroup",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshNav())})("removedGroup",function(){e.CHM(o);const i=e.oxw(3);return e.KtG(i.refreshNav())}),e.qZA()}if(2&n){const o=e.oxw(2).ngIf;e.Q6J("groupData",o.data)}}function p_(n,r){if(1&n&&e._UZ(0,"alg-group-managers",25),2&n){const o=e.oxw(2).ngIf;e.Q6J("groupData",o.data)}}function d_(n,r){if(1&n&&e._UZ(0,"alg-group-access",30),2&n){const o=e.oxw().ngIf;e.Q6J("group",o)}}function u_(n,r){1&n&&e._UZ(0,"alg-group-edit",null,31)}const f_=function(){return{matrixParams:"ignored",queryParams:"ignored",paths:"exact",fragment:"ignored"}};function m_(n,r){if(1&n&&(e.ynx(0),e.YNc(1,a_,1,0,"div",2),e.YNc(2,s_,1,1,"alg-group-header",3),e.ALo(3,"async"),e.YNc(4,__,1,1,"alg-pending-join-requests",4),e.YNc(5,c_,1,1,"alg-group-indicator",5),e.TgZ(6,"div",6)(7,"div",7)(8,"a",8,9),e.SDv(10,10),e.qZA(),e.TgZ(11,"a",11,12),e.SDv(13,13),e.qZA(),e.TgZ(14,"a",11,14),e.SDv(16,15),e.qZA(),e.TgZ(17,"a",11,16),e.SDv(19,17),e.qZA(),e.TgZ(20,"a",11,18),e.SDv(22,19),e.qZA()()(),e.TgZ(23,"div",20),e.YNc(24,l_,1,1,"alg-group-overview",21),e.YNc(25,g_,1,1,"alg-group-composition",22),e.YNc(26,p_,1,1,"alg-group-managers",3),e.YNc(27,d_,1,1,"alg-group-access",23),e.YNc(28,u_,2,0,"alg-group-edit",0),e.qZA(),e.BQk()),2&n){const o=r.ngIf,t=e.MAs(9),i=e.MAs(12),a=e.MAs(15),s=e.MAs(18),c=e.MAs(21),u=e.oxw().ngIf,h=e.oxw();let d;e.xp6(1),e.Q6J("ngIf",u.isFetching),e.xp6(1),e.Q6J("ngIf",!(null!=(d=e.lcZ(3,30,h.fullFrame$))&&d.active)),e.xp6(2),e.Q6J("ngIf",o.isCurrentUserManager&&"none"!==o.currentUserCanManage),e.xp6(1),e.Q6J("ngIf","none"!==o.currentUserManagership||"none"!==o.currentUserMembership),e.xp6(1),e.Q6J("hidden",!(o.isCurrentUserManager||"none"!==o.currentUserMembership||a.isActive||null!=s&&s.isActive||i.isActive||c.isActive)),e.xp6(2),e.ekj("active",t.isActive),e.Q6J("routerLink","./")("routerLinkActiveOptions",e.DdM(32,f_)),e.xp6(3),e.ekj("active",i.isActive),e.Q6J("hidden",!(o.isCurrentUserManager||null!=i&&i.isActive))("routerLink","./members"),e.xp6(3),e.ekj("active",a.isActive),e.Q6J("hidden",!(o.isCurrentUserManager||"none"!==o.currentUserMembership||null!=a&&a.isActive))("routerLink","./managers"),e.xp6(3),e.ekj("active",s.isActive),e.Q6J("hidden",!(o.currentUserCanGrantGroupAccess||null!=s&&s.isActive))("routerLink","./access"),e.xp6(3),e.ekj("active",c.isActive),e.Q6J("hidden",!(o.canCurrentUserManageGroup||null!=c&&c.isActive))("routerLink","./settings"),e.xp6(4),e.Q6J("ngIf",(null==t?null:t.isActive)||!t&&"none"===o.currentUserManagership&&"none"===o.currentUserMembership),e.xp6(1),e.Q6J("ngIf",!(null==i||!i.isActive)),e.xp6(1),e.Q6J("ngIf",!(null==a||!a.isActive)),e.xp6(1),e.Q6J("ngIf",!(null==s||!s.isActive)),e.xp6(1),e.Q6J("ngIf",!(null==c||!c.isActive))}}function h_(n,r){1&n&&e._UZ(0,"alg-loading")}function C_(n,r){1&n&&(e.ynx(0),e.SDv(1,35),e.BQk())}function O_(n,r){1&n&&(e.ynx(0),e.SDv(1,36),e.BQk())}function E_(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",32),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onGroupRefreshRequired())}),e.YNc(1,C_,2,0,"ng-container",33),e.YNc(2,O_,2,0,"ng-template",null,34,e.W1O),e.qZA()}if(2&n){const o=e.MAs(3),t=e.oxw().ngIf;e.Q6J("showRefreshButton",403!==t.error.status),e.xp6(1),e.Q6J("ngIf",403===t.error.status)("ngIfElse",o)}}function S_(n,r){if(1&n&&(e.ynx(0),e.YNc(1,m_,29,33,"ng-container",0),e.YNc(2,h_,1,0,"alg-loading",0),e.YNc(3,E_,4,3,"alg-error",1),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",null==o.data?null:o.data.group),e.xp6(1),e.Q6J("ngIf",o.isFetching&&!o.data),e.xp6(1),e.Q6J("ngIf",o.isError)}}let M_=(()=>{class n{constructor(o,t,i){this.groupDataSource=o,this.layoutService=t,this.currentContentService=i,this.state$=this.groupDataSource.state$.pipe((0,R.sf)(a=>({...a,group:(0,se.pL)(a.group)}))),this.fullFrame$=this.layoutService.fullFrame$}isDirty(){return!!this.groupEdit?.isDirty()}refreshNav(){this.currentContentService.forceNavMenuReload()}onGroupRefreshRequired(){this.groupDataSource.refetchGroup(),this.refreshNav()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(X),e.Y36(K.P),e.Y36(Q.u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-details"]],viewQuery:function(o,t){if(1&o&&(e.Gf(e_,5),e.Gf(o_,5),e.Gf(n_,5),e.Gf(t_,5),e.Gf(r_,5),e.Gf(i_,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.overviewTab=i.first),e.iGM(i=e.CRH())&&(t.compositionTab=i.first),e.iGM(i=e.CRH())&&(t.adminTab=i.first),e.iGM(i=e.CRH())&&(t.settingsTab=i.first),e.iGM(i=e.CRH())&&(t.accessTab=i.first),e.iGM(i=e.CRH())&&(t.groupEdit=i.first)}},decls:2,vars:3,consts:function(){let r,o,t,i,a,s,c;return r=" Overview ",o=" Composition ",t=" Managers ",i=" Access ",a=" Settings ",s=" You are not allowed to view this group page. ",c="Error while loading the group info",[[4,"ngIf"],["class","dark","refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["class","block-ui",4,"ngIf"],[3,"groupData",4,"ngIf"],[3,"groupId",4,"ngIf"],["class","group-indicator",3,"group",4,"ngIf"],[3,"hidden"],[1,"nav-tab"],["routerLinkActive","",1,"nav-tab-item",3,"routerLink","routerLinkActiveOptions"],["overviewTab","routerLinkActive"],r,["routerLinkActive","",1,"nav-tab-item",3,"hidden","routerLink"],["compositionTab","routerLinkActive"],o,["adminTab","routerLinkActive"],t,["accessTab","routerLinkActive"],i,["settingsTab","routerLinkActive"],a,[1,"bg-white"],[3,"group","groupRefreshRequired","leftGroup",4,"ngIf"],[3,"groupData","groupRefreshRequired","addedGroup","removedGroup",4,"ngIf"],[3,"group",4,"ngIf"],[1,"block-ui"],[3,"groupData"],[3,"groupId"],[1,"group-indicator",3,"group"],[3,"group","groupRefreshRequired","leftGroup"],[3,"groupData","groupRefreshRequired","addedGroup","removedGroup"],[3,"group"],["groupEdit",""],["refreshButtonType","refresh",1,"dark",3,"showRefreshButton","refresh"],[4,"ngIf","ngIfElse"],["otherError",""],s,c]},template:function(o,t){1&o&&(e.YNc(0,S_,4,3,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,S.yS,S.Od,I.q,$.N,At,dr,Fi,Ca,Ie,Aa,Gs,Ks,g.Ov],styles:["[_nghost-%COMP%]{position:relative;display:block}.group-indicator[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}"]}),n})();var P_=_(5570);const v_=l.IX(l.Z_),N_=l.n_({path:v_});let G_=(()=>{class n{constructor(o){this.http=o}getGroupPath(o){return this.http.get(`${C.e.apiUrl}/groups/${o}/path-from-root`).pipe((0,w.m)(N_),(0,p.U)(t=>t.path.slice(0,-1)))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ro="Groups";let R_=(()=>{class n{constructor(o,t,i,a,s,c,u){this.activatedRoute=o,this.currentContent=t,this.modeService=i,this.layoutService=a,this.groupDataSource=s,this.groupRouter=c,this.getGroupPath=u,this.subscriptions=[],this.hasRedirected=!1,this.layoutService.configure({fullFrameActive:!1}),this.activatedRoute.paramMap.subscribe(h=>this.fetchGroupAtRoute(h)),this.subscriptions.push(this.groupDataSource.state$.pipe((0,R.RI)(),(0,p.U)(({group:h,route:d,breadcrumbs:m})=>(0,j.Ge)({route:d,breadcrumbs:{category:ro,path:m.map(T=>({title:T.name,navigateTo:()=>this.groupRouter.url(T.route)})),currentPageIdx:m.length-1},title:h.name}))).subscribe(h=>this.currentContent.replace(h)),this.modeService.modeActions$.pipe((0,V.h)(h=>[Z.mw.StartEditing,Z.mw.StopEditing].includes(h)),(0,P_.V)(this.currentContent.content$.pipe((0,V.h)(j.E4)))).subscribe(([h,d])=>{this.groupRouter.navigateTo(d.route,{page:[h===Z.mw.StartEditing?"edit":"details"]})}))}ngOnDestroy(){this.currentContent.clear(),this.subscriptions.forEach(o=>o.unsubscribe())}fetchGroupAtRoute(o){const t=(0,N.BZ)(o);if((0,N.hn)(t)){if(!t.id)throw new Error("a group id is required to open group details");if(this.hasRedirected)throw new Error("too many redirections");this.solveMissingPathAttempt(t.id)}else this.hasRedirected=!1,this.currentContent.replace((0,j.Ge)({route:t,breadcrumbs:{category:ro,path:[],currentPageIdx:-1}})),this.groupDataSource.fetchGroup(t)}solveMissingPathAttempt(o){this.getGroupPath.getGroupPath(o).subscribe({next:t=>{this.hasRedirected=!0,this.groupRouter.navigateTo((0,N.p6)({id:o,isUser:!1},t),{navExtras:{replaceUrl:!0}})},error:()=>{this.groupRouter.navigateTo((0,N.p6)({id:o,isUser:!1},[]),{navExtras:{replaceUrl:!0}})}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(S.gz),e.Y36(Q.u),e.Y36(Z.dT),e.Y36(K.P),e.Y36(X),e.Y36(ae.u),e.Y36(G_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-group-by-id"]],features:[e._Bn([X])],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"router-outlet")},dependencies:[S.lC]}),n})();var b_=_(1203),A_=_(1339),U_=_(654);function I_(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"p-button",5),e.NdJ("click",function(){const a=e.CHM(o).ngIf,s=e.oxw();return e.KtG(s.onModify(a.groupId))}),e.qZA()()(),e.TgZ(6,"div",1)(7,"alg-section",6)(8,"ul",7)(9,"li",8)(10,"span",9),e.SDv(11,10),e.qZA(),e.TgZ(12,"span",11),e._uU(13),e.qZA()(),e.TgZ(14,"li",8)(15,"span",9),e.SDv(16,12),e.qZA(),e.TgZ(17,"span",11),e._uU(18),e.qZA()(),e.TgZ(19,"li",8)(20,"span",9),e.SDv(21,13),e.qZA(),e.TgZ(22,"span",11),e._uU(23),e.qZA()(),e.TgZ(24,"li",8)(25,"span",9),e.SDv(26,14),e.qZA(),e.TgZ(27,"span",11),e._uU(28),e.qZA()(),e.TgZ(29,"li",8)(30,"span",9),e.SDv(31,15),e.qZA(),e.TgZ(32,"span",11),e._uU(33),e.qZA()(),e.TgZ(34,"li",8)(35,"span",9),e.SDv(36,16),e.qZA(),e.TgZ(37,"span",11),e._uU(38),e.qZA()(),e.TgZ(39,"li",8)(40,"span",9),e.SDv(41,17),e.qZA(),e.TgZ(42,"span",11),e._uU(43),e.qZA()(),e.TgZ(44,"li",8)(45,"span",9),e.SDv(46,18),e.qZA(),e.TgZ(47,"span",11),e._uU(48),e.qZA()()()()(),e.TgZ(49,"div",1)(50,"alg-section",19)(51,"ul",7)(52,"li",8)(53,"span",9),e.SDv(54,20),e.qZA(),e.TgZ(55,"span",11),e._uU(56),e.qZA()(),e.TgZ(57,"li",8)(58,"span",9),e.SDv(59,21),e.qZA(),e.TgZ(60,"span",11),e._uU(61),e.qZA()()()()(),e.TgZ(62,"div",1)(63,"alg-section",22)(64,"ul",7)(65,"li",8)(66,"span",9),e.SDv(67,23),e.qZA(),e.TgZ(68,"span",11),e._uU(69),e.qZA()()()()(),e.BQk()}if(2&n){const o=r.ngIf;e.xp6(13),e.Oqu(o.login),e.xp6(5),e.Oqu(o.firstName),e.xp6(5),e.Oqu(o.lastName),e.xp6(5),e.Oqu(o.birthDate),e.xp6(5),e.Oqu(o.studentId),e.xp6(5),e.Oqu(o.sex),e.xp6(5),e.Oqu(o.countryCode),e.xp6(5),e.Oqu(o.webSite),e.xp6(8),e.Oqu(o.grade),e.xp6(5),e.Oqu(o.graduationYear),e.xp6(8),e.Oqu(o.email)}}let y_=(()=>{class n{constructor(o,t,i){this.userSessionService=o,this.actionFeedbackService=t,this.location=i,this.currentUser$=this.userSessionService.userProfile$}onModify(o){const t=window.location.origin+this.location.prepareExternalUrl("update-profile.html");window.open(`${C.e.oauthServerUrl}?all=1&client_id=${o}&redirect_uri=${encodeURI(t)}`,void 0,"popup,width=800,height=640");const i=()=>{this.userSessionService.refresh().subscribe({error:a=>{if(this.actionFeedbackService.unexpectedError(),!(a instanceof f.UA))throw a}}),window.removeEventListener("profileUpdated",i)};window.addEventListener("profileUpdated",i)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(W.o),e.Y36(G.C),e.Y36(g.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-current-user"]],decls:2,vars:3,consts:function(){let r,o,t,i,a,s,c,u,h,d,m,T,H,io,ao,so;return r=" The following information is what we receive from France-IOI login platform. ",o="Modify",t="Personal Information",i="Login",a="First Name",s="Last Name",c="Birth date",u="Student ID",h="Gender",d="Nationality",m="Personal Web page",T="School Information",H="Your grade",io="Highschool graduation year",ao="Contact Information",so="Primary email",[[4,"ngIf"],[1,"bg-white"],[1,"modify-section"],[1,"flex-1","modify-description"],r,["styleClass","alg-button p-button-rounded-full","label",o,"icon","fa fa-pen",3,"click"],["label",t,"icon","fa fa-users"],[1,"alg-data-list"],[1,"alg-data-list-item"],[1,"alg-data-list-item-caption"],i,[1,"alg-data-list-item-value"],a,s,c,u,h,d,m,["label",T,"icon","fa fa-graduation-cap"],H,io,["label",ao,"icon","fa fa-envelope"],so]},template:function(o,t){1&o&&(e.YNc(0,I_,70,11,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.currentUser$))},dependencies:[g.O5,L.e,x.zx,g.Ov],styles:[".modify-section[_ngcontent-%COMP%]{padding:1rem 2rem;display:flex;align-items:center}.modify-button[_ngcontent-%COMP%]{width:10rem}.modify-description[_ngcontent-%COMP%]{color:#787878}"]}),n})();const x_=["user","","route",""];function L_(n,r){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e.TgZ(2,"a",8),e._uU(3),e.qZA()()),2&n){const o=e.oxw(2);e.xp6(2),e.uIk("href",o.user.webSite,e.LSH),e.xp6(1),e.Oqu(o.user.webSite)}}function $_(n,r){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.user.freeText," ")}}function D_(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-page-navigator",10),e.NdJ("edit",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onEditButtonClicked())})("watch",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onStartWatchButtonClicked())})("stopWatch",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.onStopWatchButtonClicked())}),e.ALo(1,"async"),e.qZA()}if(2&n){const o=e.oxw(2);e.Q6J("allowEditing",!1)("allowWatching",!!o.user.currentUserCanWatchUser&&!o.user.isCurrentUser)("isWatched",!!e.lcZ(1,4,o.isCurrentGroupWatched$))("allowFullScreen",!1)}}function w_(n,r){if(1&n&&(e.TgZ(0,"div",1)(1,"div")(2,"div",2),e._uU(3),e.ALo(4,"userCaption"),e.qZA(),e.YNc(5,L_,4,2,"div",3),e.YNc(6,$_,2,1,"div",4),e.qZA(),e.YNc(7,D_,2,6,"alg-page-navigator",5),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,o.user)," "),e.xp6(2),e.Q6J("ngIf",o.user.webSite),e.xp6(1),e.Q6J("ngIf",o.user.freeText),e.xp6(1),e.Q6J("ngIf",!0)}}let k_=(()=>{class n{constructor(o,t){this.groupWatchingService=o,this.modeService=t,this.isCurrentGroupWatched$=this.groupWatchingService.watchedGroup$.pipe((0,p.U)(i=>!(!i||i.route.id!==this.user?.groupId)))}onEditButtonClicked(){this.modeService.modeActions$.next(Z.mw.StartEditing)}onStartWatchButtonClicked(){this.groupWatchingService.startUserWatching(this.route,this.user)}onStopWatchButtonClicked(){this.groupWatchingService.stopWatching()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(ue.y),e.Y36(Z.dT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-user-header","user","","route",""]],inputs:{user:"user",route:"route"},attrs:x_,decls:1,vars:1,consts:[["class","alg-page-header",4,"ngIf"],[1,"alg-page-header"],[1,"alg-page-header-title"],["class","alg-page-header-subtitle",4,"ngIf"],["class","free-text alg-page-header-subtitle",4,"ngIf"],[3,"allowEditing","allowWatching","isWatched","allowFullScreen","edit","watch","stopWatch",4,"ngIf"],[1,"alg-page-header-subtitle"],[1,"fa","fa-external-link-alt"],["target","_blank",1,"web-site","alg-link","base-color"],[1,"free-text","alg-page-header-subtitle"],[3,"allowEditing","allowWatching","isWatched","allowFullScreen","edit","watch","stopWatch"]],template:function(o,t){1&o&&e.YNc(0,w_,8,6,"div",0),2&o&&e.Q6J("ngIf",t.user)},dependencies:[g.O5,we._,g.Ov,z.u],styles:[".web-site[_ngcontent-%COMP%]{margin-left:.4rem}.free-text[_ngcontent-%COMP%]{margin-top:1rem}"]}),n})();var F_=_(7305),Z_=_(2891);function J_(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"alg-section",2)(3,"ul",3)(4,"li",4)(5,"span",5),e.SDv(6,6),e.qZA(),e.TgZ(7,"span",7)(8,"alg-language-picker",8),e.NdJ("changeLang",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.onChangeLang(i))}),e.qZA()()()()()(),e.BQk()}if(2&n){const o=r.ngIf;e.xp6(8),e.Q6J("defaultLang",o.defaultLanguage)("redirectOnChange",!1)}}let B_=(()=>{class n{constructor(o,t,i){this.userSessionService=o,this.actionFeedbackService=t,this.localeService=i,this.currentUser$=this.userSessionService.userProfile$}onChangeLang(o){this.update({default_language:o})}update(o){this.userSessionService.updateCurrentUser(o).subscribe({next:()=>{this.actionFeedbackService.success("Changes successfully saved."),o.default_language&&this.localeService.navigateTo(o.default_language)},error:t=>{if(this.actionFeedbackService.unexpectedError(),!(t instanceof f.UA))throw t}})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(W.o),e.Y36(G.C),e.Y36(F_.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-platform-settings"]],decls:2,vars:3,consts:function(){let r,o;return r="Platform settings",o="Platform language",[[4,"ngIf"],[1,"bg-white"],["label",r,"icon","fa fa-cog"],[1,"alg-data-list"],[1,"alg-data-list-item"],[1,"alg-data-list-item-caption"],o,[1,"alg-data-list-item-value"],["styleClass","alg-language-picker-dropdown base",3,"defaultLang","redirectOnChange","changeLang"]]},template:function(o,t){1&o&&(e.YNc(0,J_,9,2,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.currentUser$))},dependencies:[g.O5,L.e,Z_._,g.Ov]}),n})();const Y_=["progress"],Q_=["personalData"];function q_(n,r){1&n&&e._UZ(0,"alg-loading")}function z_(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"alg-error",2),e.NdJ("refresh",function(){e.CHM(o);const i=e.oxw(2);return e.KtG(i.refresh())}),e.qZA()}2&n&&e.Q6J("showRefreshButton",!0)}function X_(n,r){if(1&n&&e._UZ(0,"alg-user-header",5),2&n){const o=e.oxw(2).ngIf;e.Q6J("user",o.data.user)("route",o.data.route)}}const Ee=function(){return{matrixParams:"ignored",queryParams:"ignored",paths:"exact",fragment:"ignored"}};function V_(n,r){if(1&n&&(e.TgZ(0,"nav",6)(1,"a",7,8),e.SDv(3,9),e.qZA(),e.TgZ(4,"a",10,11),e.SDv(6,12),e.ALo(7,"async"),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"a",10,13),e.SDv(11,14),e.ALo(12,"async"),e.ALo(13,"async"),e.qZA()()),2&n){const o=e.MAs(2),t=e.MAs(5),i=e.MAs(10),a=e.oxw(2).ngIf,s=e.oxw();e.xp6(1),e.ekj("active",o.isActive),e.Q6J("routerLink","./")("routerLinkActiveOptions",e.DdM(22,Ee)),e.xp6(3),e.ekj("active",t.isActive),e.Q6J("routerLink","./personal-data")("routerLinkActiveOptions",e.DdM(23,Ee))("hidden",e.lcZ(7,14,s.currentUserGroupId$)!==a.data.user.groupId&&"personal-data"!==e.lcZ(8,16,s.activeRoute$)),e.xp6(5),e.ekj("active",i.isActive),e.Q6J("routerLink","./settings")("routerLinkActiveOptions",e.DdM(24,Ee))("hidden",e.lcZ(12,18,s.currentUserGroupId$)!==a.data.user.groupId&&"settings"!==e.lcZ(13,20,s.activeRoute$))}}function W_(n,r){if(1&n&&(e.TgZ(0,"div",17)(1,"alg-section",18),e._UZ(2,"alg-group-log-view",19),e.qZA()()),2&n){const o=r.ngIf,t=e.oxw(4).ngIf;e.xp6(2),e.Q6J("groupId",o!==t.data.user.groupId?t.data.user.groupId:void 0)("showUserColumn",!1)}}function H_(n,r){if(1&n&&(e.ynx(0),e.YNc(1,W_,3,2,"div",16),e.ALo(2,"async"),e.BQk()),2&n){const o=e.oxw(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.currentUserGroupId$))}}function j_(n,r){1&n&&(e.ynx(0),e._UZ(1,"alg-current-user"),e.BQk())}function K_(n,r){if(1&n&&(e.ynx(0),e.YNc(1,j_,2,0,"ng-container",20),e.ALo(2,"async"),e.BQk()),2&n){e.oxw();const o=e.MAs(5),t=e.oxw(2).ngIf,i=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.currentUserGroupId$)===t.data.user.groupId)("ngIfElse",o)}}function ec(n,r){1&n&&(e.ynx(0),e._UZ(1,"alg-platform-settings"),e.BQk())}function oc(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ec,2,0,"ng-container",20),e.ALo(2,"async"),e.BQk()),2&n){e.oxw();const o=e.MAs(5),t=e.oxw(2).ngIf,i=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.currentUserGroupId$)===t.data.user.groupId)("ngIfElse",o)}}function nc(n,r){1&n&&(e.TgZ(0,"div",17),e._UZ(1,"alg-error",21),e.qZA())}function tc(n,r){if(1&n&&(e.ynx(0),e.YNc(1,H_,3,3,"ng-container",0),e.YNc(2,K_,3,4,"ng-container",0),e.YNc(3,oc,3,4,"ng-container",0),e.YNc(4,nc,2,0,"ng-template",null,15,e.W1O),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf","progress"===o),e.xp6(1),e.Q6J("ngIf","personal-data"===o),e.xp6(1),e.Q6J("ngIf","settings"===o)}}function rc(n,r){if(1&n&&(e.ynx(0),e.YNc(1,X_,1,2,"alg-user-header",3),e.ALo(2,"async"),e.YNc(3,V_,14,25,"nav",4),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.YNc(7,tc,6,3,"ng-container",0),e.ALo(8,"async"),e.BQk()),2&n){const o=e.oxw().ngIf,t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",!(null!=(i=e.lcZ(2,3,t.fullFrame$))&&i.active)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,t.currentUserGroupId$)===o.data.user.groupId||"personal-data"===e.lcZ(5,7,t.activeRoute$)||"settings"===e.lcZ(6,9,t.activeRoute$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,11,t.activeRoute$))}}function ic(n,r){if(1&n&&(e.ynx(0),e.YNc(1,q_,1,0,"alg-loading",0),e.YNc(2,z_,1,1,"alg-error",1),e.YNc(3,rc,9,13,"ng-container",0),e.BQk()),2&n){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.isFetching),e.xp6(1),e.Q6J("ngIf",o.isError),e.xp6(1),e.Q6J("ngIf",o.isReady)}}let ac=(()=>{class n{constructor(o,t,i,a,s,c,u,h){this.route=o,this.router=t,this.getUserService=i,this.userSessionService=a,this.currentContent=s,this.layoutService=c,this.groupRouter=u,this.getGroupBreadcrumbsService=h,this.refresh$=new y.x,this.userRoute$=this.route.paramMap.pipe((0,p.U)(d=>{const{id:m,path:T}=(0,N.BZ)(d);if(!m)throw new Error("expected user id is user page path");const H={id:m,isUser:!0};return T?(0,N.p6)(H,T):(0,N.cw)(H)})),this.state$=this.userRoute$.pipe((0,v.w)(d=>this.getUserService.getForId(d.id).pipe((0,p.U)(m=>({route:d,user:m})))),(0,R.iS)({resetter:this.refresh$}),(0,b_.B)()),this.currentUserGroupId$=this.userSessionService.userProfile$.pipe((0,A_.g)(0),(0,p.U)(d=>d.groupId)),this.fullFrame$=this.layoutService.fullFrame$,this.url$=this.router.events.pipe((0,V.h)(d=>d instanceof S.m2),(0,p.U)(()=>this.router.url),(0,Pe.O)(this.router.url),(0,q.x)()),this.activeRoute$=this.url$.pipe((0,p.U)(d=>this.getCurrentRoute(d))),this.breadcrumbs$=this.userRoute$.pipe((0,v.w)(d=>(0,N.jH)(d)?this.getGroupBreadcrumbsService.getBreadcrumbs(d):(0,P.of)(void 0))),this.layoutService.configure({fullFrameActive:!1})}ngOnInit(){this.subscription=(0,De.a)([this.userRoute$,this.activeRoute$.pipe((0,p.U)(o=>this.pageTitle(o))),this.state$.pipe((0,R.RI)()),this.breadcrumbs$.pipe((0,Y.K)(()=>(0,P.of)(void 0)))]).pipe((0,p.U)(([o,t,i,a])=>(0,U_.Cm)({title:(0,Ce.g)(i.user),breadcrumbs:{category:"Users",path:[...(a?.slice(0,-1)??[]).map(s=>({title:s.name,navigateTo:this.groupRouter.url(s.route)})),{title:(0,Ce.g)(i.user),navigateTo:this.groupRouter.url(o)},{title:t}],currentPageIdx:a?a.length:1}}))).subscribe(o=>{this.currentContent.replace(o)})}ngOnDestroy(){this.currentContent.clear(),this.subscription?.unsubscribe(),this.refresh$.complete()}refresh(){this.refresh$.next()}pageTitle(o){switch(o){case"progress":return "Progress";case"personal-data":return "Personal info";case"settings":return "Settings"}}getCurrentRoute(o){return o.endsWith("/personal-data")?"personal-data":o.endsWith("/settings")?"settings":"progress"}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(S.gz),e.Y36(S.F0),e.Y36(no.u),e.Y36(W.o),e.Y36(Q.u),e.Y36(K.P),e.Y36(ae.u),e.Y36($e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["alg-user"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Y_,5),e.Gf(Q_,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.progress=i.first),e.iGM(i=e.CRH())&&(t.personalData=i.first)}},decls:2,vars:3,consts:function(){let r,o,t,i,a,s;return r="Error while loading the user info",o=" Progress ",t=" Personal data ",i=" Settings ",a="Progress",s="You cannot access this page for this user",[[4,"ngIf"],["class","dark","message",r,"refreshButtonType","refresh",3,"showRefreshButton","refresh",4,"ngIf"],["message",r,"refreshButtonType","refresh",1,"dark",3,"showRefreshButton","refresh"],[3,"user","route",4,"ngIf"],["class","nav-tab",4,"ngIf"],[3,"user","route"],[1,"nav-tab"],["routerLinkActive","",1,"nav-tab-item",3,"routerLink","routerLinkActiveOptions"],["progress","routerLinkActive"],o,["routerLinkActive","",1,"nav-tab-item",3,"routerLink","routerLinkActiveOptions","hidden"],["personalData","routerLinkActive"],t,["settings","routerLinkActive"],i,["forbidden",""],["class","bg-white",4,"ngIf"],[1,"bg-white"],["icon","fa fa-chart-line","label",a],[3,"groupId","showUserColumn"],[4,"ngIf","ngIfElse"],["message",s]]},template:function(o,t){1&o&&(e.YNc(0,ic,4,3,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.state$))},dependencies:[g.O5,S.yS,S.Od,L.e,I.q,$.N,y_,k_,Fe,B_,g.Ov],styles:[".no-access[_ngcontent-%COMP%]{margin:0;padding:1rem}"]}),n})();var Se=_(6482);const sc=[{path:"mine",component:gt},{path:"users/:id",component:ac,children:[{path:"personal-data",children:[]},{path:"settings",children:[]}]},{path:"by-id/:id",component:R_,children:[{path:"details",component:M_,canDeactivate:[Se.w],children:[{path:"",children:[]},{path:"members",children:[]},{path:"managers",children:[]},{path:"settings",canDeactivate:[Se.w],children:[]},{path:"access",children:[]}]}]}];let _c=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[S.Bz.forChild(sc),S.Bz]}),n})(),cc=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Se.w,eo],imports:[g.ez,_c,_o.q,O.UX,O.u5,x.hJ,ve.T,oe.z,fe.y,oo.S]}),n})()}}]);
//# sourceMappingURL=585.0a59e6a6b9863fd3.js.map