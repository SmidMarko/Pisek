<!doctype html>
<html>
   <head>
    <meta charset="utf-8">
    <title>2017-FR-AL-06</title>
    <script>
      window.stringsLanguage = 'fr';
   </script>
   <script class="remove" type="text/javascript" src="../../../_common/modules/pemFioi/importModules-1.1.js" id="import-modules"></script>
   <script class="remove" type="text/javascript">
      var modulesPath = '../../../_common/modules';
      importModules([
         'jquery-1.7.1', 'jquery-ui.touch-punch', 'raphael-2.1', 'JSON-js',
         'beav-1.0', 'beaver-task-2.0', 'simulation-2.0', 'raphaelFactory-1.0',
         'delayFactory-1.0', 'simulationFactory-1.0',
         'platform-pr', 'buttonsAndMessages', 'installationAPI.01', 'miniPlatform',
         'taskStyles-0.1']);
   </script>
   <script class="remove" type="text/javascript">
        var json = {
           "id": "http://castor-informatique.fr/tasks/alkindi_2017/2017-FR-AL-06-vigenere-numbers/",
           "language": "fr",
           "version": "fr.01",
           "authors": "Animath, France-ioi, Nir Lavee, Matthieu Lequesne, Razvan Barbaud, Mathias Hiron",
           "license": "CC BY-SA 3.0",
           "translators": [],
           "taskPathPrefix": "",
           "modulesPathPrefix": "",
           "browserSupport": [],
           "fullFeedback": true,
           "acceptedAnswers": [],
           "usesRandomSeed": false
        };
   </script>
      <script type="text/javascript">
        var taskStrings = {
           success: "Bravo, vous avez réussi !",
           errorText: "Le message n'est pas correct.", 
           invalidChars: function(nbInvalidChars) {
              var plural = "";
              if (nbInvalidChars > 1) {
                 plural = "s";
              }
              return "Il reste " + nbInvalidChars + " caractère" + plural + " invalide" + plural + ", marqué" + plural + " #.";
           }
        };
      </script>
      <script type="text/javascript" src="task.js"></script>
      <style>
         .intro {
            margin: 20px auto;
            border-collapse: collapse;
         }
         .intro td:first-child {
            padding: 0 20px 0 0;
         }
         #keyDiv {
             margin-left: 30px;
             text-align: left;
             border: solid black 1px;
             width: auto;
             display: inline-block;
             padding: 5px;
         }
         .keyCell {
            text-align: center;
         }
         .keyCell input {
            font-size: 20px;
            width: 32px;
            height: 32px;
         }
         .bigRow {
            border-collapse: collapse;
            margin-top: 10px;
            margin-bottom: 15px;
         }
         .letterCell, .wordSpaceCell {
            font-family: "Lucida Console", Monaco, monospace;
            font-size: 16px;
            text-align: center;
            width: 32px;
            padding: 0px 1px;
         }
         .letterCell, .wordSpaceCell {
            border-left: 1px solid #000;
            border-right: 1px solid #000;
         }
         .letterCell div, .wordSpaceCell div {
            padding: 3px 0;
         }
         .bigRow tr:first-child .letterCell, .bigRow tr:first-child .wordSpaceCell {
            border-top: 1px solid #000;
         }
         .bigRow tr:last-child .letterCell, .bigRow tr:last-child .wordSpaceCell {
            border-bottom: 1px solid #000;
         }
         .numCell {
            text-align: center;
            font-size: 12px;
         }
         .keyHighlight {
            border: 1px solid black;
            background-color: #F4F400;
         }
         .selectionLeft {
            border-left: 2px solid blue;
         }
         .selectionRight {
            border-right: 2px solid blue;
         }
         .selection {
            border-top: 2px solid blue;
            border-bottom: 2px solid blue;
            background-color: cyan;
         }
         .letter {
         }
         .keyNumber {
            border: 1px solid black;
            background-color: #F4F400;
         }
         .lockedLetter {
            background-color: lightblue;
         }
         .invalidLetter {
            background-color: #ffaec9;
         }
         #keyLengthContainer {
            padding-left: 30px;
         }
         .keyLock {
            width:22px;
         }
         .keyHighlightLeft, .keyLetterCellLeft {
            border-left: 4px solid #440;
         }
         .keyHighlightRight, .keyLetterCellRight {
            border-right: 4px solid #440;
         }
      </style>
   </head>
   <body>
      <div id="task">
         <h1>Clé répétée</h1>
         <div id="tabsContainer"></div>
         <div id="taskContent">

            <p>
            Pour déchiffrer le message <font style="font-family: 'Lucida Console', Monaco, monospace">"1 17 20 14 19 10"</font> avec la clé "+2, +1, +5", on procède comme ceci :
            </p>
            <table class="intro bigRow"><tbody>
               <tr>
                  <td>1- On écrit le message :</td>
                  <td class="letterCell keyLetterCellLeft"><div>1</div></td>
                  <td class="letterCell"><div>17</div></td>
                  <td class="letterCell"><div>20</div></td>
                  <td class="letterCell keyLetterCellLeft"><div>14</div></td>
                  <td class="letterCell"><div>19</div></td>
                  <td class="letterCell keyLetterCellRight"><div>10</div></td>
               </tr>
               <tr>
                  <td>2- On écrit la clé (en répétant si nécessaire) :</td>
                  <td class="numCell keyHighlight keyHighlightLeft"><div>+2</div></td>
                  <td class="numCell keyHighlight"><div>+1</div></td>
                  <td class="numCell keyHighlight"><div>+5</div></td>
                  <td class="numCell keyHighlight keyHighlightLeft"><div>+2</div></td>
                  <td class="numCell keyHighlight"><div>+1</div></td>
                  <td class="numCell keyHighlight keyHighlightRight"><div>+5</div></td>
               </tr>
               <tr>
                  <td>3- On ajoute les nombres du message et de la clé :</td>
                  <td class="letterCell keyLetterCellLeft"><div>3</div></td>
                  <td class="letterCell"><div>18</div></td>
                  <td class="letterCell"><div>25</div></td>
                  <td class="letterCell keyLetterCellLeft"><div>16</div></td>
                  <td class="letterCell"><div>20</div></td>
                  <td class="letterCell keyLetterCellRight"><div>15</div></td>
               </tr>
               <tr>
                  <td>4- On remplace par la lettre correspondante (A=1, B=2, ...) :</td>
                  <td class="letterCell keyLetterCellLeft"><div>C</div></td>
                  <td class="letterCell"><div>R</div></td>
                  <td class="letterCell"><div>Y</div></td>
                  <td class="letterCell keyLetterCellLeft"><div>P</div></td>
                  <td class="letterCell"><div>T</div></td>
                  <td class="letterCell keyLetterCellRight"><div>O</div></td>
               </tr>
            </tbody></table>

            <p>Si la valeur obtenue n'est pas entre 1 et 26, on ne peut pas remplacer par une lettre. On indique <font style="background-color:#ffaec9;font-family: 'Lucida Console', Monaco, monospace">&ensp;#&ensp;</font> pour signifier l'échec du décodage.
            </p>

            <p><b>Modifiez la clé pour déchiffrer la phrase.</b> <span class="medium hard">C'est à vous de choisir la longueur de la clé.</span>
            </p>

	         <div id="mainContainer" unselectable="on">
               <div id="keyDiv">
                  <table>
                     <tr>
                        <td>
                           Clé :
                        </td>
                        <td id="keyLengthContainer" class="medium hard">
                           Longueur : 
                           <input type='button' id='keySub' class="keyLengthButton" value='-'/>
                           <span id="keyLength">2</span>
                           <input type='button' id='keyAdd' class="keyLengthButton" value='+'/>
                           <div style="display:inline-block;width:200px"></div>
                        </td>
                     </tr>
                  </table>
                  <table id="keyTable">
                     <tr>
                        <td class="keyCell keyOperator">
                           <input type="button" value="-">
                        </td>
                        <td class="keyCell keyOperator">
                           <input type="button" value="-">
                        </td>
                        <td></td><td></td>
                     </tr>
                     <tr>
                        <td class="keyCell keyNumber">
                           3
                        </td>
                        <td class="keyCell keyNumber">
                           5
                        </td>
                        <td class="keyLeft">
                           [L]
                        </td>
                        <td class="keyRight">
                           [R]
                        </td>
                     </tr>
                     <tr>
                        <td class="keyCell keyOperator">
                           <input type="button" value="+">
                        </td>
                        <td class="keyCell keyOperator">
                           <input type="button" value="+">
                        </td>
                        <td></td><td></td>
                     </tr>
                     <tr>
                        <td class="keyCell keyLock">
                           [L]
                        </td>
                        <td class="keyCell keyLock">
                           [U]
                        </td>
                        <td></td><td></td>
                     </tr>
                  </table>
               </div>
               <div id="cipherDiv">
                  <table id="bigRowContainer">
                     <tr>
                        <td>
                           <table id="bigRow_0" class="bigRow">
                              <tr>
                                 <td class="letterCell">
                                    <div id="cipher_0" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionLeft selection">
                                    <div id="cipher_1" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionMiddle selection">
                                    <div id="cipher_2" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionRight selection">
                                    <div id="cipher_3" class="letter">X</div>
                                 </td>
                                 <td class="letterCell">
                                    <div id="cipher_4" class="letter">T</div>
                                 </td>
                              </tr>
                              <tr>
                                 <td class="numCell">
                                    <div id="cipherNum_0" class="cipherNum">+5</div>
                                 </td>
                                 <td class="numCell">
                                    <div id="cipherNum_1" class="cipherNum">+5</div>
                                 </td>
                                 <td class="numCell">
                                    <div id="cipherNum_2" class="cipherNum">+5</div>
                                 </td>
                                 <td class="numCell">
                                    <div id="cipherNum_3" class="cipherNum">+5</div>
                                 </td>
                                 <td class="numCell">
                                    <div id="cipherNum_4" class="cipherNum">+17</div>
                                 </td>
                              </tr>
                              <tr>
                                 <td class="letterCell">
                                    <div id="cipher_0" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionLeft selection">
                                    <div id="cipher_1" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionMiddle selection">
                                    <div id="cipher_2" class="letter">X</div>
                                 </td>
                                 <td class="letterCell selectionRight selection">
                                    <div id="cipher_3" class="letter">X</div>
                                 </td>
                                 <td class="letterCell">
                                    <div id="cipher_4" class="letter">T</div>
                                 </td>
                              </tr>
                           </table>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <div id="feedback"></div>
            <img src="unlock.png" id="unlock_img" style="display:none">
            <img src="_lock.png" id="lock_img" style="display:none">
            <img src="icon.png" style="display:none">
         </div>
      </div><!-- task -->
<div id="solution">
<h2>Solution</h2>
<div class="easy">
Les carrés rouges indiquent des erreurs, donc notre premier objectif est de les éliminer. Pour ce faire, il faut modifier la clé de façon que toutes les valeurs sur la 3e ligne soient entre 1 et 26 pour qu'elles puissent être remplacées par des lettres sur la 4e ligne.  
<ul>
<li> Quand la clé est (0,0,0), la première position du message est -1, donc il faut augmenter la première valeur de la clé. Quand elle devient 2 le carré rouge de la première position disparait. Si on l'augmente encore alors on fait apparaître un autre carré rouge dans la 7e groupe de 3 colonnes car la valeur 27 ne peut pas être remplacée par une lettre. On fixe donc la première valeur de la clé à <b>2</b>.
<li> Quand la clé vaut (2,0,0), la 15e position du message contient un carré rouge car -5 ne peut pas être remplacé par une lettre. On augmente la 3e position de la clé pour modifier la valeur -5 et, quand la clé vaut (2,0,6) le carré rouge disparaît. Si on augmente encore alors on fait apparaître un carré rouge dans la position 18 car les valeurs supérieures à 26 ne peuvenet pas être remplacées par des lettres. On fixe donc la 3e valeur de la clé à <b>6</b>. 
<li> Quand la clé vaut (2,0,6) la 23e position du message contient un carré rouge car -2 ne peut pas être remplacée par une lettre, on doit augmenter la 2e valeur de la clé. Quand celle-ci vaut 3 le carré rouge disparait. Si on continue d'augmenter alors on fait apparaitre un carré dans la 7e position. La clé est donc <b>(2,3,6)</b>.  
</ul>
<center>
<img src="easy.png" width="500">
</center>
</div>
<div class="medium">
Les carrés rouges sont des erreurs qu'on doit éliminer. Pour cela, on essaie une après l'autre toutes les longueurs possibles :
<ul>
<li> longueur 1 : c'est impossible car, quand le carré rouge de la 2e position disparait, la valeur de la 3e position est 28 et elle continue d'augmenter.
<li> longueur 2 : c'est impossible car, pour faire disparaitre le carré rouge de la 5e position, on doit augmenter la première valeur de la clé alors que, pour éliminer le carré rouge de la 19e position, on doit la diminuer.
<li> longueur 3 : c'est impossible car, pour faire disparaître les carrés rouges des positions 7 et 19 on doit à la fois augmenter et diminuer la première valeur de la clé.
<li> longueur 4 : c'est impossible car, pour faire disparaître les carrés rouges des positions 11 et 19, il faut à la fois augmenter et diminuer la 3e valeur de la clé. 
<li> logueur 5 : on commence par éliminer les carrés rouges. La première valeur de la clé doit être <b>2</b> car, si elle est plus petite ou plus grande, on fait apparaître des carrés rouges. Par le même raisonnement, la 2e valeur de la clé est nécessairement <b>4</b> et la 4e vaut <b>-1</b>.  
</ul>
<center>  
<img src="medium-intermediate.png" width="500">
</center>
La phrase recherchée contient le mot Q*I, qui est forcément QUI, Ensuite, on reconnaît le mot PA*LEZ comme étant PARLEZ, ce qui donne la solution :
<center>  
<img src="medium-solution.png" width="500">
</center>
</div>
<div class="hard">
On essaie d'éliminer les carrés rouges en essayant une à une les différentes longueur de clé. On dit que deux possitions sont incompatibles si l'une demande d'augmeer une position de la clé alors que l'autre demande de la diminuer. On dit qu'une position de la clé est fixée par deux lettres de la phrase si on trouve une valeur qui élimine les carrés rouges alors que, si on l'augmente ou on la dnimue, on fait apparaître des carrés rouges sur une des deux lettres. On obtient alors :
<ul>
<li> longueur 1 : impossible car les positions 4 et 5 sont incompatibles. 
<li> longueur 2 : impossible car les positions 4 et 18 sont incompatibles.
<li> longueurs 3, 4, 5 et 6 : impossible de la même manière.
<lI> longueur 7 : on peut éliminer tous les carrés rouges. On remarque aussi que plusieurs valeurs de la clé sont fixées : 
<ul>
<li> la 2e valeur de la clé est fixée à <b>4</b> par les positions 2 et 16,
<li> la 4e valeur de la clé est fixée à <b>-1</b> par les positions 4 et 32,
<li> la 5e valeur de la clé est fixée à <b>6</b> par les positions 5 et 33.
</ul>
<center>  
<img src="hard-intermediate.png" width="500">
</center>
Le quatrième mot du message est A*, la lettre * étant entre U et Z. Le seul mot possible est AU, ce qui fixe la 3e valeur de la clé à <b>-1</b>. Le dernier mot du message devient JAZ*, ce qui est nécessairement JAZZ et qui fixe la 6e valeur de la clé à <b>0</b>. Le deuxième mot du message est V*US et on reconnaît VOUS, donc la 7e valeur de la clé est <b>5</b> et la 1ère est <b>2</b>. On trouve ainsi la solution :
<center>  
<img src="hard-solution.png" width="500">
</center>
</div>

<h3>C'est de la crypto</h3>
<p>
Nous avons vu une légère modification du <a href="http://www.nymphomath.ch/crypto/vigenere/index.html">chiffre de Vigenère</a>. Celui-ci consiste à répéter une clé qui est ensuite ajoutée au rang de la lettre. Quand la valeur obtenue n'est pas entre 1 et 26, on la remplace par une lettre. Quand ce n'est pas le cas on rajoute ou soustrait 26 pour obtenir une valeur entre 1 et 26.
</p>

<p>Même les plus sûres méthodes de chiffrement deviennent vulnerables si on ne les applique pas à la lettre. Or, c'est tout à fait ce qu'on vient de voir : si on modifie le chiffre de Vigenère pour ne pas forcément apporter les valeurs entre 1 et 26, alors le chiffre perd toute sa sécurité.</p>

	  </div> <!-- task-solution -->
   </body>
</html>
