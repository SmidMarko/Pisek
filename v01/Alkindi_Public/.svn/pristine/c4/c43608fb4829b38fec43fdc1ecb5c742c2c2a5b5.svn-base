<!doctype html>
<html>

<head>
   <meta charset="utf-8">
   <title>2017-FR-AL-02</title>
   <script>
      window.stringsLanguage = 'fr';
   </script>
   <script class="remove" type="text/javascript" src="../../../_common/modules/pemFioi/importModules-1.1.js" id="import-modules"></script>
   <script class="remove" type="text/javascript">
      var modulesPath = '../../../_common/modules';
      importModules([
         'jquery-1.7.1', 'jquery-ui.touch-punch', 'raphael-2.1', 'JSON-js',
         'beav-1.0', 'beaver-task-2.0', 'simulation-2.0', 'raphaelFactory-1.0',
         'delayFactory-1.0', 'simulationFactory-1.0',
         'platform-pr', 'buttonsAndMessages', 'installationAPI.01', 'miniPlatform',
         'taskStyles-0.1']);
   </script>
   <script class="remove" type="text/javascript">
        var json = {
           "id": "http://castor-informatique.fr/tasks/alkindi_2017/2017-FR-AL-02-user-database/",
           "language": "fr",
           "version": "fr.01",
           "authors": "Animath, France-ioi, Nir Lavee, Matthieu Lequesne, Razvan Barbaud, Mathias Hiron",
           "license": "CC BY-SA 3.0",
           "translators": [],
           "taskPathPrefix": "",
           "modulesPathPrefix": "",
           "browserSupport": [],
           "fullFeedback": true,
           "acceptedAnswers": [],
           "usesRandomSeed": false
        };
   </script>
   <script type="text/javascript">
       var taskStrings = {
          success: "Bravo, vous avez réussi !",
          tooShort: "Erreur : le mot de passe doit contenir au moins 8 caractères.",
          error: "Erreur d'identifiant ou de mot de passe.", 
          headerInfo: {
             login: {
                short: "Login",
                sortName: "Login"
             },
             hint: {
                short: "Indice",
                long: "Indice du mot de passe",
                sortName: "Indice"
             },
             firstName: {
                short: "Prénom",
                sortName: "Prénom"
             },
             year: {
                short: "Année",
                sortName: "Année"
             },
             hash: {
                short: "Mdp chiffré",
                long: "Mot de passe chiffré",
                sortName: "Mot de passe chiffré"
             }
          }
       };
   </script>
   <script type="text/javascript" src="task.js"></script>
   <style>
      * {
         box-sizing: border-box
      }

      .table-wrapper {
         width: content-box;
         width: fit-content;
         width: min-content;
         width: fill;
         margin: 20px auto;
      }

      table.dbtable {
         border-collapse: collapse;
         table-layout: fixed;
      }

      table.tbody {
         display: block;
         max-height: 200px;
         overflow-y: auto;
         overflow-x: hidden;
         border-bottom: 1px solid #000;
        *padding-right: 17px; /*ie7 & ie6*/
        _padding-right: 0; /*ie6*/
        _height: 10em ;
      }
      .old_ie_wrapper { height: 300px; overflow: auto; }
      .old_ie_wrapper tbody { height: auto; }
      table.thead th {
         background-color: #555;
         color: #fff;
      }

      table.dbtable th {
         border: 1px solid #000;
      }

      table.dbtable td {
         border: 1px solid #000;
      }

      table.tbody tr:first-child td {
         border-top: none;
      }

      table.dbtable td {
         padding: 3px 10px 3px 5px;
      }

      table.dbtable tr:nth-child(odd) td {
         background-color: #efefef;
      }

      table.tbody tr:last-child td {
         border-bottom: none;
      }

      table.dbtable .col-small {
         width: 125px;
         min-width: 125px;
         max-width: 125px;
      }

      table.dbtable .col-medium {
         width: 180px;
         min-width: 180px;
         max-width: 180px;
      }

      table.dbtable .col-large {
         width: 300px;
         min-width: 300px;
         max-width: 300px;
      }

      .fake-page {
         margin: 50px 0 20px;
      }

      .fake-page .browser-tab {
         display: inline-block;
         background-color: #555;
         margin-left: 40px;
         padding: 3px 10px 3px 20px;
         color: #fff;
         border-radius: 12px 12px 0 0 / 30px 30px 0 0;
         box-shadow: 3px 3px 3px #777;
      }

      .fake-page .site-address {
         position: relative;
         border-left: 2px solid #ccc;
         border-right: 2px solid #ccc;
         padding: 5px;
         background-color: #555;
         box-shadow: 3px 3px 3px #777;
      }

      .fake-page .site-address span {
         display: block;
         width: 70%;
         margin: 0 auto;
         padding: 3px 3px 3px 10px;
         background-color: #fff;
         border-radius: 5px;
      }

      .fake-page .fake-page-content {
         position: relative;
         padding: 60px 0 80px;
         border-left: 2px solid #ccc;
         border-right: 2px solid #ccc;
         border-bottom: 2px solid #ccc;
         background-color: #efefef;
         box-shadow: 3px 3px 3px #777;
      }

      .panel {
         width: 300px;
         margin: 0 auto;
         background-color: #fff;
         box-shadow: 3px 3px 3px #ccc;
      }

      .panel-head {
         font-weight: bold;
         text-align: center;
         padding: 3px 5px;
         background-color: #7ac383;
         color: #fff;
      }

      .panel-body {
         padding: 20px 30px 40px;
      }

      .field-group {
         margin-bottom: 15px;
         line-height: 1.2em;
      }

      .panel-body label {
         display: block;
         font-size: 14px;
         line-height: 1.5em;
         color: #777;
      }

      .panel-body input {
         display: block;
         font-size: 22px;
         width: 100%;
         padding: 3px 5px;
         border: 1px solid #ccc;
      }

      .panel-body button {
         display: block;
         text-align: center;
         margin: 15px 0 0 auto;
         padding: 3px 20px;
         color: #fff;
         border: 1px solid #255625;
         background-color: #398439;
         border-radius: 3px;
         cursor: pointer;
      }

      .panel-body button:hover {
         background-color: #449d44;
         border-color: #398439;
      }
      #feedback {
         height: 2em;
         margin-top: 0.5em;
         margin-bottom: 0.1em;
         text-align: center;
         font-weight: bold;
         color: red; 
      }
      #sortList {
         width: 200px;
      }

      .sortBox {
         text-align: center;
      }

      .mono {
         font-family: monospace;
      }
   </style>
</head>

<body>
   <div id="task">
      <h1>Base de données</h1>
      <div id="tabsContainer"></div>
      <div id="taskContent">
         <p>Un site web mal sécurisé a rendu une partie de sa base de données accessible à tous.</p>
         <p class="easy">Elle ne contient pas les mots de passe des utilisateurs, mais leurs logins et l'indice qu'ils ont fourni pour se souvenir du mot de passe.</p>
         <p class="medium">Elle contient le login des utilisateurs et l'indice qu'ils ont fourni pour se souvenir du mot de passe.</p>
         <p class="hard">Elle contient des informations sur les utilisateurs.</p>
         <p class="medium hard">Heureusement, les mots de passes stockés ont été chiffrés.</p>
         <p><b>Saurez-vous trouver le mot de passe de l'un des utilisateurs ?</b></p>


         <div class="sortBox medium hard">
            Trier par :
            <select id="sortList">
               <!-- Auto filled in this format:
               <option value="login">Login</option>
            -->
            </select>
         </div>

         <div class='table-wrapper'>
                     <tr>
                     <th class='col-small'>login</th>
                     <th class='col-large'>indice sur le mot de passe</th>
                     </tr>
                  </thead>
            </table>
            <table id="databaseRows" class='tbody dbtable'>
            </table>
         </div>
</div> <!-- task -->


<div id="solution">
<h2>Solution</h2>
<div class="easy">
La plupart des indices sont inutilisables : 
<ul>
<li>numero de telephone -- impossible à deviner car on ne connaît pas son vrai nom
<li>noté page 428 de mon livre -- impossible à trouver car on ne connaît pas son livre préféré
<li> ...
</ul>
La situation est différente pour "mon jour de la semaine préféré" où le nombre de possibilités est faible : <b>7 mots de passe à essayer</b>. Le nombre est en fait plus petit car le mot de passe a au moins 8 lettres donc il reste mercredi, vendredi et dimanche. On les essaie tous et on trouve la solution : <b>vendredi</b>.
<h2>C'est de la crypto !</h2>
Cet exercice montre comment certains indices sont trop précis et permettent aux hackeurs de retrouver le mot de passe. C'est pour cette raison que beaucoup de sites ne proposent plus de choisir un indice ou une question pour retrouver son mot de passe. 
</div>
<div class="medium">
<center>
<img src="database-medium.png" width="600">
</center>
<p>Chaque utilisateur a choisi un indice qui ne compromet pas la sécurité de son mot de passe. Le problème est que plusieurs personnes ont utilisé le même. Pour trouver les doublons on trie la liste selon le mot de passe chiffré. Comme kokola, pluto15 et erika utilisent le même mot de passe, celui chiffré par 892b902b5a84de92, on sait que celui-ci
<ul>
<li> commence par "xyz",
<li> a "kor" au milieu,
<li> finit par "42".
</ul>
Le mot de passe de <b>kokola</b> est donc <b>xyzkor42</b>.
</p>
</div>
<div class="hard">
<center>
<img src="database-hard.png" width="600">
</center>
Chaque utilisateur a choisi un indice qui ne compromet pas la sécurité de son mot de passe. Le problème est que plusieurs personnes ont utilisé le même. Pour trouver les doublons on trie la liste selon le mot de passe chiffré. Parmi les doublons, le plus intéressant est le trio happyface, queenofnight et alice12. En effet, le mot de passe est de la forme prénom+année, il est utilisé par quelqu'un qui s'appelle Alice et par quelqu'un qui est née en 2001. Le mot de passe de <b>happyface</b> est alors <b>alice2001</b>.
</div>
<div class="medium hard">
<h2>C'est de la crypto !</h2>
<p>En 2013 plusieurs des dizaines de milliers de mots de passe ont été <a href="https://blog.nordnet.com/securite-2/piratage-securite-2/adobe-piratage-38-millions.html">dérobés</a>. Afin de rassurer ses clients la companie affectée a communiqué que les mots de passe ont été chiffrés (plus exactement hachés), ce qui suggère que les comptes sont encore sécurisés. Ce n'est pas le cas car, comme vu dans l'exercice, le chiffrement des mots de passe était erroné car il chiffrait de la même manière les mots de passe identiques.</p>
<p>Pour ne pas répéter cette erreur, les gérants des bases de mots de passe doivent chiffrer non pas les mots de passe mais la paire login-mot de passe. On dit qu'on a ajouté du <a href="https://fr.wikipedia.org/wiki/Salage_(cryptographie)">sel</a> au mot de passe.</p>
</div
</div>
</body>
</html>
